Last login: Sun Nov  9 23:01:55 on ttys070
kazuyaotani@Mac ~ % ssh root@212.85.24.206
root@212.85.24.206's password: 
Permission denied, please try again.
root@212.85.24.206's password: 
Welcome to Ubuntu 24.04.3 LTS (GNU/Linux 6.8.0-85-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Sun Nov  9 14:09:57 UTC 2025

  System load:  0.01               Processes:             129
  Usage of /:   13.9% of 95.82GB   Users logged in:       0
  Memory usage: 27%                IPv4 address for eth0: 212.85.24.206
  Swap usage:   0%                 IPv6 address for eth0: 2a02:4780:59:cc86::1

 * Strictly confined Kubernetes makes edge and IoT secure. Learn how MicroK8s
   just raised the bar for easy, resilient and secure K8s cluster deployment.

   https://ubuntu.com/engage/secure-kubernetes-at-the-edge

Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

Enable ESM Apps to receive additional future security updates.
See https://ubuntu.com/esm or run: sudo pro status


1 updates could not be installed automatically. For more details,
see /var/log/unattended-upgrades/unattended-upgrades.log

*** System restart required ***
Last login: Sun Nov  9 14:02:05 2025 from 106.155.51.71
root@srv1087935:~# cd /tmp
git clone https://github.com/SINJAPANLLC/sinjapan-worknow-ver1.git
cd sinjapan-worknow-ver1
chmod +x deployment/setup.sh
sudo bash deployment/setup.sh
Cloning into 'sinjapan-worknow-ver1'...
remote: Enumerating objects: 1923, done.
remote: Counting objects: 100% (1923/1923), done.
remote: Compressing objects: 100% (496/496), done.
remote: Total 1923 (delta 1390), reused 1898 (delta 1373), pack-reused 0 (from 0)
Receiving objects: 100% (1923/1923), 14.51 MiB | 10.43 MiB/s, done.
Resolving deltas: 100% (1390/1390), done.
=========================================
Work Now VPSセットアップを開始します
=========================================
[1/10] システムを更新中...
Hit:1 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-backports InRelease
Hit:2 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble InRelease               
Get:3 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security InRelease [126 kB]
Hit:4 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-updates InRelease       
Hit:5 http://archive.ubuntu.com/ubuntu noble InRelease                         
Get:6 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security/main amd64 Components [21.5 kB]
Get:7 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security/restricted amd64 Components [212 B]
Get:8 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security/universe amd64 Components [52.3 kB]
Get:9 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security/multiverse amd64 Components [208 B]
Hit:10 https://repository.monarx.com/repository/ubuntu-noble noble InRelease   
Hit:11 https://deb.nodesource.com/node_20.x nodistro InRelease      
Get:12 http://archive.ubuntu.com/ubuntu noble-updates InRelease [126 kB]
Get:13 http://archive.ubuntu.com/ubuntu noble-backports InRelease [126 kB]
Get:14 http://archive.ubuntu.com/ubuntu noble-security InRelease [126 kB]
Get:15 http://archive.ubuntu.com/ubuntu noble-updates/main amd64 Components [175 kB]
Get:16 http://archive.ubuntu.com/ubuntu noble-updates/universe amd64 Components [378 kB]
Get:17 http://archive.ubuntu.com/ubuntu noble-updates/restricted amd64 Components [212 B]
Get:18 http://archive.ubuntu.com/ubuntu noble-updates/multiverse amd64 Components [940 B]
Get:19 http://archive.ubuntu.com/ubuntu noble-backports/main amd64 Components [7140 B]
Get:20 http://archive.ubuntu.com/ubuntu noble-backports/universe amd64 Components [11.0 kB]
Get:21 http://archive.ubuntu.com/ubuntu noble-backports/restricted amd64 Components [216 B]
Get:22 http://archive.ubuntu.com/ubuntu noble-backports/multiverse amd64 Components [212 B]
Get:23 http://archive.ubuntu.com/ubuntu noble-security/main amd64 Components [21.5 kB]
Get:24 http://archive.ubuntu.com/ubuntu noble-security/universe amd64 Components [52.3 kB]
Get:25 http://archive.ubuntu.com/ubuntu noble-security/restricted amd64 Components [212 B]
Get:26 http://archive.ubuntu.com/ubuntu noble-security/multiverse amd64 Components [212 B]
Fetched 1226 kB in 2s (494 kB/s)           
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
1 package can be upgraded. Run 'apt list --upgradable' to see it.
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Calculating upgrade... Done
The following packages have been kept back:
  cloud-init
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
[2/10] 必要なパッケージをインストール中...
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
git is already the newest version (1:2.43.0-1ubuntu7.3).
nginx is already the newest version (1.24.0-2ubuntu7.5).
postgresql is already the newest version (16+257build1.1).
postgresql-contrib is already the newest version (16+257build1.1).
python3 is already the newest version (3.12.3-0ubuntu2).
python3 set to manually installed.
nodejs is already the newest version (20.19.5-1nodesource1).
certbot is already the newest version (2.9.0-1).
python3-certbot-nginx is already the newest version (2.9.0-1).
ufw is already the newest version (0.36.2-6).
fail2ban is already the newest version (1.0.2-3ubuntu0.1).
Some packages could not be installed. This may mean that you have
requested an impossible situation or if you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 nodejs : Conflicts: npm
 npm : Depends: node-agent-base but it is not going to be installed
       Depends: node-archy but it is not going to be installed
       Depends: node-cacache (>= 17) but it is not going to be installed
       Depends: node-chalk (>= 5.1.2-2~) but it is not going to be installed
       Depends: node-cli-table3
       Depends: node-columnify but it is not going to be installed
       Depends: node-cssesc
       Depends: node-debug but it is not going to be installed
       Depends: node-emoji-regex
       Depends: node-gyp but it is not going to be installed
       Depends: node-http-proxy-agent but it is not going to be installed
       Depends: node-https-proxy-agent but it is not going to be installed
       Depends: node-mkdirp but it is not going to be installed
       Depends: node-ms but it is not going to be installed
       Depends: node-nopt but it is not going to be installed
       Depends: node-normalize-package-data but it is not going to be installed
       Depends: node-npm-bundled but it is not going to be installed
       Depends: node-npm-normalize-package-bin
       Depends: node-npm-package-arg (>= 10) but it is not going to be installed
       Depends: node-npmlog but it is not going to be installed
       Depends: node-postcss-selector-parser
       Depends: node-read-package-json but it is not going to be installed
       Depends: node-rimraf but it is not going to be installed
       Depends: node-semver but it is not going to be installed
       Depends: node-string-width but it is not going to be installed
       Depends: node-strip-ansi but it is not going to be installed
       Depends: node-tar but it is not going to be installed
       Depends: node-validate-npm-package-name but it is not going to be installed
       Depends: node-which but it is not going to be installed
       Depends: nodejs:any
       Recommends: node-tap but it is not going to be installed
E: Unable to correct problems, you have held broken packages.
root@srv1087935:/tmp/sinjapan-worknow-ver1# # VPS上で実行（既にログイン済みのはず）
cd /tmp/sinjapan-worknow-ver1

# スクリプトを修正（以下の内容をコピペ）
nano deployment/setup.sh
root@srv1087935:/tmp/sinjapan-worknow-ver1# cd /tmp
git clone https://github.com/SINJAPANLLC/sinjapan-worknow-ver1.git
cd sinjapan-worknow-ver1
chmod +x deployment/setup.sh
sudo bash deployment/setup.sh
fatal: destination path 'sinjapan-worknow-ver1' already exists and is not an empty directory.
=========================================
Work Now VPSセットアップを開始します
=========================================
[1/10] システムを更新中...
Hit:1 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-backports InRelease
Hit:2 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble InRelease               
Hit:3 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security InRelease      
Hit:4 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-updates InRelease       
Hit:5 https://deb.nodesource.com/node_20.x nodistro InRelease                  
Hit:6 http://archive.ubuntu.com/ubuntu noble InRelease                         
Hit:7 https://repository.monarx.com/repository/ubuntu-noble noble InRelease
Hit:8 http://archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:9 http://archive.ubuntu.com/ubuntu noble-backports InRelease
Hit:10 http://archive.ubuntu.com/ubuntu noble-security InRelease
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
1 package can be upgraded. Run 'apt list --upgradable' to see it.
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Calculating upgrade... Done
The following packages have been kept back:
  cloud-init
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
[2/10] 必要なパッケージをインストール中...
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
git is already the newest version (1:2.43.0-1ubuntu7.3).
nginx is already the newest version (1.24.0-2ubuntu7.5).
postgresql is already the newest version (16+257build1.1).
postgresql-contrib is already the newest version (16+257build1.1).
python3 is already the newest version (3.12.3-0ubuntu2).
python3 set to manually installed.
nodejs is already the newest version (20.19.5-1nodesource1).
certbot is already the newest version (2.9.0-1).
python3-certbot-nginx is already the newest version (2.9.0-1).
ufw is already the newest version (0.36.2-6).
fail2ban is already the newest version (1.0.2-3ubuntu0.1).
The following additional packages will be installed:
  javascript-common libexpat1-dev libjs-jquery libjs-sphinxdoc
  libjs-underscore libpython3-dev libpython3.12-dev python3-dev
  python3-pip-whl python3-setuptools-whl python3-wheel python3.12-dev
  python3.12-venv zlib1g-dev
The following NEW packages will be installed:
  javascript-common libexpat1-dev libjs-jquery libjs-sphinxdoc
  libjs-underscore libpython3-dev libpython3.12-dev python3-dev python3-pip
  python3-pip-whl python3-setuptools-whl python3-venv python3-wheel
  python3.12-dev python3.12-venv zlib1g-dev
0 upgraded, 16 newly installed, 0 to remove and 1 not upgraded.
Need to get 11.6 MB of archives.
After this operation, 44.0 MB of additional disk space will be used.
Get:1 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble/main amd64 javascript-common all 11+nmu1 [5936 B]
Get:2 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security/main amd64 libexpat1-dev amd64 2.6.1-2ubuntu0.3 [140 kB]
Get:3 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble/main amd64 libjs-jquery all 3.6.1+dfsg+~3.5.14-1 [328 kB]
Get:4 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble/main amd64 libjs-underscore all 1.13.4~dfsg+~1.11.4-3 [118 kB]
Get:5 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble/main amd64 libjs-sphinxdoc all 7.2.6-6 [149 kB]
Get:6 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-updates/main amd64 zlib1g-dev amd64 1:1.3.dfsg-3.1ubuntu2.1 [894 kB]
Get:7 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security/main amd64 libpython3.12-dev amd64 3.12.3-1ubuntu0.8 [5677 kB]
Get:8 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-updates/main amd64 libpython3-dev amd64 3.12.3-0ubuntu2 [10.3 kB]
Get:9 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security/main amd64 python3.12-dev amd64 3.12.3-1ubuntu0.8 [498 kB]
Get:10 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-updates/main amd64 python3-dev amd64 3.12.3-0ubuntu2 [26.7 kB]
Get:11 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble/universe amd64 python3-wheel all 0.42.0-2 [53.1 kB]
Get:12 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security/universe amd64 python3-pip all 24.0+dfsg-1ubuntu1.3 [1320 kB]
Get:13 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security/universe amd64 python3-pip-whl all 24.0+dfsg-1ubuntu1.3 [1707 kB]
Get:14 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security/universe amd64 python3-setuptools-whl all 68.1.2-2ubuntu1.2 [716 kB]
Get:15 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security/universe amd64 python3.12-venv amd64 3.12.3-1ubuntu0.8 [5678 B]
Get:16 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-updates/universe amd64 python3-venv amd64 3.12.3-0ubuntu2 [1034 B]
Fetched 11.6 MB in 1s (14.4 MB/s)
Selecting previously unselected package javascript-common.
(Reading database ... 116982 files and directories currently installed.)
Preparing to unpack .../00-javascript-common_11+nmu1_all.deb ...
Unpacking javascript-common (11+nmu1) ...
Selecting previously unselected package libexpat1-dev:amd64.
Preparing to unpack .../01-libexpat1-dev_2.6.1-2ubuntu0.3_amd64.deb ...
Unpacking libexpat1-dev:amd64 (2.6.1-2ubuntu0.3) ...
Selecting previously unselected package libjs-jquery.
Preparing to unpack .../02-libjs-jquery_3.6.1+dfsg+~3.5.14-1_all.deb ...
Unpacking libjs-jquery (3.6.1+dfsg+~3.5.14-1) ...
Selecting previously unselected package libjs-underscore.
Preparing to unpack .../03-libjs-underscore_1.13.4~dfsg+~1.11.4-3_all.deb ...
Unpacking libjs-underscore (1.13.4~dfsg+~1.11.4-3) ...
Selecting previously unselected package libjs-sphinxdoc.
Preparing to unpack .../04-libjs-sphinxdoc_7.2.6-6_all.deb ...
Unpacking libjs-sphinxdoc (7.2.6-6) ...
Selecting previously unselected package zlib1g-dev:amd64.
Preparing to unpack .../05-zlib1g-dev_1%3a1.3.dfsg-3.1ubuntu2.1_amd64.deb ...
Unpacking zlib1g-dev:amd64 (1:1.3.dfsg-3.1ubuntu2.1) ...
Selecting previously unselected package libpython3.12-dev:amd64.
Preparing to unpack .../06-libpython3.12-dev_3.12.3-1ubuntu0.8_amd64.deb ...
Unpacking libpython3.12-dev:amd64 (3.12.3-1ubuntu0.8) ...
Selecting previously unselected package libpython3-dev:amd64.
Preparing to unpack .../07-libpython3-dev_3.12.3-0ubuntu2_amd64.deb ...
Unpacking libpython3-dev:amd64 (3.12.3-0ubuntu2) ...
Selecting previously unselected package python3.12-dev.
Preparing to unpack .../08-python3.12-dev_3.12.3-1ubuntu0.8_amd64.deb ...
Unpacking python3.12-dev (3.12.3-1ubuntu0.8) ...
Selecting previously unselected package python3-dev.
Preparing to unpack .../09-python3-dev_3.12.3-0ubuntu2_amd64.deb ...
Unpacking python3-dev (3.12.3-0ubuntu2) ...
Selecting previously unselected package python3-wheel.
Preparing to unpack .../10-python3-wheel_0.42.0-2_all.deb ...
Unpacking python3-wheel (0.42.0-2) ...
Selecting previously unselected package python3-pip.
Preparing to unpack .../11-python3-pip_24.0+dfsg-1ubuntu1.3_all.deb ...
Unpacking python3-pip (24.0+dfsg-1ubuntu1.3) ...
Selecting previously unselected package python3-pip-whl.
Preparing to unpack .../12-python3-pip-whl_24.0+dfsg-1ubuntu1.3_all.deb ...
Unpacking python3-pip-whl (24.0+dfsg-1ubuntu1.3) ...
Selecting previously unselected package python3-setuptools-whl.
Preparing to unpack .../13-python3-setuptools-whl_68.1.2-2ubuntu1.2_all.deb ...
Unpacking python3-setuptools-whl (68.1.2-2ubuntu1.2) ...
Selecting previously unselected package python3.12-venv.
Preparing to unpack .../14-python3.12-venv_3.12.3-1ubuntu0.8_amd64.deb ...
Unpacking python3.12-venv (3.12.3-1ubuntu0.8) ...
Selecting previously unselected package python3-venv.
Preparing to unpack .../15-python3-venv_3.12.3-0ubuntu2_amd64.deb ...
Unpacking python3-venv (3.12.3-0ubuntu2) ...
Setting up javascript-common (11+nmu1) ...
Setting up python3-setuptools-whl (68.1.2-2ubuntu1.2) ...
Setting up python3-pip-whl (24.0+dfsg-1ubuntu1.3) ...
Setting up python3-wheel (0.42.0-2) ...
Setting up libexpat1-dev:amd64 (2.6.1-2ubuntu0.3) ...
Setting up python3-pip (24.0+dfsg-1ubuntu1.3) ...
Setting up zlib1g-dev:amd64 (1:1.3.dfsg-3.1ubuntu2.1) ...
Setting up libjs-jquery (3.6.1+dfsg+~3.5.14-1) ...
Setting up libjs-underscore (1.13.4~dfsg+~1.11.4-3) ...
Setting up python3.12-venv (3.12.3-1ubuntu0.8) ...
Setting up libpython3.12-dev:amd64 (3.12.3-1ubuntu0.8) ...
Setting up python3-venv (3.12.3-0ubuntu2) ...
Setting up python3.12-dev (3.12.3-1ubuntu0.8) ...
Setting up libjs-sphinxdoc (7.2.6-6) ...
Setting up libpython3-dev:amd64 (3.12.3-0ubuntu2) ...
Setting up python3-dev (3.12.3-0ubuntu2) ...
Processing triggers for man-db (2.12.0-4build2) ...
Scanning processes...                                                           
Scanning candidates...                                                          
Scanning linux images...                                                        

Pending kernel upgrade!
Running kernel version:
  6.8.0-85-generic
Diagnostics:
  The currently running kernel version is not the expected kernel version
6.8.0-87-generic.

Restarting the system to load the new kernel will not be handled automatically,
so you should consider rebooting.

Restarting services...
 systemctl restart fail2ban.service

Service restarts being deferred:
 systemctl restart unattended-upgrades.service

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
Node.js 20.xをインストール中...
2025-11-09 14:17:49 - Installing pre-requisites
Hit:1 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-backports InRelease
Hit:2 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble InRelease               
Hit:3 https://repository.monarx.com/repository/ubuntu-noble noble InRelease    
Hit:4 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security InRelease      
Hit:5 https://deb.nodesource.com/node_20.x nodistro InRelease                  
Hit:6 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-updates InRelease       
Hit:7 http://archive.ubuntu.com/ubuntu noble InRelease                         
Hit:8 http://archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:9 http://archive.ubuntu.com/ubuntu noble-backports InRelease
Hit:10 http://archive.ubuntu.com/ubuntu noble-security InRelease
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
1 package can be upgraded. Run 'apt list --upgradable' to see it.
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
apt-transport-https is already the newest version (2.8.3).
ca-certificates is already the newest version (20240203).
curl is already the newest version (8.5.0-2ubuntu10.6).
gnupg is already the newest version (2.4.4-2ubuntu17.3).
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
Hit:1 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-backports InRelease
Hit:2 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble InRelease               
Hit:3 https://repository.monarx.com/repository/ubuntu-noble noble InRelease    
Hit:4 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security InRelease      
Hit:5 https://deb.nodesource.com/node_20.x nodistro InRelease                  
Hit:6 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-updates InRelease       
Hit:7 http://archive.ubuntu.com/ubuntu noble InRelease
Hit:8 http://archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:9 http://archive.ubuntu.com/ubuntu noble-backports InRelease
Hit:10 http://archive.ubuntu.com/ubuntu noble-security InRelease
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
1 package can be upgraded. Run 'apt list --upgradable' to see it.
2025-11-09 14:17:55 - Repository configured successfully.
2025-11-09 14:17:55 - To install Node.js, run: apt install nodejs -y
2025-11-09 14:17:55 - You can use N|solid Runtime as a node.js alternative
2025-11-09 14:17:55 - To install N|solid Runtime, run: apt install nsolid -y 

Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
nodejs is already the newest version (20.19.5-1nodesource1).
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
[3/10] ファイアウォールを設定中...
Skipping adding existing rule
Skipping adding existing rule (v6)
Skipping adding existing rule
Skipping adding existing rule (v6)
Firewall is active and enabled on system startup
[4/10] PostgreSQLを設定中...
CREATE DATABASE
CREATE ROLE
ALTER ROLE
ALTER ROLE
ALTER ROLE
GRANT
You are now connected to database "worknow_production" as user "postgres".
GRANT
⚠️  PostgreSQLのパスワードを必ず変更してください！
[5/10] アプリケーションディレクトリを作成中...
[6/10] GitHubからコードをクローン中...
Cloning into '.'...
remote: Enumerating objects: 1923, done.
remote: Counting objects: 100% (1923/1923), done.
remote: Compressing objects: 100% (496/496), done.
remote: Total 1923 (delta 1390), reused 1898 (delta 1373), pack-reused 0 (from 0)
Receiving objects: 100% (1923/1923), 14.51 MiB | 15.87 MiB/s, done.
Resolving deltas: 100% (1390/1390), done.
[7/10] Python仮想環境をセットアップ中...
Requirement already satisfied: pip in ./venv/lib/python3.12/site-packages (24.0)
Collecting pip
  Downloading pip-25.3-py3-none-any.whl.metadata (4.7 kB)
Downloading pip-25.3-py3-none-any.whl (1.8 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.8/1.8 MB 14.2 MB/s eta 0:00:00
Installing collected packages: pip
  Attempting uninstall: pip
    Found existing installation: pip 24.0
    Uninstalling pip-24.0:
      Successfully uninstalled pip-24.0
Successfully installed pip-25.3
Collecting fastapi (from -r backend/requirements.txt (line 1))
  Downloading fastapi-0.121.1-py3-none-any.whl.metadata (28 kB)
Collecting python-dotenv (from -r backend/requirements.txt (line 3))
  Downloading python_dotenv-1.2.1-py3-none-any.whl.metadata (25 kB)
ERROR: Could not find a version that satisfies the requirement supabase-py (from versions: none)
ERROR: No matching distribution found for supabase-py
root@srv1087935:/tmp/sinjapan-worknow-ver1# # VPS上で実行
cd /tmp/sinjapan-worknow-ver1

# 最新のコードを取得
git pull origin main

# requirements.txtを確認（supabase-pyではなくsupabaseになっているはず）
grep supabase backend/requirements.txt

# セットアップスクリプトを再実行
sudo bash deployment/setup.sh
From https://github.com/SINJAPANLLC/sinjapan-worknow-ver1
 * branch            main       -> FETCH_HEAD
Already up to date.
supabase-py
=========================================
Work Now VPSセットアップを開始します
=========================================
[1/10] システムを更新中...
Hit:1 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-backports InRelease
Hit:2 https://deb.nodesource.com/node_20.x nodistro InRelease                  
Hit:3 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble InRelease               
Hit:4 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security InRelease      
Hit:5 http://archive.ubuntu.com/ubuntu noble InRelease                         
Hit:6 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-updates InRelease       
Hit:7 https://repository.monarx.com/repository/ubuntu-noble noble InRelease
Hit:8 http://archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:9 http://archive.ubuntu.com/ubuntu noble-backports InRelease
Hit:10 http://archive.ubuntu.com/ubuntu noble-security InRelease
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
1 package can be upgraded. Run 'apt list --upgradable' to see it.
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
Calculating upgrade... Done
The following packages have been kept back:
  cloud-init
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
[2/10] 必要なパッケージをインストール中...
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
git is already the newest version (1:2.43.0-1ubuntu7.3).
nginx is already the newest version (1.24.0-2ubuntu7.5).
postgresql is already the newest version (16+257build1.1).
postgresql-contrib is already the newest version (16+257build1.1).
python3 is already the newest version (3.12.3-0ubuntu2).
python3-pip is already the newest version (24.0+dfsg-1ubuntu1.3).
python3-venv is already the newest version (3.12.3-0ubuntu2).
nodejs is already the newest version (20.19.5-1nodesource1).
certbot is already the newest version (2.9.0-1).
python3-certbot-nginx is already the newest version (2.9.0-1).
ufw is already the newest version (0.36.2-6).
fail2ban is already the newest version (1.0.2-3ubuntu0.1).
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
Node.js 20.xをインストール中...
2025-11-09 14:19:12 - Installing pre-requisites
Hit:1 https://deb.nodesource.com/node_20.x nodistro InRelease
Hit:2 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-backports InRelease     
Hit:3 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble InRelease               
Hit:4 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security InRelease
Hit:5 http://archive.ubuntu.com/ubuntu noble InRelease                         
Hit:6 https://repository.monarx.com/repository/ubuntu-noble noble InRelease    
Hit:7 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-updates InRelease       
Hit:8 http://archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:9 http://archive.ubuntu.com/ubuntu noble-backports InRelease
Hit:10 http://archive.ubuntu.com/ubuntu noble-security InRelease
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
1 package can be upgraded. Run 'apt list --upgradable' to see it.
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
apt-transport-https is already the newest version (2.8.3).
ca-certificates is already the newest version (20240203).
curl is already the newest version (8.5.0-2ubuntu10.6).
gnupg is already the newest version (2.4.4-2ubuntu17.3).
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
Hit:1 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-backports InRelease
Hit:2 https://deb.nodesource.com/node_20.x nodistro InRelease                  
Hit:3 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble InRelease               
Hit:4 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-security InRelease      
Hit:5 https://repository.monarx.com/repository/ubuntu-noble noble InRelease    
Hit:6 https://cdn.ubuntu.repo.cloudeka.id/ubuntu noble-updates InRelease       
Hit:7 http://archive.ubuntu.com/ubuntu noble InRelease                         
Hit:8 http://archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:9 http://archive.ubuntu.com/ubuntu noble-backports InRelease
Hit:10 http://archive.ubuntu.com/ubuntu noble-security InRelease
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
1 package can be upgraded. Run 'apt list --upgradable' to see it.
2025-11-09 14:19:19 - Repository configured successfully.
2025-11-09 14:19:19 - To install Node.js, run: apt install nodejs -y
2025-11-09 14:19:19 - You can use N|solid Runtime as a node.js alternative
2025-11-09 14:19:19 - To install N|solid Runtime, run: apt install nsolid -y 

Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
nodejs is already the newest version (20.19.5-1nodesource1).
0 upgraded, 0 newly installed, 0 to remove and 1 not upgraded.
[3/10] ファイアウォールを設定中...
Skipping adding existing rule
Skipping adding existing rule (v6)
Skipping adding existing rule
Skipping adding existing rule (v6)
Firewall is active and enabled on system startup
[4/10] PostgreSQLを設定中...
ERROR:  database "worknow_production" already exists
ERROR:  role "worknow_user" already exists
ALTER ROLE
ALTER ROLE
ALTER ROLE
GRANT
You are now connected to database "worknow_production" as user "postgres".
GRANT
⚠️  PostgreSQLのパスワードを必ず変更してください！
[5/10] アプリケーションディレクトリを作成中...
[6/10] GitHubからコードをクローン中...
既存のリポジトリを更新中...
remote: Enumerating objects: 28, done.
remote: Counting objects: 100% (28/28), done.
remote: Compressing objects: 100% (7/7), done.
remote: Total 19 (delta 12), reused 19 (delta 12), pack-reused 0 (from 0)
Unpacking objects: 100% (19/19), 10.85 KiB | 694.00 KiB/s, done.
From https://github.com/SINJAPANLLC/sinjapan-worknow-ver1
   6fc3ca1..319d55d  main       -> origin/main
Updating 6fc3ca1..319d55d
Fast-forward
 .gitignore                                         |  10 +
 DEPLOYMENT.md                                      | 435 +++++++++++++++++++++
 ...-root-212-85-24-1762697733235_1762697733235.txt | 146 +++++++
 backend/requirements.txt                           |  96 ++++-
 backend/uploads/.gitkeep                           |   0
 deployment/nginx-http.conf                         |  44 +++
 deployment/setup.sh                                |  34 +-
 replit.md                                          |  33 +-
 8 files changed, 764 insertions(+), 34 deletions(-)
 create mode 100644 DEPLOYMENT.md
 create mode 100644 attached_assets/Pasted-Last-login-Sun-Nov-9-23-01-55-on-ttys070-kazuyaotani-Mac-ssh-root-212-85-24-206-root-212-85-24-1762697733235_1762697733235.txt
 create mode 100644 backend/uploads/.gitkeep
 create mode 100644 deployment/nginx-http.conf
[7/10] Python仮想環境をセットアップ中...
Requirement already satisfied: pip in ./venv/lib/python3.12/site-packages (25.3)
Collecting aiofiles==25.1.0 (from -r backend/requirements.txt (line 1))
  Downloading aiofiles-25.1.0-py3-none-any.whl.metadata (6.3 kB)
Collecting aiohappyeyeballs==2.6.1 (from -r backend/requirements.txt (line 2))
  Downloading aiohappyeyeballs-2.6.1-py3-none-any.whl.metadata (5.9 kB)
Collecting aiohttp==3.13.2 (from -r backend/requirements.txt (line 3))
  Downloading aiohttp-3.13.2-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (8.1 kB)
Collecting aiosignal==1.4.0 (from -r backend/requirements.txt (line 4))
  Downloading aiosignal-1.4.0-py3-none-any.whl.metadata (3.7 kB)
Collecting annotated-doc==0.0.3 (from -r backend/requirements.txt (line 5))
  Downloading annotated_doc-0.0.3-py3-none-any.whl.metadata (6.6 kB)
Collecting annotated-types==0.7.0 (from -r backend/requirements.txt (line 6))
  Downloading annotated_types-0.7.0-py3-none-any.whl.metadata (15 kB)
Collecting anyio==4.11.0 (from -r backend/requirements.txt (line 7))
  Downloading anyio-4.11.0-py3-none-any.whl.metadata (4.1 kB)
Collecting attrs==25.4.0 (from -r backend/requirements.txt (line 8))
  Downloading attrs-25.4.0-py3-none-any.whl.metadata (10 kB)
Collecting CacheControl==0.14.3 (from -r backend/requirements.txt (line 9))
  Downloading cachecontrol-0.14.3-py3-none-any.whl.metadata (3.1 kB)
Collecting cachetools==6.2.1 (from -r backend/requirements.txt (line 10))
  Downloading cachetools-6.2.1-py3-none-any.whl.metadata (5.5 kB)
Collecting certifi==2025.10.5 (from -r backend/requirements.txt (line 11))
  Downloading certifi-2025.10.5-py3-none-any.whl.metadata (2.5 kB)
Collecting cffi==2.0.0 (from -r backend/requirements.txt (line 12))
  Downloading cffi-2.0.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (2.6 kB)
Collecting charset-normalizer==3.4.4 (from -r backend/requirements.txt (line 13))
  Downloading charset_normalizer-3.4.4-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (37 kB)
Collecting click==8.3.0 (from -r backend/requirements.txt (line 14))
  Downloading click-8.3.0-py3-none-any.whl.metadata (2.6 kB)
Collecting cryptography==46.0.3 (from -r backend/requirements.txt (line 15))
  Downloading cryptography-46.0.3-cp311-abi3-manylinux_2_34_x86_64.whl.metadata (5.7 kB)
Collecting deprecation==2.1.0 (from -r backend/requirements.txt (line 16))
  Downloading deprecation-2.1.0-py2.py3-none-any.whl.metadata (4.6 kB)
Collecting dnspython==2.8.0 (from -r backend/requirements.txt (line 17))
  Downloading dnspython-2.8.0-py3-none-any.whl.metadata (5.7 kB)
Collecting ecdsa==0.19.1 (from -r backend/requirements.txt (line 18))
  Downloading ecdsa-0.19.1-py2.py3-none-any.whl.metadata (29 kB)
Collecting email-validator==2.3.0 (from -r backend/requirements.txt (line 19))
  Downloading email_validator-2.3.0-py3-none-any.whl.metadata (26 kB)
Collecting fastapi==0.121.0 (from -r backend/requirements.txt (line 20))
  Downloading fastapi-0.121.0-py3-none-any.whl.metadata (28 kB)
Collecting firebase_admin==7.1.0 (from -r backend/requirements.txt (line 21))
  Downloading firebase_admin-7.1.0-py3-none-any.whl.metadata (1.7 kB)
Collecting frozenlist==1.8.0 (from -r backend/requirements.txt (line 22))
  Downloading frozenlist-1.8.0-cp312-cp312-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl.metadata (20 kB)
Collecting google-api-core==2.28.1 (from -r backend/requirements.txt (line 23))
  Downloading google_api_core-2.28.1-py3-none-any.whl.metadata (3.3 kB)
Collecting google-auth==2.43.0 (from -r backend/requirements.txt (line 24))
  Downloading google_auth-2.43.0-py2.py3-none-any.whl.metadata (6.6 kB)
Collecting google-cloud-core==2.5.0 (from -r backend/requirements.txt (line 25))
  Downloading google_cloud_core-2.5.0-py3-none-any.whl.metadata (3.1 kB)
Collecting google-cloud-firestore==2.21.0 (from -r backend/requirements.txt (line 26))
  Downloading google_cloud_firestore-2.21.0-py3-none-any.whl.metadata (9.9 kB)
Collecting google-cloud-storage==3.5.0 (from -r backend/requirements.txt (line 27))
  Downloading google_cloud_storage-3.5.0-py3-none-any.whl.metadata (13 kB)
Collecting google-crc32c==1.7.1 (from -r backend/requirements.txt (line 28))
  Downloading google_crc32c-1.7.1-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.3 kB)
Collecting google-resumable-media==2.7.2 (from -r backend/requirements.txt (line 29))
  Downloading google_resumable_media-2.7.2-py2.py3-none-any.whl.metadata (2.2 kB)
Collecting googleapis-common-protos==1.72.0 (from -r backend/requirements.txt (line 30))
  Downloading googleapis_common_protos-1.72.0-py3-none-any.whl.metadata (9.4 kB)
Collecting grpcio==1.76.0 (from -r backend/requirements.txt (line 31))
  Downloading grpcio-1.76.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (3.7 kB)
Collecting grpcio-status==1.76.0 (from -r backend/requirements.txt (line 32))
  Downloading grpcio_status-1.76.0-py3-none-any.whl.metadata (1.1 kB)
Collecting gunicorn==23.0.0 (from -r backend/requirements.txt (line 33))
  Downloading gunicorn-23.0.0-py3-none-any.whl.metadata (4.4 kB)
Collecting h11==0.16.0 (from -r backend/requirements.txt (line 34))
  Downloading h11-0.16.0-py3-none-any.whl.metadata (8.3 kB)
Collecting h2==4.3.0 (from -r backend/requirements.txt (line 35))
  Downloading h2-4.3.0-py3-none-any.whl.metadata (5.1 kB)
Collecting hpack==4.1.0 (from -r backend/requirements.txt (line 36))
  Downloading hpack-4.1.0-py3-none-any.whl.metadata (4.6 kB)
Collecting httpcore==1.0.9 (from -r backend/requirements.txt (line 37))
  Downloading httpcore-1.0.9-py3-none-any.whl.metadata (21 kB)
Collecting httpx==0.28.1 (from -r backend/requirements.txt (line 38))
  Downloading httpx-0.28.1-py3-none-any.whl.metadata (7.1 kB)
Collecting hyperframe==6.1.0 (from -r backend/requirements.txt (line 39))
  Downloading hyperframe-6.1.0-py3-none-any.whl.metadata (4.3 kB)
Collecting idna==3.11 (from -r backend/requirements.txt (line 40))
  Downloading idna-3.11-py3-none-any.whl.metadata (8.4 kB)
Collecting msgpack==1.1.2 (from -r backend/requirements.txt (line 41))
  Downloading msgpack-1.1.2-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (8.1 kB)
Collecting multidict==6.7.0 (from -r backend/requirements.txt (line 42))
  Downloading multidict-6.7.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (5.3 kB)
Collecting packaging==25.0 (from -r backend/requirements.txt (line 43))
  Downloading packaging-25.0-py3-none-any.whl.metadata (3.3 kB)
Collecting passlib==1.7.4 (from -r backend/requirements.txt (line 44))
  Downloading passlib-1.7.4-py2.py3-none-any.whl.metadata (1.7 kB)
Collecting pillow==12.0.0 (from -r backend/requirements.txt (line 45))
  Downloading pillow-12.0.0-cp312-cp312-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl.metadata (8.8 kB)
Collecting postgrest==2.24.0 (from -r backend/requirements.txt (line 46))
  Downloading postgrest-2.24.0-py3-none-any.whl.metadata (3.4 kB)
Collecting propcache==0.4.1 (from -r backend/requirements.txt (line 47))
  Downloading propcache-0.4.1-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (13 kB)
Collecting proto-plus==1.26.1 (from -r backend/requirements.txt (line 48))
  Downloading proto_plus-1.26.1-py3-none-any.whl.metadata (2.2 kB)
Collecting protobuf==6.33.0 (from -r backend/requirements.txt (line 49))
  Downloading protobuf-6.33.0-cp39-abi3-manylinux2014_x86_64.whl.metadata (593 bytes)
Collecting psycopg2-binary==2.9.11 (from -r backend/requirements.txt (line 50))
  Downloading psycopg2_binary-2.9.11-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata (4.9 kB)
Collecting pyasn1==0.6.1 (from -r backend/requirements.txt (line 51))
  Downloading pyasn1-0.6.1-py3-none-any.whl.metadata (8.4 kB)
Collecting pyasn1_modules==0.4.2 (from -r backend/requirements.txt (line 52))
  Downloading pyasn1_modules-0.4.2-py3-none-any.whl.metadata (3.5 kB)
Collecting pycparser==2.23 (from -r backend/requirements.txt (line 53))
  Downloading pycparser-2.23-py3-none-any.whl.metadata (993 bytes)
Collecting pydantic==2.12.4 (from -r backend/requirements.txt (line 54))
  Downloading pydantic-2.12.4-py3-none-any.whl.metadata (89 kB)
Collecting pydantic-settings==2.11.0 (from -r backend/requirements.txt (line 55))
  Downloading pydantic_settings-2.11.0-py3-none-any.whl.metadata (3.4 kB)
Collecting pydantic_core==2.41.5 (from -r backend/requirements.txt (line 56))
  Downloading pydantic_core-2.41.5-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (7.3 kB)
Collecting PyJWT==2.10.1 (from -r backend/requirements.txt (line 57))
  Downloading PyJWT-2.10.1-py3-none-any.whl.metadata (4.0 kB)
Collecting python-dotenv==1.2.1 (from -r backend/requirements.txt (line 58))
  Using cached python_dotenv-1.2.1-py3-none-any.whl.metadata (25 kB)
Collecting python-jose==3.5.0 (from -r backend/requirements.txt (line 59))
  Downloading python_jose-3.5.0-py2.py3-none-any.whl.metadata (5.5 kB)
Collecting python-multipart==0.0.20 (from -r backend/requirements.txt (line 60))
  Downloading python_multipart-0.0.20-py3-none-any.whl.metadata (1.8 kB)
Collecting qrcode==8.2 (from -r backend/requirements.txt (line 61))
  Downloading qrcode-8.2-py3-none-any.whl.metadata (17 kB)
Collecting realtime==2.24.0 (from -r backend/requirements.txt (line 62))
  Downloading realtime-2.24.0-py3-none-any.whl.metadata (7.0 kB)
Collecting redis==7.0.1 (from -r backend/requirements.txt (line 63))
  Downloading redis-7.0.1-py3-none-any.whl.metadata (12 kB)
Collecting requests==2.32.5 (from -r backend/requirements.txt (line 64))
  Downloading requests-2.32.5-py3-none-any.whl.metadata (4.9 kB)
Collecting rsa==4.9.1 (from -r backend/requirements.txt (line 65))
  Downloading rsa-4.9.1-py3-none-any.whl.metadata (5.6 kB)
Collecting six==1.17.0 (from -r backend/requirements.txt (line 66))
  Downloading six-1.17.0-py2.py3-none-any.whl.metadata (1.7 kB)
Collecting sniffio==1.3.1 (from -r backend/requirements.txt (line 67))
  Downloading sniffio-1.3.1-py3-none-any.whl.metadata (3.9 kB)
Collecting starlette==0.49.3 (from -r backend/requirements.txt (line 68))
  Downloading starlette-0.49.3-py3-none-any.whl.metadata (6.4 kB)
Collecting storage3==2.24.0 (from -r backend/requirements.txt (line 69))
  Downloading storage3-2.24.0-py3-none-any.whl.metadata (2.1 kB)
Collecting StrEnum==0.4.15 (from -r backend/requirements.txt (line 70))
  Downloading StrEnum-0.4.15-py3-none-any.whl.metadata (5.3 kB)
Collecting stripe==13.2.0 (from -r backend/requirements.txt (line 71))
  Downloading stripe-13.2.0-py3-none-any.whl.metadata (18 kB)
Collecting supabase==2.24.0 (from -r backend/requirements.txt (line 72))
  Downloading supabase-2.24.0-py3-none-any.whl.metadata (4.6 kB)
Collecting supabase-auth==2.24.0 (from -r backend/requirements.txt (line 73))
  Downloading supabase_auth-2.24.0-py3-none-any.whl.metadata (6.4 kB)
Collecting supabase-functions==2.24.0 (from -r backend/requirements.txt (line 74))
  Downloading supabase_functions-2.24.0-py3-none-any.whl.metadata (2.4 kB)
Collecting typing-inspection==0.4.2 (from -r backend/requirements.txt (line 75))
  Downloading typing_inspection-0.4.2-py3-none-any.whl.metadata (2.6 kB)
Collecting typing_extensions==4.15.0 (from -r backend/requirements.txt (line 76))
  Downloading typing_extensions-4.15.0-py3-none-any.whl.metadata (3.3 kB)
Collecting urllib3==2.5.0 (from -r backend/requirements.txt (line 77))
  Downloading urllib3-2.5.0-py3-none-any.whl.metadata (6.5 kB)
Collecting uvicorn==0.38.0 (from -r backend/requirements.txt (line 78))
  Downloading uvicorn-0.38.0-py3-none-any.whl.metadata (6.8 kB)
Collecting websockets==15.0.1 (from -r backend/requirements.txt (line 79))
  Downloading websockets-15.0.1-cp312-cp312-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (6.8 kB)
Collecting yarl==1.22.0 (from -r backend/requirements.txt (line 80))
  Downloading yarl-1.22.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (75 kB)
Downloading aiofiles-25.1.0-py3-none-any.whl (14 kB)
Downloading aiohappyeyeballs-2.6.1-py3-none-any.whl (15 kB)
Downloading aiohttp-3.13.2-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (1.8 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.8/1.8 MB 11.2 MB/s  0:00:00
Downloading multidict-6.7.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (256 kB)
Downloading yarl-1.22.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (377 kB)
Downloading aiosignal-1.4.0-py3-none-any.whl (7.5 kB)
Downloading annotated_doc-0.0.3-py3-none-any.whl (5.5 kB)
Downloading annotated_types-0.7.0-py3-none-any.whl (13 kB)
Downloading anyio-4.11.0-py3-none-any.whl (109 kB)
Downloading attrs-25.4.0-py3-none-any.whl (67 kB)
Downloading cachecontrol-0.14.3-py3-none-any.whl (21 kB)
Downloading msgpack-1.1.2-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (427 kB)
Downloading cachetools-6.2.1-py3-none-any.whl (11 kB)
Downloading certifi-2025.10.5-py3-none-any.whl (163 kB)
Downloading cffi-2.0.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (219 kB)
Downloading charset_normalizer-3.4.4-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (153 kB)
Downloading click-8.3.0-py3-none-any.whl (107 kB)
Downloading cryptography-46.0.3-cp311-abi3-manylinux_2_34_x86_64.whl (4.5 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.5/4.5 MB 29.2 MB/s  0:00:00
Downloading deprecation-2.1.0-py2.py3-none-any.whl (11 kB)
Downloading dnspython-2.8.0-py3-none-any.whl (331 kB)
Downloading ecdsa-0.19.1-py2.py3-none-any.whl (150 kB)
Downloading email_validator-2.3.0-py3-none-any.whl (35 kB)
Downloading fastapi-0.121.0-py3-none-any.whl (109 kB)
Downloading pydantic-2.12.4-py3-none-any.whl (463 kB)
Downloading starlette-0.49.3-py3-none-any.whl (74 kB)
Downloading firebase_admin-7.1.0-py3-none-any.whl (137 kB)
Downloading google_api_core-2.28.1-py3-none-any.whl (173 kB)
Downloading google_auth-2.43.0-py2.py3-none-any.whl (223 kB)
Downloading googleapis_common_protos-1.72.0-py3-none-any.whl (297 kB)
Downloading proto_plus-1.26.1-py3-none-any.whl (50 kB)
Downloading protobuf-6.33.0-cp39-abi3-manylinux2014_x86_64.whl (323 kB)
Downloading requests-2.32.5-py3-none-any.whl (64 kB)
Downloading idna-3.11-py3-none-any.whl (71 kB)
Downloading rsa-4.9.1-py3-none-any.whl (34 kB)
Downloading urllib3-2.5.0-py3-none-any.whl (129 kB)
Downloading frozenlist-1.8.0-cp312-cp312-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl (242 kB)
Downloading google_cloud_core-2.5.0-py3-none-any.whl (29 kB)
Downloading google_cloud_firestore-2.21.0-py3-none-any.whl (368 kB)
Downloading google_cloud_storage-3.5.0-py3-none-any.whl (289 kB)
Downloading google_crc32c-1.7.1-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (32 kB)
Downloading google_resumable_media-2.7.2-py2.py3-none-any.whl (81 kB)
Downloading grpcio-1.76.0-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (6.6 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 6.6/6.6 MB 31.9 MB/s  0:00:00
Downloading typing_extensions-4.15.0-py3-none-any.whl (44 kB)
Downloading grpcio_status-1.76.0-py3-none-any.whl (14 kB)
Downloading gunicorn-23.0.0-py3-none-any.whl (85 kB)
Downloading h11-0.16.0-py3-none-any.whl (37 kB)
Downloading h2-4.3.0-py3-none-any.whl (61 kB)
Downloading hpack-4.1.0-py3-none-any.whl (34 kB)
Downloading hyperframe-6.1.0-py3-none-any.whl (13 kB)
Downloading httpcore-1.0.9-py3-none-any.whl (78 kB)
Downloading httpx-0.28.1-py3-none-any.whl (73 kB)
Downloading packaging-25.0-py3-none-any.whl (66 kB)
Downloading passlib-1.7.4-py2.py3-none-any.whl (525 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 525.6/525.6 kB 26.2 MB/s  0:00:00
Downloading pillow-12.0.0-cp312-cp312-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl (7.0 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 7.0/7.0 MB 31.9 MB/s  0:00:00
Downloading postgrest-2.24.0-py3-none-any.whl (21 kB)
Downloading propcache-0.4.1-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (221 kB)
Downloading psycopg2_binary-2.9.11-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (4.2 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.2/4.2 MB 32.0 MB/s  0:00:00
Downloading pyasn1-0.6.1-py3-none-any.whl (83 kB)
Downloading pyasn1_modules-0.4.2-py3-none-any.whl (181 kB)
Downloading pycparser-2.23-py3-none-any.whl (118 kB)
Downloading pydantic_settings-2.11.0-py3-none-any.whl (48 kB)
Downloading pydantic_core-2.41.5-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (2.1 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.1/2.1 MB 31.6 MB/s  0:00:00
Downloading PyJWT-2.10.1-py3-none-any.whl (22 kB)
Downloading python_dotenv-1.2.1-py3-none-any.whl (21 kB)
Downloading python_jose-3.5.0-py2.py3-none-any.whl (34 kB)
Downloading python_multipart-0.0.20-py3-none-any.whl (24 kB)
Downloading qrcode-8.2-py3-none-any.whl (45 kB)
Downloading realtime-2.24.0-py3-none-any.whl (22 kB)
Downloading websockets-15.0.1-cp312-cp312-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (182 kB)
Downloading redis-7.0.1-py3-none-any.whl (339 kB)
Downloading six-1.17.0-py2.py3-none-any.whl (11 kB)
Downloading sniffio-1.3.1-py3-none-any.whl (10 kB)
Downloading storage3-2.24.0-py3-none-any.whl (19 kB)
Downloading StrEnum-0.4.15-py3-none-any.whl (8.9 kB)
Downloading stripe-13.2.0-py3-none-any.whl (2.0 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.0/2.0 MB 30.9 MB/s  0:00:00
Downloading supabase-2.24.0-py3-none-any.whl (16 kB)
Downloading supabase_auth-2.24.0-py3-none-any.whl (48 kB)
Downloading supabase_functions-2.24.0-py3-none-any.whl (8.5 kB)
Downloading typing_inspection-0.4.2-py3-none-any.whl (14 kB)
Downloading uvicorn-0.38.0-py3-none-any.whl (68 kB)
Installing collected packages: StrEnum, passlib, websockets, urllib3, typing_extensions, sniffio, six, redis, qrcode, python-multipart, python-dotenv, PyJWT, pycparser, pyasn1, psycopg2-binary, protobuf, propcache, pillow, packaging, multidict, msgpack, idna, hyperframe, hpack, h11, google-crc32c, frozenlist, dnspython, click, charset-normalizer, certifi, cachetools, attrs, annotated-types, annotated-doc, aiohappyeyeballs, aiofiles, yarl, uvicorn, typing-inspection, rsa, requests, pydantic_core, pyasn1_modules, proto-plus, httpcore, h2, gunicorn, grpcio, googleapis-common-protos, google-resumable-media, email-validator, ecdsa, deprecation, cffi, anyio, aiosignal, stripe, starlette, python-jose, pydantic, httpx, grpcio-status, google-auth, cryptography, CacheControl, aiohttp, realtime, pydantic-settings, google-api-core, fastapi, supabase-functions, supabase-auth, storage3, postgrest, google-cloud-core, supabase, google-cloud-storage, google-cloud-firestore, firebase_admin
Successfully installed CacheControl-0.14.3 PyJWT-2.10.1 StrEnum-0.4.15 aiofiles-25.1.0 aiohappyeyeballs-2.6.1 aiohttp-3.13.2 aiosignal-1.4.0 annotated-doc-0.0.3 annotated-types-0.7.0 anyio-4.11.0 attrs-25.4.0 cachetools-6.2.1 certifi-2025.10.5 cffi-2.0.0 charset-normalizer-3.4.4 click-8.3.0 cryptography-46.0.3 deprecation-2.1.0 dnspython-2.8.0 ecdsa-0.19.1 email-validator-2.3.0 fastapi-0.121.0 firebase_admin-7.1.0 frozenlist-1.8.0 google-api-core-2.28.1 google-auth-2.43.0 google-cloud-core-2.5.0 google-cloud-firestore-2.21.0 google-cloud-storage-3.5.0 google-crc32c-1.7.1 google-resumable-media-2.7.2 googleapis-common-protos-1.72.0 grpcio-1.76.0 grpcio-status-1.76.0 gunicorn-23.0.0 h11-0.16.0 h2-4.3.0 hpack-4.1.0 httpcore-1.0.9 httpx-0.28.1 hyperframe-6.1.0 idna-3.11 msgpack-1.1.2 multidict-6.7.0 packaging-25.0 passlib-1.7.4 pillow-12.0.0 postgrest-2.24.0 propcache-0.4.1 proto-plus-1.26.1 protobuf-6.33.0 psycopg2-binary-2.9.11 pyasn1-0.6.1 pyasn1_modules-0.4.2 pycparser-2.23 pydantic-2.12.4 pydantic-settings-2.11.0 pydantic_core-2.41.5 python-dotenv-1.2.1 python-jose-3.5.0 python-multipart-0.0.20 qrcode-8.2 realtime-2.24.0 redis-7.0.1 requests-2.32.5 rsa-4.9.1 six-1.17.0 sniffio-1.3.1 starlette-0.49.3 storage3-2.24.0 stripe-13.2.0 supabase-2.24.0 supabase-auth-2.24.0 supabase-functions-2.24.0 typing-inspection-0.4.2 typing_extensions-4.15.0 urllib3-2.5.0 uvicorn-0.38.0 websockets-15.0.1 yarl-1.22.0
[8/10] フロントエンドをビルド中...

added 326 packages, and audited 327 packages in 4s

82 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

> frontend@0.0.0 build
> tsc -b && vite build

src/components/layout/AppShell.tsx:1:10 - error TS1484: 'ReactNode' is a type and must be imported using a type-only import when 'verbatimModuleSyntax' is enabled.

1 import { ReactNode } from 'react';
           ~~~~~~~~~

src/components/layout/AppShell.tsx:20:10 - error TS2322: Type '{ children: ReactNode; initial: { opacity: number; y: number; }; animate: { opacity: number; y: number; }; exit: { opacity: number; y: number; }; transition: { duration: number; ease: string; }; className: string; }' is not assignable to type 'Omit<HTMLMotionProps<"main">, "ref">'.
  Types of property 'transition' are incompatible.
    Type '{ duration: number; ease: string; }' is not assignable to type 'Transition<any> | undefined'.
      Type '{ duration: number; ease: string; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
        Type '{ duration: number; ease: string; }' is not assignable to type 'ValueAnimationTransition<any>'.
          Types of property 'ease' are incompatible.
            Type 'string' is not assignable to type 'Easing | Easing[] | undefined'.

20         <motion.main
            ~~~~~~~~~~~

src/components/layout/RoleBottomNav.tsx:2:122 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

2 import { Sparkles, Zap, Flame, Bell, UserCircle, Briefcase, Plus, Home, MessageCircle, Users, BarChart3, Settings } from 'lucide-react';
                                                                                                                           ~~~~~~~~~~~~~~

src/components/map/OnlineWorkersMap.tsx:5:27 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

5 import type { User } from '../../lib/api';
                            ~~~~~~~~~~~~~~~

src/components/map/OnlineWorkersMap.tsx:6:23 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

6 import { Users } from 'lucide-react';
                        ~~~~~~~~~~~~~~

src/components/map/OnlineWorkersMap.tsx:104:65 - error TS7006: Parameter 'qual' implicitly has an 'any' type.

104                         {worker.qualifications.slice(0, 3).map((qual, idx) => (
                                                                    ~~~~

src/components/map/OnlineWorkersMap.tsx:104:71 - error TS7006: Parameter 'idx' implicitly has an 'any' type.

104                         {worker.qualifications.slice(0, 3).map((qual, idx) => (
                                                                          ~~~

src/components/map/WorkerMap.tsx:4:8 - error TS2307: Cannot find module 'leaflet-routing-machine' or its corresponding type declarations.

4 import 'leaflet-routing-machine';
         ~~~~~~~~~~~~~~~~~~~~~~~~~

src/components/map/WorkerMap.tsx:99:30 - error TS2339: Property 'Routing' does not exist on type 'typeof import("/var/www/worknow/frontend/node_modules/@types/leaflet/index")'.

99     const routingControl = L.Routing.control({
                                ~~~~~~~

src/components/ui/Button.tsx:1:10 - error TS1484: 'ButtonHTMLAttributes' is a type and must be imported using a type-only import when 'verbatimModuleSyntax' is enabled.

1 import { ButtonHTMLAttributes, forwardRef } from 'react';
           ~~~~~~~~~~~~~~~~~~~~

src/components/ui/Button.tsx:35:8 - error TS2322: Type '{ children: (ReactNode | Element)[]; form?: string | undefined; formAction?: string | ((formData: FormData) => void | Promise<void>) | undefined; ... 287 more ...; variants: { ...; }; }' is not assignable to type 'Omit<HTMLMotionProps<"button">, "ref">'.
  Types of property 'onDrag' are incompatible.
    Type 'DragEventHandler<HTMLButtonElement> | undefined' is not assignable to type '((event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => void) | undefined'.
      Type 'DragEventHandler<HTMLButtonElement>' is not assignable to type '(event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => void'.
        Types of parameters 'event' and 'event' are incompatible.
          Type 'MouseEvent | TouchEvent | PointerEvent' is not assignable to type 'DragEvent<HTMLButtonElement>'.
            Type 'MouseEvent' is missing the following properties from type 'DragEvent<HTMLButtonElement>': dataTransfer, nativeEvent, isDefaultPrevented, isPropagationStopped, persist

35       <motion.button
          ~~~~~~~~~~~~~

src/components/ui/Card.tsx:1:10 - error TS1484: 'HTMLAttributes' is a type and must be imported using a type-only import when 'verbatimModuleSyntax' is enabled.

1 import { HTMLAttributes, ReactNode } from 'react';
           ~~~~~~~~~~~~~~

src/components/ui/Card.tsx:1:26 - error TS1484: 'ReactNode' is a type and must be imported using a type-only import when 'verbatimModuleSyntax' is enabled.

1 import { HTMLAttributes, ReactNode } from 'react';
                           ~~~~~~~~~

src/components/ui/Card.tsx:27:6 - error TS2322: Type '{ children: ReactNode; defaultChecked?: boolean | undefined; defaultValue?: string | number | readonly string[] | undefined; suppressContentEditableWarning?: boolean | undefined; ... 275 more ...; whileHover: { ...; } | undefined; }' is not assignable to type 'Omit<HTMLMotionProps<"div">, "ref">'.
  Types of property 'onDrag' are incompatible.
    Type 'DragEventHandler<HTMLDivElement> | undefined' is not assignable to type '((event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => void) | undefined'.
      Type 'DragEventHandler<HTMLDivElement>' is not assignable to type '(event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => void'.
        Types of parameters 'event' and 'event' are incompatible.
          Type 'MouseEvent | TouchEvent | PointerEvent' is not assignable to type 'DragEvent<HTMLDivElement>'.
            Type 'MouseEvent' is missing the following properties from type 'DragEvent<HTMLDivElement>': dataTransfer, nativeEvent, isDefaultPrevented, isPropagationStopped, persist

27     <motion.div
        ~~~~~~~~~~

src/hooks/useAuthInit.ts:3:17 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

3 import api from '../lib/api';
                  ~~~~~~~~~~~~

src/pages/ActivityPage.tsx:10:8 - error TS2307: Cannot find module '@heroicons/react/24/outline' or its corresponding type declarations.

10 } from '@heroicons/react/24/outline';
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ActivityPage.tsx:11:31 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

11 import { activitiesAPI } from '../lib/api';
                                 ~~~~~~~~~~~~

src/pages/ActivityPage.tsx:16:65 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

16 import { Sparkles, Zap, Flame, MessageCircle, UserCircle } from 'lucide-react';
                                                                   ~~~~~~~~~~~~~~

src/pages/ActivityPage.tsx:87:32 - error TS7006: Parameter 'activity' implicitly has an 'any' type.

87               {activities.map((activity) => (
                                  ~~~~~~~~

src/pages/NotificationsPage.tsx:3:37 - error TS2307: Cannot find module '@heroicons/react/24/outline' or its corresponding type declarations.

3 import { BellIcon, CheckIcon } from '@heroicons/react/24/outline';
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/NotificationsPage.tsx:6:53 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

6 import { notificationsAPI, type Notification } from '../lib/api';
                                                      ~~~~~~~~~~~~

src/pages/PaymentsPage.tsx:13:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

13 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/PaymentsPage.tsx:19:8 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

19 } from '../lib/api';
          ~~~~~~~~~~~~

src/pages/PaymentsPage.tsx:20:65 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

20 import { Sparkles, Zap, Flame, MessageCircle, UserCircle } from 'lucide-react';
                                                                   ~~~~~~~~~~~~~~

src/pages/PaymentsPage.tsx:135:26 - error TS7006: Parameter 'payment' implicitly has an 'any' type.

135           {payments.map((payment) => (
                             ~~~~~~~

src/pages/PenaltiesPage.tsx:6:94 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

6 import { AlertTriangle, XCircle, Ban, Sparkles, Zap, Flame, MessageCircle, UserCircle } from 'lucide-react';
                                                                                               ~~~~~~~~~~~~~~

src/pages/PenaltiesPage.tsx:7:30 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

7 import { penaltiesAPI } from '../lib/api';
                               ~~~~~~~~~~~~

src/pages/ProfilePage.tsx:11:8 - error TS2307: Cannot find module '@heroicons/react/24/outline' or its corresponding type declarations.

11 } from '@heroicons/react/24/outline';
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:16:45 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

16 import { authAPI, filesAPI, phoneAPI } from '../lib/api';
                                               ~~~~~~~~~~~~

src/pages/ProfilePage.tsx:18:55 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

18 import { Wallet, HelpCircle, ShieldAlert, Star } from 'lucide-react';
                                                         ~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:66:35 - error TS2339: Property 'emergency_contact_name' does not exist on type 'User'.

66     emergency_contact_name: user?.emergency_contact_name || '',
                                     ~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:67:36 - error TS2339: Property 'emergency_contact_phone' does not exist on type 'User'.

67     emergency_contact_phone: user?.emergency_contact_phone || '',
                                      ~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:68:43 - error TS2339: Property 'emergency_contact_relationship' does not exist on type 'User'.

68     emergency_contact_relationship: user?.emergency_contact_relationship || '',
                                             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:69:27 - error TS2339: Property 'qualifications' does not exist on type 'User'.

69     qualifications: user?.qualifications || [],
                             ~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:151:37 - error TS2339: Property 'emergency_contact_name' does not exist on type 'User'.

151       emergency_contact_name: user?.emergency_contact_name || '',
                                        ~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:152:38 - error TS2339: Property 'emergency_contact_phone' does not exist on type 'User'.

152       emergency_contact_phone: user?.emergency_contact_phone || '',
                                         ~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:153:45 - error TS2339: Property 'emergency_contact_relationship' does not exist on type 'User'.

153       emergency_contact_relationship: user?.emergency_contact_relationship || '',
                                                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:154:29 - error TS2339: Property 'qualifications' does not exist on type 'User'.

154       qualifications: user?.qualifications || [],
                                ~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:612:63 - error TS2339: Property 'emergency_contact_name' does not exist on type 'User'.

612                           <p className="text-gray-900">{user?.emergency_contact_name || '未設定'}</p>
                                                                  ~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:629:63 - error TS2339: Property 'emergency_contact_phone' does not exist on type 'User'.

629                           <p className="text-gray-900">{user?.emergency_contact_phone || '未設定'}</p>
                                                                  ~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:646:63 - error TS2339: Property 'emergency_contact_relationship' does not exist on type 'User'.

646                           <p className="text-gray-900">{user?.emergency_contact_relationship || '未設定'}</p>
                                                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:717:33 - error TS2339: Property 'qualifications' does not exist on type 'User'.

717                         {(user?.qualifications || []).length > 0 ? (
                                    ~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:718:34 - error TS2339: Property 'qualifications' does not exist on type 'User'.

718                           (user?.qualifications || []).map((qual: string, index: number) => (
                                     ~~~~~~~~~~~~~~

src/pages/ReviewsListPage.tsx:5:22 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

5 import { Star } from 'lucide-react';
                       ~~~~~~~~~~~~~~

src/pages/ReviewsListPage.tsx:6:28 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

6 import { reviewsAPI } from '../lib/api';
                             ~~~~~~~~~~~~

src/pages/ReviewsListPage.tsx:7:65 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

7 import { Sparkles, Zap, Flame, MessageCircle, UserCircle } from 'lucide-react';
                                                                  ~~~~~~~~~~~~~~

src/pages/SupportPage.tsx:5:114 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

5 import { MessageCircle, Mail, Phone, HelpCircle, ChevronDown, ChevronUp, Sparkles, Zap, Flame, UserCircle } from 'lucide-react';
                                                                                                                   ~~~~~~~~~~~~~~

src/pages/admin/AdminDashboard.tsx:6:26 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { adminAPI } from '../../lib/api';
                           ~~~~~~~~~~~~~~~

src/pages/admin/AdminDashboard.tsx:19:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

19 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/admin/JobsManagePage.tsx:20:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

20 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:4:26 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

4 import { adminAPI } from '../../lib/api';
                           ~~~~~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:13:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

13 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:61:68 - error TS2339: Property 'total_users' does not exist on type '{}'.

61                   <div className="text-3xl font-bold mb-1">{stats?.total_users || 0}</div>
                                                                      ~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:73:68 - error TS2339: Property 'total_jobs' does not exist on type '{}'.

73                   <div className="text-3xl font-bold mb-1">{stats?.total_jobs || 0}</div>
                                                                      ~~~~~~~~~~

src/pages/admin/StatsPage.tsx:85:68 - error TS2339: Property 'total_applications' does not exist on type '{}'.

85                   <div className="text-3xl font-bold mb-1">{stats?.total_applications || 0}</div>
                                                                      ~~~~~~~~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:98:32 - error TS2339: Property 'total_revenue' does not exist on type '{}'.

98                     ¥{((stats?.total_revenue || 0) / 10000).toFixed(1)}万
                                  ~~~~~~~~~~~~~

src/pages/admin/UsersManagePage.tsx:20:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

20 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/admin/UsersManagePage.tsx:22:26 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

22 import { adminAPI } from '../../lib/api';
                            ~~~~~~~~~~~~~~~

src/pages/admin/UsersManagePage.tsx:47:26 - error TS7006: Parameter 'user' implicitly has an 'any' type.

47     return users.filter((user) => {
                            ~~~~

src/pages/admin/UsersManagePage.tsx:70:29 - error TS7006: Parameter 'u' implicitly has an 'any' type.

70     worker: allUsers.filter(u => u.role === 'worker').length,
                               ~

src/pages/admin/UsersManagePage.tsx:71:30 - error TS7006: Parameter 'u' implicitly has an 'any' type.

71     company: allUsers.filter(u => u.role === 'company').length,
                                ~

src/pages/admin/UsersManagePage.tsx:72:28 - error TS7006: Parameter 'u' implicitly has an 'any' type.

72     admin: allUsers.filter(u => u.role === 'admin').length,
                              ~

src/pages/admin/UsersManagePage.tsx:141:31 - error TS7006: Parameter 'user' implicitly has an 'any' type.

141           {filteredUsers.map((user, index) => {
                                  ~~~~

src/pages/admin/UsersManagePage.tsx:141:37 - error TS7006: Parameter 'index' implicitly has an 'any' type.

141           {filteredUsers.map((user, index) => {
                                        ~~~~~

src/pages/client/ApplicationsManagePage.tsx:8:86 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

8 import { applicationsAPI, jobsAPI, assignmentsAPI, usersAPI, type Application } from '../../lib/api';
                                                                                       ~~~~~~~~~~~~~~~

src/pages/client/ApplicationsManagePage.tsx:24:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

24 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/ApplicationsManagePage.tsx:110:29 - error TS7006: Parameter 'a' implicitly has an 'any' type.

110     return assignments.some(a => a.application_id === application.id);
                                ~

src/pages/client/ApplicationsManagePage.tsx:507:61 - error TS7006: Parameter 'qual' implicitly has an 'any' type.

507                             {workerInfo.qualifications.map((qual, idx) => (
                                                                ~~~~

src/pages/client/ApplicationsManagePage.tsx:507:67 - error TS7006: Parameter 'idx' implicitly has an 'any' type.

507                             {workerInfo.qualifications.map((qual, idx) => (
                                                                      ~~~

src/pages/client/ClientDashboard.tsx:7:34 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

7 import { jobsAPI, authAPI } from '../../lib/api';
                                   ~~~~~~~~~~~~~~~

src/pages/client/ClientDashboard.tsx:19:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

19 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/DeliveryManagePage.tsx:16:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

16 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/JobCreatePage.tsx:4:25 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

4 import { jobsAPI } from '../../lib/api';
                          ~~~~~~~~~~~~~~~

src/pages/client/JobCreatePage.tsx:25:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

25 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/JobsManagePage.tsx:8:86 - error TS6133: 'QRCodeResponse' is declared but its value is never read.

8 import { jobsAPI, assignmentsAPI, reviewsAPI, qrAPI, type Assignment, type Job, type QRCodeResponse } from '../../lib/api';
                                                                                       ~~~~~~~~~~~~~~

src/pages/client/JobsManagePage.tsx:8:108 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

8 import { jobsAPI, assignmentsAPI, reviewsAPI, qrAPI, type Assignment, type Job, type QRCodeResponse } from '../../lib/api';
                                                                                                             ~~~~~~~~~~~~~~~

src/pages/client/JobsManagePage.tsx:33:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

33 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/JobsManagePage.tsx:96:35 - error TS7006: Parameter 'a' implicitly has an 'any' type.

96     return allAssignments?.filter(a => a.job_id === jobId) || [];
                                     ~

src/pages/client/JobsManagePage.tsx:100:28 - error TS7006: Parameter 'r' implicitly has an 'any' type.

100     return myReviews?.some(r => r.assignment_id === assignmentId) || false;
                               ~

src/pages/client/MessagesPage.tsx:15:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

15 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:18:29 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

18 import { messagesAPI } from '../../lib/api';
                               ~~~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:19:44 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

19 import type { Conversation, Message } from '../../lib/api';
                                              ~~~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:59:33 - error TS18046: 'updatedConversations' is of type 'unknown'.

59         const newConversation = updatedConversations.find((conv: Conversation) =>
                                   ~~~~~~~~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:76:24 - error TS18046: 'conversations' is of type 'unknown'.

76     if (userIdParam && conversations.length > 0) {
                          ~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:77:36 - error TS18046: 'conversations' is of type 'unknown'.

77       const existingConversation = conversations.find((conv: Conversation) =>
                                      ~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:127:33 - error TS18046: 'conversations' is of type 'unknown'.

127   const filteredConversations = conversations.filter((conv: Conversation) =>
                                    ~~~~~~~~~~~~~

src/pages/client/PaymentsPage.tsx:15:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

15 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/PaymentsPage.tsx:16:43 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

16 import { paymentsAPI, type Payment } from '../../lib/api';
                                             ~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:7:69 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

7 import { authAPI, paymentsAPI, reviewsAPI, clientSettingsAPI } from '../../lib/api';
                                                                      ~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:9:134 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

9 import { Mail, Calendar, Shield, CreditCard, TrendingUp, Star, X, Building2, Phone, MapPin, Lock, Eye, EyeOff, Bell, FileText } from 'lucide-react';
                                                                                                                                       ~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:44:45 - error TS2339: Property 'id' does not exist on type '{}'.

44     queryKey: ['reviews', 'received', user?.id],
                                               ~~

src/pages/client/ProfilePage.tsx:45:57 - error TS2339: Property 'id' does not exist on type '{}'.

45     queryFn: () => reviewsAPI.list({ reviewee_id: user?.id }),
                                                           ~~

src/pages/client/ProfilePage.tsx:46:22 - error TS2339: Property 'id' does not exist on type '{}'.

46     enabled: !!user?.id,
                        ~~

src/pages/client/ProfilePage.tsx:50:14 - error TS7006: Parameter 'p' implicitly has an 'any' type.

50     .filter((p) => p.status === 'completed')
                ~

src/pages/client/ProfilePage.tsx:51:14 - error TS7006: Parameter 'sum' implicitly has an 'any' type.

51     .reduce((sum, p) => sum + p.amount, 0) || 0;
                ~~~

src/pages/client/ProfilePage.tsx:51:19 - error TS7006: Parameter 'p' implicitly has an 'any' type.

51     .reduce((sum, p) => sum + p.amount, 0) || 0;
                     ~

src/pages/client/ProfilePage.tsx:54:31 - error TS7006: Parameter 'sum' implicitly has an 'any' type.

54     ? receivedReviews.reduce((sum, r) => sum + r.rating, 0) / receivedReviews.length
                                 ~~~

src/pages/client/ProfilePage.tsx:54:36 - error TS7006: Parameter 'r' implicitly has an 'any' type.

54     ? receivedReviews.reduce((sum, r) => sum + r.rating, 0) / receivedReviews.length
                                      ~

src/pages/client/ProfilePage.tsx:84:29 - error TS2339: Property 'role' does not exist on type '{}'.

84     enabled: !!user && user.role === 'company',
                               ~~~~

src/pages/client/ProfilePage.tsx:90:29 - error TS2339: Property 'role' does not exist on type '{}'.

90     enabled: !!user && user.role === 'company',
                               ~~~~

src/pages/client/ProfilePage.tsx:135:25 - error TS2339: Property 'full_name' does not exist on type '{}'.

135         full_name: user.full_name || '',
                            ~~~~~~~~~

src/pages/client/ProfilePage.tsx:136:21 - error TS2339: Property 'phone' does not exist on type '{}'.

136         phone: user.phone || '',
                        ~~~~~

src/pages/client/ProfilePage.tsx:137:23 - error TS2339: Property 'address' does not exist on type '{}'.

137         address: user.address || '',
                          ~~~~~~~

src/pages/client/ProfilePage.tsx:145:34 - error TS2345: Argument of type '{ full_name: string; phone: string; address: string; }' is not assignable to parameter of type 'void'.

145     updateProfileMutation.mutate(editForm);
                                     ~~~~~~~~

src/pages/client/ProfilePage.tsx:166:35 - error TS2345: Argument of type '{ current_password: string; new_password: string; }' is not assignable to parameter of type 'void'.

166     changePasswordMutation.mutate({
                                      ~
167       current_password: passwordForm.current_password,
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
168       new_password: passwordForm.new_password,
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
169     });
    ~~~~~

src/pages/client/ProfilePage.tsx:175:47 - error TS2339: Property 'push_enabled' does not exist on type '{}'.

175         push_enabled: notificationPreferences.push_enabled,
                                                  ~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:176:48 - error TS2339: Property 'email_enabled' does not exist on type '{}'.

176         email_enabled: notificationPreferences.email_enabled,
                                                   ~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:177:51 - error TS2339: Property 'job_applications' does not exist on type '{}'.

177         job_applications: notificationPreferences.job_applications,
                                                      ~~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:178:43 - error TS2339: Property 'messages' does not exist on type '{}'.

178         messages: notificationPreferences.messages,
                                              ~~~~~~~~

src/pages/client/ProfilePage.tsx:179:55 - error TS2339: Property 'system_notifications' does not exist on type '{}'.

179         system_notifications: notificationPreferences.system_notifications,
                                                          ~~~~~~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:188:39 - error TS2339: Property 'company_name' does not exist on type '{}'.

188         company_name: invoiceSettings.company_name || '',
                                          ~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:189:42 - error TS2339: Property 'company_address' does not exist on type '{}'.

189         company_address: invoiceSettings.company_address || '',
                                             ~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:190:40 - error TS2339: Property 'company_phone' does not exist on type '{}'.

190         company_phone: invoiceSettings.company_phone || '',
                                           ~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:191:33 - error TS2339: Property 'tax_id' does not exist on type '{}'.

191         tax_id: invoiceSettings.tax_id || '',
                                    ~~~~~~

src/pages/client/ProfilePage.tsx:199:40 - error TS2345: Argument of type '{ push_enabled: boolean; email_enabled: boolean; job_applications: boolean; messages: boolean; system_notifications: boolean; }' is not assignable to parameter of type 'void'.

199     updateNotificationsMutation.mutate(notificationForm);
                                           ~~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:204:34 - error TS2345: Argument of type '{ company_name: string; company_address: string; company_phone: string; tax_id: string; }' is not assignable to parameter of type 'void'.

204     updateInvoiceMutation.mutate(invoiceForm);
                                     ~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:225:27 - error TS2339: Property 'full_name' does not exist on type '{}'.

225                     {user.full_name.charAt(0)}
                              ~~~~~~~~~

src/pages/client/ProfilePage.tsx:228:76 - error TS2339: Property 'full_name' does not exist on type '{}'.

228                     <h2 className="text-2xl font-bold text-gray-900">{user.full_name}</h2>
                                                                               ~~~~~~~~~

src/pages/client/ProfilePage.tsx:239:33 - error TS2339: Property 'email' does not exist on type '{}'.

239                     <span>{user.email}</span>
                                    ~~~~~

src/pages/client/ProfilePage.tsx:243:47 - error TS2339: Property 'created_at' does not exist on type '{}'.

243                     <span>登録日: {new Date(user.created_at).toLocaleDateString('ja-JP')}</span>
                                                  ~~~~~~~~~~

src/pages/client/ProfilePage.tsx:330:57 - error TS7006: Parameter 'review' implicitly has an 'any' type.

330                       {receivedReviews.slice(0, 5).map((review) => (
                                                            ~~~~~~

src/pages/client/QRCodeDisplayPage.tsx:5:23 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

5 import { qrAPI } from '../../lib/api';
                        ~~~~~~~~~~~~~~~

src/pages/client/QRCodeDisplayPage.tsx:8:66 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

8 import { ArrowLeft, QrCode, RefreshCw, Clock, CheckCircle } from 'lucide-react';
                                                                   ~~~~~~~~~~~~~~

src/pages/client/WorkersPage.tsx:18:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

18 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/WorkersPage.tsx:19:27 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

19 import { type User } from '../../lib/api';
                             ~~~~~~~~~~~~~~~

src/pages/jobs/JobsPage.tsx:2:35 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

2 import { jobsAPI, type Job } from '../../lib/api';
                                    ~~~~~~~~~~~~~~~

src/pages/jobs/JobsPage.tsx:78:32 - error TS7006: Parameter 'tag' implicitly has an 'any' type.

78                 {job.tags.map((tag) => (
                                  ~~~

src/pages/public/ContactPage.tsx:3:37 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

3 import { Mail, Phone, MapPin } from 'lucide-react';
                                      ~~~~~~~~~~~~~~

src/pages/public/LandingPage.tsx:2:43 - error TS6133: 'useSpring' is declared but its value is never read.

2 import { motion, useScroll, useTransform, useSpring, useInView } from 'framer-motion';
                                            ~~~~~~~~~

src/pages/public/LandingPage.tsx:17:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

17 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/public/LandingPage.tsx:97:11 - error TS2322: Type '{ animate: { scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }; }' is not assignable to type 'Variants'.
  Property 'animate' is incompatible with index signature.
    Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'Variant'.
      Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'TargetAndTransition'.
        Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type '{ transition?: Transition<any> | undefined; transitionEnd?: ResolvedValues | undefined; }'.
          Types of property 'transition' are incompatible.
            Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'Transition<any> | undefined'.
              Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
                Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'ValueAnimationTransition<any>'.
                  Types of property 'ease' are incompatible.
                    Type 'string' is not assignable to type 'Easing | Easing[] | undefined'.

97           variants={pulseGlow}
             ~~~~~~~~

  node_modules/motion-dom/dist/index.d.ts:1800:5
    1800     variants?: Variants;
             ~~~~~~~~
    The expected type comes from property 'variants' which is declared here on type 'IntrinsicAttributes & Omit<HTMLMotionProps<"div">, "ref"> & RefAttributes<HTMLDivElement>'

src/pages/public/LandingPage.tsx:102:11 - error TS2322: Type '{ animate: { scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }; }' is not assignable to type 'Variants'.
  Property 'animate' is incompatible with index signature.
    Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'Variant'.
      Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'TargetAndTransition'.
        Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type '{ transition?: Transition<any> | undefined; transitionEnd?: ResolvedValues | undefined; }'.
          Types of property 'transition' are incompatible.
            Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'Transition<any> | undefined'.
              Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
                Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'ValueAnimationTransition<any>'.
                  Types of property 'ease' are incompatible.
                    Type 'string' is not assignable to type 'Easing | Easing[] | undefined'.

102           variants={pulseGlow}
              ~~~~~~~~

  node_modules/motion-dom/dist/index.d.ts:1800:5
    1800     variants?: Variants;
             ~~~~~~~~
    The expected type comes from property 'variants' which is declared here on type 'IntrinsicAttributes & Omit<HTMLMotionProps<"div">, "ref"> & RefAttributes<HTMLDivElement>'

src/pages/public/LandingPage.tsx:120:15 - error TS2322: Type '{ initial: { scale: number; opacity: number; }; animate: { scale: number; opacity: number; transition: { type: string; damping: number; stiffness: number; }; }; }' is not assignable to type 'Variants'.
  Property 'animate' is incompatible with index signature.
    Type '{ scale: number; opacity: number; transition: { type: string; damping: number; stiffness: number; }; }' is not assignable to type 'Variant'.
      Type '{ scale: number; opacity: number; transition: { type: string; damping: number; stiffness: number; }; }' is not assignable to type 'TargetAndTransition'.
        Type '{ scale: number; opacity: number; transition: { type: string; damping: number; stiffness: number; }; }' is not assignable to type '{ transition?: Transition<any> | undefined; transitionEnd?: ResolvedValues | undefined; }'.
          Types of property 'transition' are incompatible.
            Type '{ type: string; damping: number; stiffness: number; }' is not assignable to type 'Transition<any> | undefined'.
              Type '{ type: string; damping: number; stiffness: number; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
                Type '{ type: string; damping: number; stiffness: number; }' is not assignable to type 'ValueAnimationTransition<any>'.
                  Types of property 'type' are incompatible.
                    Type 'string' is not assignable to type 'AnimationGeneratorType | undefined'.

120               variants={scaleInSpring}
                  ~~~~~~~~

  node_modules/motion-dom/dist/index.d.ts:1800:5
    1800     variants?: Variants;
             ~~~~~~~~
    The expected type comes from property 'variants' which is declared here on type 'IntrinsicAttributes & Omit<HTMLMotionProps<"div">, "ref"> & RefAttributes<HTMLDivElement>'

src/pages/public/LandingPage.tsx:181:11 - error TS2322: Type '{ animate: { y: number[]; transition: { duration: number; repeat: number; ease: string; }; }; }' is not assignable to type 'Variants'.
  Property 'animate' is incompatible with index signature.
    Type '{ y: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'Variant'.
      Type '{ y: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'TargetAndTransition'.
        Type '{ y: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type '{ transition?: Transition<any> | undefined; transitionEnd?: ResolvedValues | undefined; }'.
          Types of property 'transition' are incompatible.
            Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'Transition<any> | undefined'.
              Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
                Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'ValueAnimationTransition<any>'.
                  Types of property 'ease' are incompatible.
                    Type 'string' is not assignable to type 'Easing | Easing[] | undefined'.

181           variants={floatAnimation}
              ~~~~~~~~

  node_modules/motion-dom/dist/index.d.ts:1800:5
    1800     variants?: Variants;
             ~~~~~~~~
    The expected type comes from property 'variants' which is declared here on type 'IntrinsicAttributes & Omit<HTMLMotionProps<"div">, "ref"> & RefAttributes<HTMLDivElement>'

src/pages/shared/JobDetailPage.tsx:8:42 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

8 import { jobsAPI, applicationsAPI } from '../../lib/api';
                                           ~~~~~~~~~~~~~~~

src/pages/shared/JobDetailPage.tsx:14:3 - error TS6133: 'DollarSign' is declared but its value is never read.

14   DollarSign,
     ~~~~~~~~~~

src/pages/shared/JobDetailPage.tsx:20:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

20 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/shared/JobDetailPage.tsx:197:34 - error TS7006: Parameter 'tag' implicitly has an 'any' type.

197                   {job.tags.map((tag, index) => (
                                     ~~~

src/pages/shared/JobDetailPage.tsx:197:39 - error TS7006: Parameter 'index' implicitly has an 'any' type.

197                   {job.tags.map((tag, index) => (
                                          ~~~~~

src/pages/shared/MessagesPage.tsx:4:29 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

4 import { messagesAPI } from '../../lib/api';
                              ~~~~~~~~~~~~~~~

src/pages/shared/MessagesPage.tsx:5:44 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

5 import type { Conversation, Message } from '../../lib/api';
                                             ~~~~~~~~~~~~~~~

src/pages/shared/MessagesPage.tsx:7:54 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

7 import { Send, ArrowLeft, User, MessageCircle } from 'lucide-react';
                                                       ~~~~~~~~~~~~~~

src/pages/shared/MessagesPage.tsx:153:44 - error TS2339: Property 'length' does not exist on type '{}'.

153         ) : conversations && conversations.length > 0 ? (
                                               ~~~~~~

src/pages/shared/MessagesPage.tsx:155:28 - error TS2339: Property 'map' does not exist on type '{}'.

155             {conversations.map((conversation: Conversation) => (
                               ~~~

src/pages/shared/NotificationsPage.tsx:6:34 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { notificationsAPI } from '../../lib/api';
                                   ~~~~~~~~~~~~~~~

src/pages/shared/NotificationsPage.tsx:8:10 - error TS6133: 'MessageCircle' is declared but its value is never read.

8 import { MessageCircle, Check, Trash2, CheckCheck, AlertCircle, Info, Briefcase, DollarSign, Bell } from 'lucide-react';
           ~~~~~~~~~~~~~

src/pages/shared/NotificationsPage.tsx:8:106 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

8 import { MessageCircle, Check, Trash2, CheckCheck, AlertCircle, Info, Briefcase, DollarSign, Bell } from 'lucide-react';
                                                                                                           ~~~~~~~~~~~~~~

src/pages/shared/NotificationsPage.tsx:57:38 - error TS2339: Property 'filter' does not exist on type '{}'.

57   const unreadCount = notifications?.filter((n) => !n.is_read).length || 0;
                                        ~~~~~~

src/pages/shared/NotificationsPage.tsx:57:46 - error TS7006: Parameter 'n' implicitly has an 'any' type.

57   const unreadCount = notifications?.filter((n) => !n.is_read).length || 0;
                                                ~

src/pages/shared/NotificationsPage.tsx:90:44 - error TS2339: Property 'length' does not exist on type '{}'.

90         ) : notifications && notifications.length > 0 ? (
                                              ~~~~~~

src/pages/shared/NotificationsPage.tsx:92:28 - error TS2339: Property 'map' does not exist on type '{}'.

92             {notifications.map((notification, index) => (
                              ~~~

src/pages/shared/NotificationsPage.tsx:92:33 - error TS7006: Parameter 'notification' implicitly has an 'any' type.

92             {notifications.map((notification, index) => (
                                   ~~~~~~~~~~~~

src/pages/shared/NotificationsPage.tsx:92:47 - error TS7006: Parameter 'index' implicitly has an 'any' type.

92             {notifications.map((notification, index) => (
                                                 ~~~~~

src/pages/shared/ReviewPage.tsx:5:28 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

5 import { reviewsAPI } from '../../lib/api';
                             ~~~~~~~~~~~~~~~

src/pages/shared/ReviewPage.tsx:9:52 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

9 import { ArrowLeft, Star, Send, CheckCircle } from 'lucide-react';
                                                     ~~~~~~~~~~~~~~

src/pages/shared/SettingsPage.tsx:6:56 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

6 import { Settings, Bell, Lock, User, Mail, Save } from 'lucide-react';
                                                         ~~~~~~~~~~~~~~

src/pages/shared/WorkStyleGuidePage.tsx:17:3 - error TS6133: 'Bell' is declared but its value is never read.

17   Bell,
     ~~~~

src/pages/shared/WorkStyleGuidePage.tsx:19:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

19 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/shared/WorkStyleGuidePage.tsx:212:54 - error TS2304: Cannot find name 'MessageCircle'.

212           { label: 'メッセージ', path: '/messages', icon: MessageCircle },
                                                         ~~~~~~~~~~~~~

src/pages/worker/ApplicationsPage.tsx:8:96 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

8 import { applicationsAPI, assignmentsAPI, reviewsAPI, type Application, type Assignment } from '../../lib/api';
                                                                                                 ~~~~~~~~~~~~~~~

src/pages/worker/ApplicationsPage.tsx:10:125 - error TS6133: 'QrCode' is declared but its value is never read.

10 import { Sparkles, Zap, Flame, MessageCircle, UserCircle, Clock, CheckCircle, XCircle, AlertCircle, BookOpen, ChevronRight, QrCode, LogIn, LogOut, Star } from 'lucide-react';
                                                                                                                               ~~~~~~

src/pages/worker/ApplicationsPage.tsx:10:160 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

10 import { Sparkles, Zap, Flame, MessageCircle, UserCircle, Clock, CheckCircle, XCircle, AlertCircle, BookOpen, ChevronRight, QrCode, LogIn, LogOut, Star } from 'lucide-react';
                                                                                                                                                                  ~~~~~~~~~~~~~~

src/pages/worker/ApplicationsPage.tsx:34:46 - error TS2339: Property 'filter' does not exist on type '{}'.

34   const upcomingApplications = applications?.filter(app => {
                                                ~~~~~~

src/pages/worker/ApplicationsPage.tsx:34:53 - error TS7006: Parameter 'app' implicitly has an 'any' type.

34   const upcomingApplications = applications?.filter(app => {
                                                       ~~~

src/pages/worker/ApplicationsPage.tsx:35:37 - error TS2339: Property 'find' does not exist on type '{}'.

35     const assignment = assignments?.find(a => a.application_id === app.id);
                                       ~~~~

src/pages/worker/ApplicationsPage.tsx:35:42 - error TS7006: Parameter 'a' implicitly has an 'any' type.

35     const assignment = assignments?.find(a => a.application_id === app.id);
                                            ~

src/pages/worker/ApplicationsPage.tsx:40:42 - error TS2339: Property 'filter' does not exist on type '{}'.

40   const pastApplications = applications?.filter(app => {
                                            ~~~~~~

src/pages/worker/ApplicationsPage.tsx:40:49 - error TS7006: Parameter 'app' implicitly has an 'any' type.

40   const pastApplications = applications?.filter(app => {
                                                   ~~~

src/pages/worker/ApplicationsPage.tsx:41:37 - error TS2339: Property 'find' does not exist on type '{}'.

41     const assignment = assignments?.find(a => a.application_id === app.id);
                                       ~~~~

src/pages/worker/ApplicationsPage.tsx:41:42 - error TS7006: Parameter 'a' implicitly has an 'any' type.

41     const assignment = assignments?.find(a => a.application_id === app.id);
                                            ~

src/pages/worker/ApplicationsPage.tsx:64:25 - error TS2339: Property 'find' does not exist on type '{}'.

64     return assignments?.find(a => a.application_id === applicationId);
                           ~~~~

src/pages/worker/ApplicationsPage.tsx:64:30 - error TS7006: Parameter 'a' implicitly has an 'any' type.

64     return assignments?.find(a => a.application_id === applicationId);
                                ~

src/pages/worker/ApplicationsPage.tsx:68:28 - error TS7006: Parameter 'r' implicitly has an 'any' type.

68     return myReviews?.some(r => r.assignment_id === assignmentId) || false;
                              ~

src/pages/worker/ApplicationsPage.tsx:123:39 - error TS7006: Parameter 'application' implicitly has an 'any' type.

123             {currentApplications.map((application, index) => {
                                          ~~~~~~~~~~~

src/pages/worker/ApplicationsPage.tsx:123:52 - error TS7006: Parameter 'index' implicitly has an 'any' type.

123             {currentApplications.map((application, index) => {
                                                       ~~~~~

src/pages/worker/ApplicationsPage.tsx:129:21 - error TS6133: 'isCompleted' is declared but its value is never read.

129               const isCompleted = assignment && assignment.completed_at;
                        ~~~~~~~~~~~

src/pages/worker/JobsPage.tsx:6:60 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { jobsAPI, favoritesAPI, jobNotificationsAPI } from '../../lib/api';
                                                             ~~~~~~~~~~~~~~~

src/pages/worker/JobsPage.tsx:7:112 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

7 import { MapPin, Clock, Heart, ChevronDown, Sparkles, Zap, Flame, MessageCircle, UserCircle, MapPinIcon } from 'lucide-react';
                                                                                                                 ~~~~~~~~~~~~~~

src/pages/worker/JobsPage.tsx:93:29 - error TS2769: No overload matches this call.
  Overload 1 of 2, '(iterable?: Iterable<unknown> | null | undefined): Set<unknown>', gave the following error.
    Argument of type '{}' is not assignable to parameter of type 'Iterable<unknown>'.
      Property '[Symbol.iterator]' is missing in type '{}' but required in type 'Iterable<unknown>'.
  Overload 2 of 2, '(values?: readonly any[] | null | undefined): Set<any>', gave the following error.
    Argument of type '{}' is not assignable to parameter of type 'readonly any[]'.
      Type '{}' is missing the following properties from type 'readonly any[]': length, concat, join, slice, and 20 more.

93   const favorites = new Set(favoritesData || []);
                               ~~~~~~~~~~~~~~~~~~~

  node_modules/typescript/lib/lib.es2015.iterable.d.ts:49:5
    49     [Symbol.iterator](): Iterator<T, TReturn, TNext>;
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    '[Symbol.iterator]' is declared here.

src/pages/worker/ProfilePage.tsx:6:50 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { authAPI, paymentsAPI, reviewsAPI } from '../../lib/api';
                                                   ~~~~~~~~~~~~~~~

src/pages/worker/ProfilePage.tsx:8:102 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

8 import { Home, Search, FileText, User, Mail, Calendar, Shield, CreditCard, ExternalLink, Star } from 'lucide-react';
                                                                                                       ~~~~~~~~~~~~~~

src/pages/worker/ProfilePage.tsx:26:45 - error TS2339: Property 'id' does not exist on type '{}'.

26     queryKey: ['reviews', 'received', user?.id],
                                               ~~

src/pages/worker/ProfilePage.tsx:27:57 - error TS2339: Property 'id' does not exist on type '{}'.

27     queryFn: () => reviewsAPI.list({ reviewee_id: user?.id }),
                                                           ~~

src/pages/worker/ProfilePage.tsx:28:22 - error TS2339: Property 'id' does not exist on type '{}'.

28     enabled: !!user?.id,
                        ~~

src/pages/worker/ProfilePage.tsx:32:16 - error TS2339: Property 'email' does not exist on type '{}'.

32     if (!user?.email) return;
                  ~~~~~

src/pages/worker/ProfilePage.tsx:36:66 - error TS2339: Property 'email' does not exist on type '{}'.

36       const result = await paymentsAPI.createConnectAccount(user.email);
                                                                    ~~~~~

src/pages/worker/ProfilePage.tsx:48:14 - error TS7006: Parameter 'p' implicitly has an 'any' type.

48     .filter((p) => p.status === 'completed')
                ~

src/pages/worker/ProfilePage.tsx:49:14 - error TS7006: Parameter 'sum' implicitly has an 'any' type.

49     .reduce((sum, p) => sum + p.amount, 0) || 0;
                ~~~

src/pages/worker/ProfilePage.tsx:49:19 - error TS7006: Parameter 'p' implicitly has an 'any' type.

49     .reduce((sum, p) => sum + p.amount, 0) || 0;
                     ~

src/pages/worker/ProfilePage.tsx:52:31 - error TS7006: Parameter 'sum' implicitly has an 'any' type.

52     ? receivedReviews.reduce((sum, r) => sum + r.rating, 0) / receivedReviews.length
                                 ~~~

src/pages/worker/ProfilePage.tsx:52:36 - error TS7006: Parameter 'r' implicitly has an 'any' type.

52     ? receivedReviews.reduce((sum, r) => sum + r.rating, 0) / receivedReviews.length
                                      ~

src/pages/worker/ProfilePage.tsx:73:27 - error TS2339: Property 'full_name' does not exist on type '{}'.

73                     {user.full_name.charAt(0)}
                             ~~~~~~~~~

src/pages/worker/ProfilePage.tsx:76:76 - error TS2339: Property 'full_name' does not exist on type '{}'.

76                     <h2 className="text-2xl font-bold text-gray-900">{user.full_name}</h2>
                                                                              ~~~~~~~~~

src/pages/worker/ProfilePage.tsx:87:33 - error TS2339: Property 'email' does not exist on type '{}'.

87                     <span>{user.email}</span>
                                   ~~~~~

src/pages/worker/ProfilePage.tsx:91:47 - error TS2339: Property 'created_at' does not exist on type '{}'.

91                     <span>登録日: {new Date(user.created_at).toLocaleDateString('ja-JP')}</span>
                                                 ~~~~~~~~~~

src/pages/worker/ProfilePage.tsx:165:57 - error TS7006: Parameter 'review' implicitly has an 'any' type.

165                       {receivedReviews.slice(0, 5).map((review) => (
                                                            ~~~~~~

src/pages/worker/QRScanPage.tsx:3:36 - error TS2307: Cannot find module 'html5-qrcode' or its corresponding type declarations.

3 import { Html5QrcodeScanner } from 'html5-qrcode';
                                     ~~~~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:6:23 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { qrAPI } from '../../lib/api';
                        ~~~~~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:9:64 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

9 import { ArrowLeft, QrCode, CheckCircle, XCircle, Clock } from 'lucide-react';
                                                                 ~~~~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:17:10 - error TS6133: 'scanning' is declared but its value is never read.

17   const [scanning, setScanning] = useState(true);
            ~~~~~~~~

src/pages/worker/QRScanPage.tsx:67:8 - error TS7006: Parameter 'decodedText' implicitly has an 'any' type.

67       (decodedText) => {
          ~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:106:8 - error TS6133: 'errorMessage' is declared but its value is never read.

106       (errorMessage) => {
           ~~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:106:8 - error TS7006: Parameter 'errorMessage' implicitly has an 'any' type.

106       (errorMessage) => {
           ~~~~~~~~~~~~

src/pages/worker/WorkerDashboard.tsx:4:50 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

4 import { jobsAPI, authAPI, assignmentsAPI } from '../../lib/api';
                                                   ~~~~~~~~~~~~~~~

src/pages/worker/WorkerDashboard.tsx:5:84 - error TS6133: 'Radio' is declared but its value is never read.

5 import { Sparkles, Zap, Flame, MessageCircle, UserCircle, MapPin, BarChart3, Menu, Radio, X, Settings, LogOut, HelpCircle, RefreshCw, Package, Navigation, CheckCircle } from 'lucide-react';
                                                                                     ~~~~~

src/pages/worker/WorkerDashboard.tsx:5:175 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

5 import { Sparkles, Zap, Flame, MessageCircle, UserCircle, MapPin, BarChart3, Menu, Radio, X, Settings, LogOut, HelpCircle, RefreshCw, Package, Navigation, CheckCircle } from 'lucide-react';
                                                                                                                                                                                ~~~~~~~~~~~~~~

src/pages/worker/WorkerDashboard.tsx:18:9 - error TS6133: 'queryClient' is declared but its value is never read.

18   const queryClient = useQueryClient();
           ~~~~~~~~~~~

src/pages/worker/WorkerDashboard.tsx:334:40 - error TS7006: Parameter 'job' implicitly has an 'any' type.

334                 {jobs.slice(0, 3).map((job) => (
                                           ~~~

src/stores/authStore.ts:2:25 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

2 import { authAPI } from '../lib/api';
                          ~~~~~~~~~~~~

vite.config.ts:3:25 - error TS2307: Cannot find module 'vite-plugin-pwa' or its corresponding type declarations.

3 import { VitePWA } from 'vite-plugin-pwa'
                          ~~~~~~~~~~~~~~~~~


Found 210 errors.

root@srv1087935:/tmp/sinjapan-worknow-ver1# # VPS上で実行
cd /var/www/worknow/frontend

# node_modulesをクリーンアップ
rm -rf node_modules package-lock.json

# 依存関係を再インストール
npm install

# ビルドを実行
npm run build

# ビルドが成功したら、Express用のディレクトリとserver.jsを作成
mkdir -p dist-server
npm install express --save

# server.jsを作成
cat > dist-server/server.js << 'EOF'
const express = require('express');
const path = require('path');
const app = express();
const PORT = process.env.PORT || 20000;
const HOST = process.env.HOST || '0.0.0.0';

cd .. 上のディレクトリに戻るer running on http://${HOST}:${PORT}`);

added 323 packages, and audited 324 packages in 36s

81 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

> frontend@0.0.0 build
> tsc -b && vite build

src/components/layout/AppShell.tsx:1:10 - error TS1484: 'ReactNode' is a type and must be imported using a type-only import when 'verbatimModuleSyntax' is enabled.

1 import { ReactNode } from 'react';
           ~~~~~~~~~

src/components/layout/AppShell.tsx:20:10 - error TS2322: Type '{ children: ReactNode; initial: { opacity: number; y: number; }; animate: { opacity: number; y: number; }; exit: { opacity: number; y: number; }; transition: { duration: number; ease: string; }; className: string; }' is not assignable to type 'Omit<HTMLMotionProps<"main">, "ref">'.
  Types of property 'transition' are incompatible.
    Type '{ duration: number; ease: string; }' is not assignable to type 'Transition<any> | undefined'.
      Type '{ duration: number; ease: string; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
        Type '{ duration: number; ease: string; }' is not assignable to type 'ValueAnimationTransition<any>'.
          Types of property 'ease' are incompatible.
            Type 'string' is not assignable to type 'Easing | Easing[] | undefined'.

20         <motion.main
            ~~~~~~~~~~~

src/components/layout/RoleBottomNav.tsx:2:122 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

2 import { Sparkles, Zap, Flame, Bell, UserCircle, Briefcase, Plus, Home, MessageCircle, Users, BarChart3, Settings } from 'lucide-react';
                                                                                                                           ~~~~~~~~~~~~~~

src/components/map/OnlineWorkersMap.tsx:5:27 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

5 import type { User } from '../../lib/api';
                            ~~~~~~~~~~~~~~~

src/components/map/OnlineWorkersMap.tsx:6:23 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

6 import { Users } from 'lucide-react';
                        ~~~~~~~~~~~~~~

src/components/map/OnlineWorkersMap.tsx:104:65 - error TS7006: Parameter 'qual' implicitly has an 'any' type.

104                         {worker.qualifications.slice(0, 3).map((qual, idx) => (
                                                                    ~~~~

src/components/map/OnlineWorkersMap.tsx:104:71 - error TS7006: Parameter 'idx' implicitly has an 'any' type.

104                         {worker.qualifications.slice(0, 3).map((qual, idx) => (
                                                                          ~~~

src/components/map/WorkerMap.tsx:4:8 - error TS2307: Cannot find module 'leaflet-routing-machine' or its corresponding type declarations.

4 import 'leaflet-routing-machine';
         ~~~~~~~~~~~~~~~~~~~~~~~~~

src/components/map/WorkerMap.tsx:99:30 - error TS2339: Property 'Routing' does not exist on type 'typeof import("/var/www/worknow/frontend/node_modules/@types/leaflet/index")'.

99     const routingControl = L.Routing.control({
                                ~~~~~~~

src/components/ui/Button.tsx:1:10 - error TS1484: 'ButtonHTMLAttributes' is a type and must be imported using a type-only import when 'verbatimModuleSyntax' is enabled.

1 import { ButtonHTMLAttributes, forwardRef } from 'react';
           ~~~~~~~~~~~~~~~~~~~~

src/components/ui/Button.tsx:35:8 - error TS2322: Type '{ children: (ReactNode | Element)[]; form?: string | undefined; formAction?: string | ((formData: FormData) => void | Promise<void>) | undefined; ... 287 more ...; variants: { ...; }; }' is not assignable to type 'Omit<HTMLMotionProps<"button">, "ref">'.
  Types of property 'onDrag' are incompatible.
    Type 'DragEventHandler<HTMLButtonElement> | undefined' is not assignable to type '((event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => void) | undefined'.
      Type 'DragEventHandler<HTMLButtonElement>' is not assignable to type '(event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => void'.
        Types of parameters 'event' and 'event' are incompatible.
          Type 'MouseEvent | TouchEvent | PointerEvent' is not assignable to type 'DragEvent<HTMLButtonElement>'.
            Type 'MouseEvent' is missing the following properties from type 'DragEvent<HTMLButtonElement>': dataTransfer, nativeEvent, isDefaultPrevented, isPropagationStopped, persist

35       <motion.button
          ~~~~~~~~~~~~~

src/components/ui/Card.tsx:1:10 - error TS1484: 'HTMLAttributes' is a type and must be imported using a type-only import when 'verbatimModuleSyntax' is enabled.

1 import { HTMLAttributes, ReactNode } from 'react';
           ~~~~~~~~~~~~~~

src/components/ui/Card.tsx:1:26 - error TS1484: 'ReactNode' is a type and must be imported using a type-only import when 'verbatimModuleSyntax' is enabled.

1 import { HTMLAttributes, ReactNode } from 'react';
                           ~~~~~~~~~

src/components/ui/Card.tsx:27:6 - error TS2322: Type '{ children: ReactNode; defaultChecked?: boolean | undefined; defaultValue?: string | number | readonly string[] | undefined; suppressContentEditableWarning?: boolean | undefined; ... 275 more ...; whileHover: { ...; } | undefined; }' is not assignable to type 'Omit<HTMLMotionProps<"div">, "ref">'.
  Types of property 'onDrag' are incompatible.
    Type 'DragEventHandler<HTMLDivElement> | undefined' is not assignable to type '((event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => void) | undefined'.
      Type 'DragEventHandler<HTMLDivElement>' is not assignable to type '(event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => void'.
        Types of parameters 'event' and 'event' are incompatible.
          Type 'MouseEvent | TouchEvent | PointerEvent' is not assignable to type 'DragEvent<HTMLDivElement>'.
            Type 'MouseEvent' is missing the following properties from type 'DragEvent<HTMLDivElement>': dataTransfer, nativeEvent, isDefaultPrevented, isPropagationStopped, persist

27     <motion.div
        ~~~~~~~~~~

src/hooks/useAuthInit.ts:3:17 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

3 import api from '../lib/api';
                  ~~~~~~~~~~~~

src/pages/ActivityPage.tsx:10:8 - error TS2307: Cannot find module '@heroicons/react/24/outline' or its corresponding type declarations.

10 } from '@heroicons/react/24/outline';
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ActivityPage.tsx:11:31 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

11 import { activitiesAPI } from '../lib/api';
                                 ~~~~~~~~~~~~

src/pages/ActivityPage.tsx:16:65 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

16 import { Sparkles, Zap, Flame, MessageCircle, UserCircle } from 'lucide-react';
                                                                   ~~~~~~~~~~~~~~

src/pages/ActivityPage.tsx:87:32 - error TS7006: Parameter 'activity' implicitly has an 'any' type.

87               {activities.map((activity) => (
                                  ~~~~~~~~

src/pages/NotificationsPage.tsx:3:37 - error TS2307: Cannot find module '@heroicons/react/24/outline' or its corresponding type declarations.

3 import { BellIcon, CheckIcon } from '@heroicons/react/24/outline';
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/NotificationsPage.tsx:6:53 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

6 import { notificationsAPI, type Notification } from '../lib/api';
                                                      ~~~~~~~~~~~~

src/pages/PaymentsPage.tsx:13:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

13 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/PaymentsPage.tsx:19:8 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

19 } from '../lib/api';
          ~~~~~~~~~~~~

src/pages/PaymentsPage.tsx:20:65 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

20 import { Sparkles, Zap, Flame, MessageCircle, UserCircle } from 'lucide-react';
                                                                   ~~~~~~~~~~~~~~

src/pages/PaymentsPage.tsx:135:26 - error TS7006: Parameter 'payment' implicitly has an 'any' type.

135           {payments.map((payment) => (
                             ~~~~~~~

src/pages/PenaltiesPage.tsx:6:94 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

6 import { AlertTriangle, XCircle, Ban, Sparkles, Zap, Flame, MessageCircle, UserCircle } from 'lucide-react';
                                                                                               ~~~~~~~~~~~~~~

src/pages/PenaltiesPage.tsx:7:30 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

7 import { penaltiesAPI } from '../lib/api';
                               ~~~~~~~~~~~~

src/pages/ProfilePage.tsx:11:8 - error TS2307: Cannot find module '@heroicons/react/24/outline' or its corresponding type declarations.

11 } from '@heroicons/react/24/outline';
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:16:45 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

16 import { authAPI, filesAPI, phoneAPI } from '../lib/api';
                                               ~~~~~~~~~~~~

src/pages/ProfilePage.tsx:18:55 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

18 import { Wallet, HelpCircle, ShieldAlert, Star } from 'lucide-react';
                                                         ~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:66:35 - error TS2339: Property 'emergency_contact_name' does not exist on type 'User'.

66     emergency_contact_name: user?.emergency_contact_name || '',
                                     ~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:67:36 - error TS2339: Property 'emergency_contact_phone' does not exist on type 'User'.

67     emergency_contact_phone: user?.emergency_contact_phone || '',
                                      ~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:68:43 - error TS2339: Property 'emergency_contact_relationship' does not exist on type 'User'.

68     emergency_contact_relationship: user?.emergency_contact_relationship || '',
                                             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:69:27 - error TS2339: Property 'qualifications' does not exist on type 'User'.

69     qualifications: user?.qualifications || [],
                             ~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:151:37 - error TS2339: Property 'emergency_contact_name' does not exist on type 'User'.

151       emergency_contact_name: user?.emergency_contact_name || '',
                                        ~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:152:38 - error TS2339: Property 'emergency_contact_phone' does not exist on type 'User'.

152       emergency_contact_phone: user?.emergency_contact_phone || '',
                                         ~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:153:45 - error TS2339: Property 'emergency_contact_relationship' does not exist on type 'User'.

153       emergency_contact_relationship: user?.emergency_contact_relationship || '',
                                                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:154:29 - error TS2339: Property 'qualifications' does not exist on type 'User'.

154       qualifications: user?.qualifications || [],
                                ~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:612:63 - error TS2339: Property 'emergency_contact_name' does not exist on type 'User'.

612                           <p className="text-gray-900">{user?.emergency_contact_name || '未設定'}</p>
                                                                  ~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:629:63 - error TS2339: Property 'emergency_contact_phone' does not exist on type 'User'.

629                           <p className="text-gray-900">{user?.emergency_contact_phone || '未設定'}</p>
                                                                  ~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:646:63 - error TS2339: Property 'emergency_contact_relationship' does not exist on type 'User'.

646                           <p className="text-gray-900">{user?.emergency_contact_relationship || '未設定'}</p>
                                                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:717:33 - error TS2339: Property 'qualifications' does not exist on type 'User'.

717                         {(user?.qualifications || []).length > 0 ? (
                                    ~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:718:34 - error TS2339: Property 'qualifications' does not exist on type 'User'.

718                           (user?.qualifications || []).map((qual: string, index: number) => (
                                     ~~~~~~~~~~~~~~

src/pages/ReviewsListPage.tsx:5:22 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

5 import { Star } from 'lucide-react';
                       ~~~~~~~~~~~~~~

src/pages/ReviewsListPage.tsx:6:28 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

6 import { reviewsAPI } from '../lib/api';
                             ~~~~~~~~~~~~

src/pages/ReviewsListPage.tsx:7:65 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

7 import { Sparkles, Zap, Flame, MessageCircle, UserCircle } from 'lucide-react';
                                                                  ~~~~~~~~~~~~~~

src/pages/SupportPage.tsx:5:114 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

5 import { MessageCircle, Mail, Phone, HelpCircle, ChevronDown, ChevronUp, Sparkles, Zap, Flame, UserCircle } from 'lucide-react';
                                                                                                                   ~~~~~~~~~~~~~~

src/pages/admin/AdminDashboard.tsx:6:26 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { adminAPI } from '../../lib/api';
                           ~~~~~~~~~~~~~~~

src/pages/admin/AdminDashboard.tsx:19:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

19 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/admin/JobsManagePage.tsx:20:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

20 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:4:26 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

4 import { adminAPI } from '../../lib/api';
                           ~~~~~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:13:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

13 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:61:68 - error TS2339: Property 'total_users' does not exist on type '{}'.

61                   <div className="text-3xl font-bold mb-1">{stats?.total_users || 0}</div>
                                                                      ~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:73:68 - error TS2339: Property 'total_jobs' does not exist on type '{}'.

73                   <div className="text-3xl font-bold mb-1">{stats?.total_jobs || 0}</div>
                                                                      ~~~~~~~~~~

src/pages/admin/StatsPage.tsx:85:68 - error TS2339: Property 'total_applications' does not exist on type '{}'.

85                   <div className="text-3xl font-bold mb-1">{stats?.total_applications || 0}</div>
                                                                      ~~~~~~~~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:98:32 - error TS2339: Property 'total_revenue' does not exist on type '{}'.

98                     ¥{((stats?.total_revenue || 0) / 10000).toFixed(1)}万
                                  ~~~~~~~~~~~~~

src/pages/admin/UsersManagePage.tsx:20:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

20 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/admin/UsersManagePage.tsx:22:26 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

22 import { adminAPI } from '../../lib/api';
                            ~~~~~~~~~~~~~~~

src/pages/admin/UsersManagePage.tsx:47:26 - error TS7006: Parameter 'user' implicitly has an 'any' type.

47     return users.filter((user) => {
                            ~~~~

src/pages/admin/UsersManagePage.tsx:70:29 - error TS7006: Parameter 'u' implicitly has an 'any' type.

70     worker: allUsers.filter(u => u.role === 'worker').length,
                               ~

src/pages/admin/UsersManagePage.tsx:71:30 - error TS7006: Parameter 'u' implicitly has an 'any' type.

71     company: allUsers.filter(u => u.role === 'company').length,
                                ~

src/pages/admin/UsersManagePage.tsx:72:28 - error TS7006: Parameter 'u' implicitly has an 'any' type.

72     admin: allUsers.filter(u => u.role === 'admin').length,
                              ~

src/pages/admin/UsersManagePage.tsx:141:31 - error TS7006: Parameter 'user' implicitly has an 'any' type.

141           {filteredUsers.map((user, index) => {
                                  ~~~~

src/pages/admin/UsersManagePage.tsx:141:37 - error TS7006: Parameter 'index' implicitly has an 'any' type.

141           {filteredUsers.map((user, index) => {
                                        ~~~~~

src/pages/client/ApplicationsManagePage.tsx:8:86 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

8 import { applicationsAPI, jobsAPI, assignmentsAPI, usersAPI, type Application } from '../../lib/api';
                                                                                       ~~~~~~~~~~~~~~~

src/pages/client/ApplicationsManagePage.tsx:24:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

24 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/ApplicationsManagePage.tsx:110:29 - error TS7006: Parameter 'a' implicitly has an 'any' type.

110     return assignments.some(a => a.application_id === application.id);
                                ~

src/pages/client/ApplicationsManagePage.tsx:507:61 - error TS7006: Parameter 'qual' implicitly has an 'any' type.

507                             {workerInfo.qualifications.map((qual, idx) => (
                                                                ~~~~

src/pages/client/ApplicationsManagePage.tsx:507:67 - error TS7006: Parameter 'idx' implicitly has an 'any' type.

507                             {workerInfo.qualifications.map((qual, idx) => (
                                                                      ~~~

src/pages/client/ClientDashboard.tsx:7:34 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

7 import { jobsAPI, authAPI } from '../../lib/api';
                                   ~~~~~~~~~~~~~~~

src/pages/client/ClientDashboard.tsx:19:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

19 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/DeliveryManagePage.tsx:16:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

16 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/JobCreatePage.tsx:4:25 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

4 import { jobsAPI } from '../../lib/api';
                          ~~~~~~~~~~~~~~~

src/pages/client/JobCreatePage.tsx:25:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

25 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/JobsManagePage.tsx:8:86 - error TS6133: 'QRCodeResponse' is declared but its value is never read.

8 import { jobsAPI, assignmentsAPI, reviewsAPI, qrAPI, type Assignment, type Job, type QRCodeResponse } from '../../lib/api';
                                                                                       ~~~~~~~~~~~~~~

src/pages/client/JobsManagePage.tsx:8:108 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

8 import { jobsAPI, assignmentsAPI, reviewsAPI, qrAPI, type Assignment, type Job, type QRCodeResponse } from '../../lib/api';
                                                                                                             ~~~~~~~~~~~~~~~

src/pages/client/JobsManagePage.tsx:33:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

33 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/JobsManagePage.tsx:96:35 - error TS7006: Parameter 'a' implicitly has an 'any' type.

96     return allAssignments?.filter(a => a.job_id === jobId) || [];
                                     ~

src/pages/client/JobsManagePage.tsx:100:28 - error TS7006: Parameter 'r' implicitly has an 'any' type.

100     return myReviews?.some(r => r.assignment_id === assignmentId) || false;
                               ~

src/pages/client/MessagesPage.tsx:15:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

15 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:18:29 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

18 import { messagesAPI } from '../../lib/api';
                               ~~~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:19:44 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

19 import type { Conversation, Message } from '../../lib/api';
                                              ~~~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:59:33 - error TS18046: 'updatedConversations' is of type 'unknown'.

59         const newConversation = updatedConversations.find((conv: Conversation) =>
                                   ~~~~~~~~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:76:24 - error TS18046: 'conversations' is of type 'unknown'.

76     if (userIdParam && conversations.length > 0) {
                          ~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:77:36 - error TS18046: 'conversations' is of type 'unknown'.

77       const existingConversation = conversations.find((conv: Conversation) =>
                                      ~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:127:33 - error TS18046: 'conversations' is of type 'unknown'.

127   const filteredConversations = conversations.filter((conv: Conversation) =>
                                    ~~~~~~~~~~~~~

src/pages/client/PaymentsPage.tsx:15:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

15 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/PaymentsPage.tsx:16:43 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

16 import { paymentsAPI, type Payment } from '../../lib/api';
                                             ~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:7:69 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

7 import { authAPI, paymentsAPI, reviewsAPI, clientSettingsAPI } from '../../lib/api';
                                                                      ~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:9:134 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

9 import { Mail, Calendar, Shield, CreditCard, TrendingUp, Star, X, Building2, Phone, MapPin, Lock, Eye, EyeOff, Bell, FileText } from 'lucide-react';
                                                                                                                                       ~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:44:45 - error TS2339: Property 'id' does not exist on type '{}'.

44     queryKey: ['reviews', 'received', user?.id],
                                               ~~

src/pages/client/ProfilePage.tsx:45:57 - error TS2339: Property 'id' does not exist on type '{}'.

45     queryFn: () => reviewsAPI.list({ reviewee_id: user?.id }),
                                                           ~~

src/pages/client/ProfilePage.tsx:46:22 - error TS2339: Property 'id' does not exist on type '{}'.

46     enabled: !!user?.id,
                        ~~

src/pages/client/ProfilePage.tsx:50:14 - error TS7006: Parameter 'p' implicitly has an 'any' type.

50     .filter((p) => p.status === 'completed')
                ~

src/pages/client/ProfilePage.tsx:51:14 - error TS7006: Parameter 'sum' implicitly has an 'any' type.

51     .reduce((sum, p) => sum + p.amount, 0) || 0;
                ~~~

src/pages/client/ProfilePage.tsx:51:19 - error TS7006: Parameter 'p' implicitly has an 'any' type.

51     .reduce((sum, p) => sum + p.amount, 0) || 0;
                     ~

src/pages/client/ProfilePage.tsx:54:31 - error TS7006: Parameter 'sum' implicitly has an 'any' type.

54     ? receivedReviews.reduce((sum, r) => sum + r.rating, 0) / receivedReviews.length
                                 ~~~

src/pages/client/ProfilePage.tsx:54:36 - error TS7006: Parameter 'r' implicitly has an 'any' type.

54     ? receivedReviews.reduce((sum, r) => sum + r.rating, 0) / receivedReviews.length
                                      ~

src/pages/client/ProfilePage.tsx:84:29 - error TS2339: Property 'role' does not exist on type '{}'.

84     enabled: !!user && user.role === 'company',
                               ~~~~

src/pages/client/ProfilePage.tsx:90:29 - error TS2339: Property 'role' does not exist on type '{}'.

90     enabled: !!user && user.role === 'company',
                               ~~~~

src/pages/client/ProfilePage.tsx:135:25 - error TS2339: Property 'full_name' does not exist on type '{}'.

135         full_name: user.full_name || '',
                            ~~~~~~~~~

src/pages/client/ProfilePage.tsx:136:21 - error TS2339: Property 'phone' does not exist on type '{}'.

136         phone: user.phone || '',
                        ~~~~~

src/pages/client/ProfilePage.tsx:137:23 - error TS2339: Property 'address' does not exist on type '{}'.

137         address: user.address || '',
                          ~~~~~~~

src/pages/client/ProfilePage.tsx:145:34 - error TS2345: Argument of type '{ full_name: string; phone: string; address: string; }' is not assignable to parameter of type 'void'.

145     updateProfileMutation.mutate(editForm);
                                     ~~~~~~~~

src/pages/client/ProfilePage.tsx:166:35 - error TS2345: Argument of type '{ current_password: string; new_password: string; }' is not assignable to parameter of type 'void'.

166     changePasswordMutation.mutate({
                                      ~
167       current_password: passwordForm.current_password,
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
168       new_password: passwordForm.new_password,
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
169     });
    ~~~~~

src/pages/client/ProfilePage.tsx:175:47 - error TS2339: Property 'push_enabled' does not exist on type '{}'.

175         push_enabled: notificationPreferences.push_enabled,
                                                  ~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:176:48 - error TS2339: Property 'email_enabled' does not exist on type '{}'.

176         email_enabled: notificationPreferences.email_enabled,
                                                   ~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:177:51 - error TS2339: Property 'job_applications' does not exist on type '{}'.

177         job_applications: notificationPreferences.job_applications,
                                                      ~~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:178:43 - error TS2339: Property 'messages' does not exist on type '{}'.

178         messages: notificationPreferences.messages,
                                              ~~~~~~~~

src/pages/client/ProfilePage.tsx:179:55 - error TS2339: Property 'system_notifications' does not exist on type '{}'.

179         system_notifications: notificationPreferences.system_notifications,
                                                          ~~~~~~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:188:39 - error TS2339: Property 'company_name' does not exist on type '{}'.

188         company_name: invoiceSettings.company_name || '',
                                          ~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:189:42 - error TS2339: Property 'company_address' does not exist on type '{}'.

189         company_address: invoiceSettings.company_address || '',
                                             ~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:190:40 - error TS2339: Property 'company_phone' does not exist on type '{}'.

190         company_phone: invoiceSettings.company_phone || '',
                                           ~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:191:33 - error TS2339: Property 'tax_id' does not exist on type '{}'.

191         tax_id: invoiceSettings.tax_id || '',
                                    ~~~~~~

src/pages/client/ProfilePage.tsx:199:40 - error TS2345: Argument of type '{ push_enabled: boolean; email_enabled: boolean; job_applications: boolean; messages: boolean; system_notifications: boolean; }' is not assignable to parameter of type 'void'.

199     updateNotificationsMutation.mutate(notificationForm);
                                           ~~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:204:34 - error TS2345: Argument of type '{ company_name: string; company_address: string; company_phone: string; tax_id: string; }' is not assignable to parameter of type 'void'.

204     updateInvoiceMutation.mutate(invoiceForm);
                                     ~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:225:27 - error TS2339: Property 'full_name' does not exist on type '{}'.

225                     {user.full_name.charAt(0)}
                              ~~~~~~~~~

src/pages/client/ProfilePage.tsx:228:76 - error TS2339: Property 'full_name' does not exist on type '{}'.

228                     <h2 className="text-2xl font-bold text-gray-900">{user.full_name}</h2>
                                                                               ~~~~~~~~~

src/pages/client/ProfilePage.tsx:239:33 - error TS2339: Property 'email' does not exist on type '{}'.

239                     <span>{user.email}</span>
                                    ~~~~~

src/pages/client/ProfilePage.tsx:243:47 - error TS2339: Property 'created_at' does not exist on type '{}'.

243                     <span>登録日: {new Date(user.created_at).toLocaleDateString('ja-JP')}</span>
                                                  ~~~~~~~~~~

src/pages/client/ProfilePage.tsx:330:57 - error TS7006: Parameter 'review' implicitly has an 'any' type.

330                       {receivedReviews.slice(0, 5).map((review) => (
                                                            ~~~~~~

src/pages/client/QRCodeDisplayPage.tsx:5:23 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

5 import { qrAPI } from '../../lib/api';
                        ~~~~~~~~~~~~~~~

src/pages/client/QRCodeDisplayPage.tsx:8:66 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

8 import { ArrowLeft, QrCode, RefreshCw, Clock, CheckCircle } from 'lucide-react';
                                                                   ~~~~~~~~~~~~~~

src/pages/client/WorkersPage.tsx:18:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

18 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/WorkersPage.tsx:19:27 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

19 import { type User } from '../../lib/api';
                             ~~~~~~~~~~~~~~~

src/pages/jobs/JobsPage.tsx:2:35 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

2 import { jobsAPI, type Job } from '../../lib/api';
                                    ~~~~~~~~~~~~~~~

src/pages/jobs/JobsPage.tsx:78:32 - error TS7006: Parameter 'tag' implicitly has an 'any' type.

78                 {job.tags.map((tag) => (
                                  ~~~

src/pages/public/ContactPage.tsx:3:37 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

3 import { Mail, Phone, MapPin } from 'lucide-react';
                                      ~~~~~~~~~~~~~~

src/pages/public/LandingPage.tsx:2:43 - error TS6133: 'useSpring' is declared but its value is never read.

2 import { motion, useScroll, useTransform, useSpring, useInView } from 'framer-motion';
                                            ~~~~~~~~~

src/pages/public/LandingPage.tsx:17:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

17 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/public/LandingPage.tsx:97:11 - error TS2322: Type '{ animate: { scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }; }' is not assignable to type 'Variants'.
  Property 'animate' is incompatible with index signature.
    Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'Variant'.
      Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'TargetAndTransition'.
        Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type '{ transition?: Transition<any> | undefined; transitionEnd?: ResolvedValues | undefined; }'.
          Types of property 'transition' are incompatible.
            Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'Transition<any> | undefined'.
              Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
                Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'ValueAnimationTransition<any>'.
                  Types of property 'ease' are incompatible.
                    Type 'string' is not assignable to type 'Easing | Easing[] | undefined'.

97           variants={pulseGlow}
             ~~~~~~~~

  node_modules/motion-dom/dist/index.d.ts:1800:5
    1800     variants?: Variants;
             ~~~~~~~~
    The expected type comes from property 'variants' which is declared here on type 'IntrinsicAttributes & Omit<HTMLMotionProps<"div">, "ref"> & RefAttributes<HTMLDivElement>'

src/pages/public/LandingPage.tsx:102:11 - error TS2322: Type '{ animate: { scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }; }' is not assignable to type 'Variants'.
  Property 'animate' is incompatible with index signature.
    Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'Variant'.
      Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'TargetAndTransition'.
        Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type '{ transition?: Transition<any> | undefined; transitionEnd?: ResolvedValues | undefined; }'.
          Types of property 'transition' are incompatible.
            Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'Transition<any> | undefined'.
              Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
                Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'ValueAnimationTransition<any>'.
                  Types of property 'ease' are incompatible.
                    Type 'string' is not assignable to type 'Easing | Easing[] | undefined'.

102           variants={pulseGlow}
              ~~~~~~~~

  node_modules/motion-dom/dist/index.d.ts:1800:5
    1800     variants?: Variants;
             ~~~~~~~~
    The expected type comes from property 'variants' which is declared here on type 'IntrinsicAttributes & Omit<HTMLMotionProps<"div">, "ref"> & RefAttributes<HTMLDivElement>'

src/pages/public/LandingPage.tsx:120:15 - error TS2322: Type '{ initial: { scale: number; opacity: number; }; animate: { scale: number; opacity: number; transition: { type: string; damping: number; stiffness: number; }; }; }' is not assignable to type 'Variants'.
  Property 'animate' is incompatible with index signature.
    Type '{ scale: number; opacity: number; transition: { type: string; damping: number; stiffness: number; }; }' is not assignable to type 'Variant'.
      Type '{ scale: number; opacity: number; transition: { type: string; damping: number; stiffness: number; }; }' is not assignable to type 'TargetAndTransition'.
        Type '{ scale: number; opacity: number; transition: { type: string; damping: number; stiffness: number; }; }' is not assignable to type '{ transition?: Transition<any> | undefined; transitionEnd?: ResolvedValues | undefined; }'.
          Types of property 'transition' are incompatible.
            Type '{ type: string; damping: number; stiffness: number; }' is not assignable to type 'Transition<any> | undefined'.
              Type '{ type: string; damping: number; stiffness: number; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
                Type '{ type: string; damping: number; stiffness: number; }' is not assignable to type 'ValueAnimationTransition<any>'.
                  Types of property 'type' are incompatible.
                    Type 'string' is not assignable to type 'AnimationGeneratorType | undefined'.

120               variants={scaleInSpring}
                  ~~~~~~~~

  node_modules/motion-dom/dist/index.d.ts:1800:5
    1800     variants?: Variants;
             ~~~~~~~~
    The expected type comes from property 'variants' which is declared here on type 'IntrinsicAttributes & Omit<HTMLMotionProps<"div">, "ref"> & RefAttributes<HTMLDivElement>'

src/pages/public/LandingPage.tsx:181:11 - error TS2322: Type '{ animate: { y: number[]; transition: { duration: number; repeat: number; ease: string; }; }; }' is not assignable to type 'Variants'.
  Property 'animate' is incompatible with index signature.
    Type '{ y: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'Variant'.
      Type '{ y: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'TargetAndTransition'.
        Type '{ y: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type '{ transition?: Transition<any> | undefined; transitionEnd?: ResolvedValues | undefined; }'.
          Types of property 'transition' are incompatible.
            Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'Transition<any> | undefined'.
              Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
                Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'ValueAnimationTransition<any>'.
                  Types of property 'ease' are incompatible.
                    Type 'string' is not assignable to type 'Easing | Easing[] | undefined'.

181           variants={floatAnimation}
              ~~~~~~~~

  node_modules/motion-dom/dist/index.d.ts:1800:5
    1800     variants?: Variants;
             ~~~~~~~~
    The expected type comes from property 'variants' which is declared here on type 'IntrinsicAttributes & Omit<HTMLMotionProps<"div">, "ref"> & RefAttributes<HTMLDivElement>'

src/pages/shared/JobDetailPage.tsx:8:42 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

8 import { jobsAPI, applicationsAPI } from '../../lib/api';
                                           ~~~~~~~~~~~~~~~

src/pages/shared/JobDetailPage.tsx:14:3 - error TS6133: 'DollarSign' is declared but its value is never read.

14   DollarSign,
     ~~~~~~~~~~

src/pages/shared/JobDetailPage.tsx:20:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

20 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/shared/JobDetailPage.tsx:197:34 - error TS7006: Parameter 'tag' implicitly has an 'any' type.

197                   {job.tags.map((tag, index) => (
                                     ~~~

src/pages/shared/JobDetailPage.tsx:197:39 - error TS7006: Parameter 'index' implicitly has an 'any' type.

197                   {job.tags.map((tag, index) => (
                                          ~~~~~

src/pages/shared/MessagesPage.tsx:4:29 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

4 import { messagesAPI } from '../../lib/api';
                              ~~~~~~~~~~~~~~~

src/pages/shared/MessagesPage.tsx:5:44 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

5 import type { Conversation, Message } from '../../lib/api';
                                             ~~~~~~~~~~~~~~~

src/pages/shared/MessagesPage.tsx:7:54 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

7 import { Send, ArrowLeft, User, MessageCircle } from 'lucide-react';
                                                       ~~~~~~~~~~~~~~

src/pages/shared/MessagesPage.tsx:153:44 - error TS2339: Property 'length' does not exist on type '{}'.

153         ) : conversations && conversations.length > 0 ? (
                                               ~~~~~~

src/pages/shared/MessagesPage.tsx:155:28 - error TS2339: Property 'map' does not exist on type '{}'.

155             {conversations.map((conversation: Conversation) => (
                               ~~~

src/pages/shared/NotificationsPage.tsx:6:34 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { notificationsAPI } from '../../lib/api';
                                   ~~~~~~~~~~~~~~~

src/pages/shared/NotificationsPage.tsx:8:10 - error TS6133: 'MessageCircle' is declared but its value is never read.

8 import { MessageCircle, Check, Trash2, CheckCheck, AlertCircle, Info, Briefcase, DollarSign, Bell } from 'lucide-react';
           ~~~~~~~~~~~~~

src/pages/shared/NotificationsPage.tsx:8:106 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

8 import { MessageCircle, Check, Trash2, CheckCheck, AlertCircle, Info, Briefcase, DollarSign, Bell } from 'lucide-react';
                                                                                                           ~~~~~~~~~~~~~~

src/pages/shared/NotificationsPage.tsx:57:38 - error TS2339: Property 'filter' does not exist on type '{}'.

57   const unreadCount = notifications?.filter((n) => !n.is_read).length || 0;
                                        ~~~~~~

src/pages/shared/NotificationsPage.tsx:57:46 - error TS7006: Parameter 'n' implicitly has an 'any' type.

57   const unreadCount = notifications?.filter((n) => !n.is_read).length || 0;
                                                ~

src/pages/shared/NotificationsPage.tsx:90:44 - error TS2339: Property 'length' does not exist on type '{}'.

90         ) : notifications && notifications.length > 0 ? (
                                              ~~~~~~

src/pages/shared/NotificationsPage.tsx:92:28 - error TS2339: Property 'map' does not exist on type '{}'.

92             {notifications.map((notification, index) => (
                              ~~~

src/pages/shared/NotificationsPage.tsx:92:33 - error TS7006: Parameter 'notification' implicitly has an 'any' type.

92             {notifications.map((notification, index) => (
                                   ~~~~~~~~~~~~

src/pages/shared/NotificationsPage.tsx:92:47 - error TS7006: Parameter 'index' implicitly has an 'any' type.

92             {notifications.map((notification, index) => (
                                                 ~~~~~

src/pages/shared/ReviewPage.tsx:5:28 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

5 import { reviewsAPI } from '../../lib/api';
                             ~~~~~~~~~~~~~~~

src/pages/shared/ReviewPage.tsx:9:52 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

9 import { ArrowLeft, Star, Send, CheckCircle } from 'lucide-react';
                                                     ~~~~~~~~~~~~~~

src/pages/shared/SettingsPage.tsx:6:56 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

6 import { Settings, Bell, Lock, User, Mail, Save } from 'lucide-react';
                                                         ~~~~~~~~~~~~~~

src/pages/shared/WorkStyleGuidePage.tsx:17:3 - error TS6133: 'Bell' is declared but its value is never read.

17   Bell,
     ~~~~

src/pages/shared/WorkStyleGuidePage.tsx:19:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

19 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/shared/WorkStyleGuidePage.tsx:212:54 - error TS2304: Cannot find name 'MessageCircle'.

212           { label: 'メッセージ', path: '/messages', icon: MessageCircle },
                                                         ~~~~~~~~~~~~~

src/pages/worker/ApplicationsPage.tsx:8:96 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

8 import { applicationsAPI, assignmentsAPI, reviewsAPI, type Application, type Assignment } from '../../lib/api';
                                                                                                 ~~~~~~~~~~~~~~~

src/pages/worker/ApplicationsPage.tsx:10:125 - error TS6133: 'QrCode' is declared but its value is never read.

10 import { Sparkles, Zap, Flame, MessageCircle, UserCircle, Clock, CheckCircle, XCircle, AlertCircle, BookOpen, ChevronRight, QrCode, LogIn, LogOut, Star } from 'lucide-react';
                                                                                                                               ~~~~~~

src/pages/worker/ApplicationsPage.tsx:10:160 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

10 import { Sparkles, Zap, Flame, MessageCircle, UserCircle, Clock, CheckCircle, XCircle, AlertCircle, BookOpen, ChevronRight, QrCode, LogIn, LogOut, Star } from 'lucide-react';
                                                                                                                                                                  ~~~~~~~~~~~~~~

src/pages/worker/ApplicationsPage.tsx:34:46 - error TS2339: Property 'filter' does not exist on type '{}'.

34   const upcomingApplications = applications?.filter(app => {
                                                ~~~~~~

src/pages/worker/ApplicationsPage.tsx:34:53 - error TS7006: Parameter 'app' implicitly has an 'any' type.

34   const upcomingApplications = applications?.filter(app => {
                                                       ~~~

src/pages/worker/ApplicationsPage.tsx:35:37 - error TS2339: Property 'find' does not exist on type '{}'.

35     const assignment = assignments?.find(a => a.application_id === app.id);
                                       ~~~~

src/pages/worker/ApplicationsPage.tsx:35:42 - error TS7006: Parameter 'a' implicitly has an 'any' type.

35     const assignment = assignments?.find(a => a.application_id === app.id);
                                            ~

src/pages/worker/ApplicationsPage.tsx:40:42 - error TS2339: Property 'filter' does not exist on type '{}'.

40   const pastApplications = applications?.filter(app => {
                                            ~~~~~~

src/pages/worker/ApplicationsPage.tsx:40:49 - error TS7006: Parameter 'app' implicitly has an 'any' type.

40   const pastApplications = applications?.filter(app => {
                                                   ~~~

src/pages/worker/ApplicationsPage.tsx:41:37 - error TS2339: Property 'find' does not exist on type '{}'.

41     const assignment = assignments?.find(a => a.application_id === app.id);
                                       ~~~~

src/pages/worker/ApplicationsPage.tsx:41:42 - error TS7006: Parameter 'a' implicitly has an 'any' type.

41     const assignment = assignments?.find(a => a.application_id === app.id);
                                            ~

src/pages/worker/ApplicationsPage.tsx:64:25 - error TS2339: Property 'find' does not exist on type '{}'.

64     return assignments?.find(a => a.application_id === applicationId);
                           ~~~~

src/pages/worker/ApplicationsPage.tsx:64:30 - error TS7006: Parameter 'a' implicitly has an 'any' type.

64     return assignments?.find(a => a.application_id === applicationId);
                                ~

src/pages/worker/ApplicationsPage.tsx:68:28 - error TS7006: Parameter 'r' implicitly has an 'any' type.

68     return myReviews?.some(r => r.assignment_id === assignmentId) || false;
                              ~

src/pages/worker/ApplicationsPage.tsx:123:39 - error TS7006: Parameter 'application' implicitly has an 'any' type.

123             {currentApplications.map((application, index) => {
                                          ~~~~~~~~~~~

src/pages/worker/ApplicationsPage.tsx:123:52 - error TS7006: Parameter 'index' implicitly has an 'any' type.

123             {currentApplications.map((application, index) => {
                                                       ~~~~~

src/pages/worker/ApplicationsPage.tsx:129:21 - error TS6133: 'isCompleted' is declared but its value is never read.

129               const isCompleted = assignment && assignment.completed_at;
                        ~~~~~~~~~~~

src/pages/worker/JobsPage.tsx:6:60 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { jobsAPI, favoritesAPI, jobNotificationsAPI } from '../../lib/api';
                                                             ~~~~~~~~~~~~~~~

src/pages/worker/JobsPage.tsx:7:112 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

7 import { MapPin, Clock, Heart, ChevronDown, Sparkles, Zap, Flame, MessageCircle, UserCircle, MapPinIcon } from 'lucide-react';
                                                                                                                 ~~~~~~~~~~~~~~

src/pages/worker/JobsPage.tsx:93:29 - error TS2769: No overload matches this call.
  Overload 1 of 2, '(iterable?: Iterable<unknown> | null | undefined): Set<unknown>', gave the following error.
    Argument of type '{}' is not assignable to parameter of type 'Iterable<unknown>'.
      Property '[Symbol.iterator]' is missing in type '{}' but required in type 'Iterable<unknown>'.
  Overload 2 of 2, '(values?: readonly any[] | null | undefined): Set<any>', gave the following error.
    Argument of type '{}' is not assignable to parameter of type 'readonly any[]'.
      Type '{}' is missing the following properties from type 'readonly any[]': length, concat, join, slice, and 20 more.

93   const favorites = new Set(favoritesData || []);
                               ~~~~~~~~~~~~~~~~~~~

  node_modules/typescript/lib/lib.es2015.iterable.d.ts:49:5
    49     [Symbol.iterator](): Iterator<T, TReturn, TNext>;
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    '[Symbol.iterator]' is declared here.

src/pages/worker/ProfilePage.tsx:6:50 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { authAPI, paymentsAPI, reviewsAPI } from '../../lib/api';
                                                   ~~~~~~~~~~~~~~~

src/pages/worker/ProfilePage.tsx:8:102 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

8 import { Home, Search, FileText, User, Mail, Calendar, Shield, CreditCard, ExternalLink, Star } from 'lucide-react';
                                                                                                       ~~~~~~~~~~~~~~

src/pages/worker/ProfilePage.tsx:26:45 - error TS2339: Property 'id' does not exist on type '{}'.

26     queryKey: ['reviews', 'received', user?.id],
                                               ~~

src/pages/worker/ProfilePage.tsx:27:57 - error TS2339: Property 'id' does not exist on type '{}'.

27     queryFn: () => reviewsAPI.list({ reviewee_id: user?.id }),
                                                           ~~

src/pages/worker/ProfilePage.tsx:28:22 - error TS2339: Property 'id' does not exist on type '{}'.

28     enabled: !!user?.id,
                        ~~

src/pages/worker/ProfilePage.tsx:32:16 - error TS2339: Property 'email' does not exist on type '{}'.

32     if (!user?.email) return;
                  ~~~~~

src/pages/worker/ProfilePage.tsx:36:66 - error TS2339: Property 'email' does not exist on type '{}'.

36       const result = await paymentsAPI.createConnectAccount(user.email);
                                                                    ~~~~~

src/pages/worker/ProfilePage.tsx:48:14 - error TS7006: Parameter 'p' implicitly has an 'any' type.

48     .filter((p) => p.status === 'completed')
                ~

src/pages/worker/ProfilePage.tsx:49:14 - error TS7006: Parameter 'sum' implicitly has an 'any' type.

49     .reduce((sum, p) => sum + p.amount, 0) || 0;
                ~~~

src/pages/worker/ProfilePage.tsx:49:19 - error TS7006: Parameter 'p' implicitly has an 'any' type.

49     .reduce((sum, p) => sum + p.amount, 0) || 0;
                     ~

src/pages/worker/ProfilePage.tsx:52:31 - error TS7006: Parameter 'sum' implicitly has an 'any' type.

52     ? receivedReviews.reduce((sum, r) => sum + r.rating, 0) / receivedReviews.length
                                 ~~~

src/pages/worker/ProfilePage.tsx:52:36 - error TS7006: Parameter 'r' implicitly has an 'any' type.

52     ? receivedReviews.reduce((sum, r) => sum + r.rating, 0) / receivedReviews.length
                                      ~

src/pages/worker/ProfilePage.tsx:73:27 - error TS2339: Property 'full_name' does not exist on type '{}'.

73                     {user.full_name.charAt(0)}
                             ~~~~~~~~~

src/pages/worker/ProfilePage.tsx:76:76 - error TS2339: Property 'full_name' does not exist on type '{}'.

76                     <h2 className="text-2xl font-bold text-gray-900">{user.full_name}</h2>
                                                                              ~~~~~~~~~

src/pages/worker/ProfilePage.tsx:87:33 - error TS2339: Property 'email' does not exist on type '{}'.

87                     <span>{user.email}</span>
                                   ~~~~~

src/pages/worker/ProfilePage.tsx:91:47 - error TS2339: Property 'created_at' does not exist on type '{}'.

91                     <span>登録日: {new Date(user.created_at).toLocaleDateString('ja-JP')}</span>
                                                 ~~~~~~~~~~

src/pages/worker/ProfilePage.tsx:165:57 - error TS7006: Parameter 'review' implicitly has an 'any' type.

165                       {receivedReviews.slice(0, 5).map((review) => (
                                                            ~~~~~~

src/pages/worker/QRScanPage.tsx:3:36 - error TS2307: Cannot find module 'html5-qrcode' or its corresponding type declarations.

3 import { Html5QrcodeScanner } from 'html5-qrcode';
                                     ~~~~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:6:23 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { qrAPI } from '../../lib/api';
                        ~~~~~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:9:64 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

9 import { ArrowLeft, QrCode, CheckCircle, XCircle, Clock } from 'lucide-react';
                                                                 ~~~~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:17:10 - error TS6133: 'scanning' is declared but its value is never read.

17   const [scanning, setScanning] = useState(true);
            ~~~~~~~~

src/pages/worker/QRScanPage.tsx:67:8 - error TS7006: Parameter 'decodedText' implicitly has an 'any' type.

67       (decodedText) => {
          ~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:106:8 - error TS6133: 'errorMessage' is declared but its value is never read.

106       (errorMessage) => {
           ~~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:106:8 - error TS7006: Parameter 'errorMessage' implicitly has an 'any' type.

106       (errorMessage) => {
           ~~~~~~~~~~~~

src/pages/worker/WorkerDashboard.tsx:4:50 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

4 import { jobsAPI, authAPI, assignmentsAPI } from '../../lib/api';
                                                   ~~~~~~~~~~~~~~~

src/pages/worker/WorkerDashboard.tsx:5:84 - error TS6133: 'Radio' is declared but its value is never read.

5 import { Sparkles, Zap, Flame, MessageCircle, UserCircle, MapPin, BarChart3, Menu, Radio, X, Settings, LogOut, HelpCircle, RefreshCw, Package, Navigation, CheckCircle } from 'lucide-react';
                                                                                     ~~~~~

src/pages/worker/WorkerDashboard.tsx:5:175 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

5 import { Sparkles, Zap, Flame, MessageCircle, UserCircle, MapPin, BarChart3, Menu, Radio, X, Settings, LogOut, HelpCircle, RefreshCw, Package, Navigation, CheckCircle } from 'lucide-react';
                                                                                                                                                                                ~~~~~~~~~~~~~~

src/pages/worker/WorkerDashboard.tsx:18:9 - error TS6133: 'queryClient' is declared but its value is never read.

18   const queryClient = useQueryClient();
           ~~~~~~~~~~~

src/pages/worker/WorkerDashboard.tsx:334:40 - error TS7006: Parameter 'job' implicitly has an 'any' type.

334                 {jobs.slice(0, 3).map((job) => (
                                           ~~~

src/stores/authStore.ts:2:25 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

2 import { authAPI } from '../lib/api';
                          ~~~~~~~~~~~~

vite.config.ts:3:25 - error TS2307: Cannot find module 'vite-plugin-pwa' or its corresponding type declarations.

3 import { VitePWA } from 'vite-plugin-pwa'
                          ~~~~~~~~~~~~~~~~~


Found 210 errors.


added 61 packages, and audited 385 packages in 3s

93 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
root@srv1087935:/var/www/worknow# # /var/www/worknow/.envファイルを作成
cd /var/www/worknow
cat > .env << 'EOF'
# ========================================
# データベース設定（VPS上のローカルPostgreSQL）
# ========================================
DATABASE_URL=postgresql://worknow_user:Change_This_Password_123!@localhost:5432/worknow_production
PGHOST=localhost
PGPORT=5432
PGDATABASE=worknow_production
PGUSER=worknow_user
PGPASSWORD=Change_This_Password_123!

# ========================================
# JWT認証設定（本番用に必ず変更してください）
# ========================================
SECRET_KEY=your_super_secret_jwt_key_minimum_32_characters_change_this_immediately_12345
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ========================================
# サーバー設定
echo "✅ .envファイルが作成されました"ため）serviceaccount.com/v1/metadata/x509/
✅ .envファイルが作成されました
root@srv1087935:/var/www/worknow# # ランダムなSECRET_KEYを生成
SECRET_KEY=$(openssl rand -base64 48)
echo "新しいSECRET_KEY: $SECRET_KEY"

# .envファイルのSECRET_KEYを置き換え
sed -i "s|SECRET_KEY=.*|SECRET_KEY=$SECRET_KEY|g" /var/www/worknow/.env

echo "✅ SECRET_KEYを更新しました"
新しいSECRET_KEY: 70XgHyP9pRtJ1iSiMWrxmEjy6Mkj1RjSkgMg1k9D10EJLvj4SKtpDJF/aYsvnBfi
✅ SECRET_KEYを更新しました
root@srv1087935:/var/www/worknow# # PostgreSQLのパスワードを変更
sudo -u postgres psql << 'EOSQL'
ALTER USER worknow_user WITH PASSWORD 'YourNewStrongPassword2025!';
\q
EOSQL

# .envファイルのパスワードも更新
nano /var/www/worknow/.env
# DATABASE_URLとPGPASSWORDの2箇所を新しいパスワードに変更
ALTER ROLE
root@srv1087935:/var/www/worknow# # サービスを起動
systemctl daemon-reload
systemctl restart worknow-backend
systemctl restart worknow-frontend

# 状態を確認
systemctl status worknow-backend
systemctl status worknow-frontend

# ログを確認（エラーがないか）
journalctl -u worknow-backend -n 50
journalctl -u worknow-frontend -n 50
Failed to restart worknow-backend.service: Unit worknow-backend.service not found.
Failed to restart worknow-frontend.service: Unit worknow-frontend.service not found.
Unit worknow-backend.service could not be found.
Unit worknow-frontend.service could not be found.
-- No entries --
-- No entries --
root@srv1087935:/var/www/worknow# # 現在のディレクトリを確認
root@srv1087935:/var/www/worknow# # 現在のディレクトリを確認
pwdvar/www/worknowにいることを確認
# /var/www/worknowにいることを確認
# systemdサービスファイルをコピー
# systemdサービスファイルをコピーvice /etc/systemd/system/
cp deployment/worknow-backend.service /etc/systemd/system//
cp deployment/worknow-frontend.service /etc/systemd/system/
# ファイルが正しくコピーされたか確認
# ファイルが正しくコピーされたか確認
ls -la /etc/systemd/system/worknow-*
# systemdをリロード
# systemdをリロードload
systemctl daemon-reload
# サービスを有効化
# サービスを有効化orknow-backend
systemctl enable worknow-backendd
systemctl enable worknow-frontend
# サービスを起動
# サービスを起動worknow-backend
systemctl start worknow-backendd
systemctl start worknow-frontend
# ステータス確認
# ステータス確認 worknow-backend
systemctl status worknow-backendd
systemctl status worknow-frontend
/var/www/worknow
-rw-r--r-- 1 root root 512 Nov  9 14:22 /etc/systemd/system/worknow-backend.service
-rw-r--r-- 1 root root 436 Nov  9 14:22 /etc/systemd/system/worknow-frontend.service
Created symlink /etc/systemd/system/multi-user.target.wants/worknow-backend.service → /etc/systemd/system/worknow-backend.service.
Created symlink /etc/systemd/system/multi-user.target.wants/worknow-frontend.service → /etc/systemd/system/worknow-frontend.service.
● worknow-backend.service - Work Now Backend (FastAPI)
     Loaded: loaded (/etc/systemd/system/worknow-backend.service; enabled; pres>
     Active: active (running) since Sun 2025-11-09 14:22:36 UTC; 40ms ago
   Main PID: 157298 (gunicorn)
      Tasks: 1 (limit: 9483)
     Memory: 60.0K (peak: 764.0K)
        CPU: 4ms
     CGroup: /system.slice/worknow-backend.service
             └─157298 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>

Nov 09 14:22:36 srv1087935 systemd[1]: Started worknow-backend.service - Work N>
● worknow-frontend.service - Work Now Frontend (React + Vite)
     Loaded: loaded (/etc/systemd/system/worknow-frontend.service; enabled; pre>
     Active: activating (auto-restart) (Result: exit-code) since Sun 2025-11-09>
    Process: 157349 ExecStart=/usr/bin/node /var/www/worknow/frontend/dist-serv>
   Main PID: 157349 (code=exited, status=1/FAILURE)
        CPU: 35ms
root@srv1087935:/var/www/worknow# # フロントエンドのステータス確認（完全な出力を見る）
systemctl status worknow-frontend

# フロントエンドのログを確認
journalctl -u worknow-frontend -n 50 --no-pager

# バックエンドのログも詳細確認
journalctl -u worknow-backend -n 50 --no-pager
● worknow-frontend.service - Work Now Frontend (React + Vite)
     Loaded: loaded (/etc/systemd/system/worknow-frontend.service; enabled; pre>
     Active: activating (auto-restart) (Result: exit-code) since Sun 2025-11-09>
    Process: 157370 ExecStart=/usr/bin/node /var/www/worknow/frontend/dist-serv>
   Main PID: 157370 (code=exited, status=1/FAILURE)
        CPU: 33ms
Nov 09 14:22:57 srv1087935 node[157349]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:22:57 srv1087935 node[157349]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:22:57 srv1087935 node[157349]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:22:57 srv1087935 node[157349]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:22:57 srv1087935 node[157349]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:22:57 srv1087935 node[157349]: Node.js v20.19.5
Nov 09 14:22:57 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:22:57 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:23:07 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 3.
Nov 09 14:23:07 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:23:07 srv1087935 node[157370]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:23:07 srv1087935 node[157370]: const express = require('express');
Nov 09 14:23:07 srv1087935 node[157370]:                 ^
Nov 09 14:23:07 srv1087935 node[157370]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:23:07 srv1087935 node[157370]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:23:07 srv1087935 node[157370]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:23:07 srv1087935 node[157370]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:23:07 srv1087935 node[157370]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:23:07 srv1087935 node[157370]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:23:07 srv1087935 node[157370]: Node.js v20.19.5
Nov 09 14:23:07 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:23:07 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:23:17 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 4.
Nov 09 14:23:17 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:23:17 srv1087935 node[157393]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:23:17 srv1087935 node[157393]: const express = require('express');
Nov 09 14:23:17 srv1087935 node[157393]:                 ^
Nov 09 14:23:17 srv1087935 node[157393]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:23:17 srv1087935 node[157393]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:23:17 srv1087935 node[157393]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:23:17 srv1087935 node[157393]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:23:17 srv1087935 node[157393]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:23:17 srv1087935 node[157393]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:23:17 srv1087935 node[157393]: Node.js v20.19.5
Nov 09 14:23:17 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:23:17 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:23:27 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 5.
Nov 09 14:23:27 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:23:27 srv1087935 node[157411]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:23:27 srv1087935 node[157411]: const express = require('express');
Nov 09 14:23:27 srv1087935 node[157411]:                 ^
Nov 09 14:23:27 srv1087935 node[157411]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:23:27 srv1087935 node[157411]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:23:27 srv1087935 node[157411]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:23:27 srv1087935 node[157411]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:23:27 srv1087935 node[157411]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:23:27 srv1087935 node[157411]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:23:27 srv1087935 node[157411]: Node.js v20.19.5
Nov 09 14:23:27 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:23:27 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     stream.write(msg + self.terminator)
Nov 09 14:23:21 srv1087935 gunicorn[157405]: RuntimeError: reentrant call inside <_io.BufferedWriter name='<stderr>'>
Nov 09 14:23:21 srv1087935 gunicorn[157405]: During handling of the above exception, another exception occurred:
Nov 09 14:23:21 srv1087935 gunicorn[157405]: Traceback (most recent call last):
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/usr/lib/python3.12/logging/__init__.py", line 1163, in emit
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     stream.write(msg + self.terminator)
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/arbiter.py", line 241, in handle_chld
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self.reap_workers()
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/arbiter.py", line 553, in reap_workers
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self.log.error(msg)
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/glogging.py", line 271, in error
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self.error_log.error(msg, *args, **kwargs)
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/usr/lib/python3.12/logging/__init__.py", line 1568, in error
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self._log(ERROR, msg, args, **kwargs)
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/usr/lib/python3.12/logging/__init__.py", line 1684, in _log
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self.handle(record)
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/usr/lib/python3.12/logging/__init__.py", line 1700, in handle
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self.callHandlers(record)
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/usr/lib/python3.12/logging/__init__.py", line 1762, in callHandlers
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     hdlr.handle(record)
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/usr/lib/python3.12/logging/__init__.py", line 1028, in handle
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self.emit(record)
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/usr/lib/python3.12/logging/__init__.py", line 1168, in emit
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self.handleError(record)
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/usr/lib/python3.12/logging/__init__.py", line 1081, in handleError
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     sys.stderr.write('--- Logging error ---\n')
Nov 09 14:23:21 srv1087935 gunicorn[157405]: RuntimeError: reentrant call inside <_io.BufferedWriter name='<stderr>'>
Nov 09 14:23:21 srv1087935 gunicorn[157405]: Call stack:
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/bin/gunicorn", line 7, in <module>
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     sys.exit(run())
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/app/wsgiapp.py", line 66, in run
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     WSGIApplication("%(prog)s [OPTIONS] [APP_MODULE]", prog=prog).run()
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/app/base.py", line 235, in run
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     super().run()
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/app/base.py", line 71, in run
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     Arbiter(self).run()
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/arbiter.py", line 228, in run
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self.halt(reason=inst.reason, exit_status=inst.exit_status)
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/arbiter.py", line 341, in halt
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self.stop()
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/arbiter.py", line 395, in stop
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     time.sleep(0.1)
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/arbiter.py", line 241, in handle_chld
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self.reap_workers()
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/arbiter.py", line 553, in reap_workers
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self.log.error(msg)
Nov 09 14:23:21 srv1087935 gunicorn[157405]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/glogging.py", line 271, in error
Nov 09 14:23:21 srv1087935 gunicorn[157405]:     self.error_log.error(msg, *args, **kwargs)
Nov 09 14:23:21 srv1087935 gunicorn[157405]: Message: 'Worker (pid:157408) was sent SIGTERM!'
Nov 09 14:23:21 srv1087935 gunicorn[157405]: Arguments: ()
root@srv1087935:/var/www/worknow# # フロントエンドのログを詳細確認
journalctl -u worknow-frontend -n 100 --no-pager

# dist-serverディレクトリとserver.jsが存在するか確認
ls -la /var/www/worknow/frontend/dist-server/
cat /var/www/worknow/frontend/dist-server/server.js

# distディレクトリが存在するか確認
ls -la /var/www/worknow/frontend/dist/
Nov 09 14:22:36 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:22:36 srv1087935 node[157301]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:22:36 srv1087935 node[157301]: const express = require('express');
Nov 09 14:22:36 srv1087935 node[157301]:                 ^
Nov 09 14:22:36 srv1087935 node[157301]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:22:36 srv1087935 node[157301]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:22:36 srv1087935 node[157301]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:22:36 srv1087935 node[157301]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:22:36 srv1087935 node[157301]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:22:36 srv1087935 node[157301]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:22:36 srv1087935 node[157301]: Node.js v20.19.5
Nov 09 14:22:36 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:22:36 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:22:46 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 1.
Nov 09 14:22:46 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:22:46 srv1087935 node[157330]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:22:46 srv1087935 node[157330]: const express = require('express');
Nov 09 14:22:46 srv1087935 node[157330]:                 ^
Nov 09 14:22:46 srv1087935 node[157330]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:22:46 srv1087935 node[157330]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:22:46 srv1087935 node[157330]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:22:46 srv1087935 node[157330]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:22:46 srv1087935 node[157330]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:22:46 srv1087935 node[157330]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:22:46 srv1087935 node[157330]: Node.js v20.19.5
Nov 09 14:22:46 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:22:46 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:22:57 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 2.
Nov 09 14:22:57 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:22:57 srv1087935 node[157349]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:22:57 srv1087935 node[157349]: const express = require('express');
Nov 09 14:22:57 srv1087935 node[157349]:                 ^
Nov 09 14:22:57 srv1087935 node[157349]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:22:57 srv1087935 node[157349]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:22:57 srv1087935 node[157349]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:22:57 srv1087935 node[157349]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:22:57 srv1087935 node[157349]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:22:57 srv1087935 node[157349]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:22:57 srv1087935 node[157349]: Node.js v20.19.5
Nov 09 14:22:57 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:22:57 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:23:07 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 3.
Nov 09 14:23:07 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:23:07 srv1087935 node[157370]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:23:07 srv1087935 node[157370]: const express = require('express');
Nov 09 14:23:07 srv1087935 node[157370]:                 ^
Nov 09 14:23:07 srv1087935 node[157370]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:23:07 srv1087935 node[157370]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:23:07 srv1087935 node[157370]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:23:07 srv1087935 node[157370]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:23:07 srv1087935 node[157370]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:23:07 srv1087935 node[157370]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:23:07 srv1087935 node[157370]: Node.js v20.19.5
Nov 09 14:23:07 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:23:07 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:23:17 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 4.
Nov 09 14:23:17 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:23:17 srv1087935 node[157393]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:23:17 srv1087935 node[157393]: const express = require('express');
Nov 09 14:23:17 srv1087935 node[157393]:                 ^
Nov 09 14:23:17 srv1087935 node[157393]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:23:17 srv1087935 node[157393]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:23:17 srv1087935 node[157393]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:23:17 srv1087935 node[157393]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:23:17 srv1087935 node[157393]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:23:17 srv1087935 node[157393]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:23:17 srv1087935 node[157393]: Node.js v20.19.5
Nov 09 14:23:17 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:23:17 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:23:27 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 5.
Nov 09 14:23:27 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:23:27 srv1087935 node[157411]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:23:27 srv1087935 node[157411]: const express = require('express');
Nov 09 14:23:27 srv1087935 node[157411]:                 ^
Nov 09 14:23:27 srv1087935 node[157411]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:23:27 srv1087935 node[157411]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:23:27 srv1087935 node[157411]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:23:27 srv1087935 node[157411]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:23:27 srv1087935 node[157411]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:23:27 srv1087935 node[157411]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:23:27 srv1087935 node[157411]: Node.js v20.19.5
Nov 09 14:23:27 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:23:27 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:23:38 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 6.
Nov 09 14:23:38 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:23:38 srv1087935 node[157426]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:23:38 srv1087935 node[157426]: const express = require('express');
Nov 09 14:23:38 srv1087935 node[157426]:                 ^
Nov 09 14:23:38 srv1087935 node[157426]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:23:38 srv1087935 node[157426]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:23:38 srv1087935 node[157426]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:23:38 srv1087935 node[157426]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:23:38 srv1087935 node[157426]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:23:38 srv1087935 node[157426]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:23:38 srv1087935 node[157426]: Node.js v20.19.5
Nov 09 14:23:38 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:23:38 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
total 12
drwxr-xr-x 2 root root 4096 Nov  9 14:21 .
drwxr-xr-x 6 root root 4096 Nov  9 14:21 ..
-rw-r--r-- 1 root root  430 Nov  9 14:21 server.js
const express = require('express');
const path = require('path');
const app = express();
const PORT = process.env.PORT || 20000;
const HOST = process.env.HOST || '0.0.0.0';

app.use(express.static(path.join(__dirname, '../dist')));

app.get('*', (req, res) => {
  res.sendFile(path.join(__dirname, '../dist/index.html'));
});

app.listen(PORT, HOST, () => {
  console.log(`Frontend server running on http://${HOST}:${PORT}`);
});
ls: cannot access '/var/www/worknow/frontend/dist/': No such file or directory
root@srv1087935:/var/www/worknow# cd /var/www/worknow/frontend

# distディレクトリがあるか確認、なければビルド
if [ ! -d "dist" ]; then
    echo "ビルド中..."
    npm install
    npm run build
fi

# dist-serverディレクトリを作成
mkdir -p dist-server

# expressをインストール
npm install express --save

# server.jsを作成
cat > dist-server/server.js << 'EOF'
const express = require('express');
const path = require('path');
const app = express();
const PORT = process.env.PORT || 20000;
const HOST = process.env.HOST || '0.0.0.0';

systemctl status worknow-frontenddw/worknowttp://${HOST}:${PORT}`);
ビルド中...

up to date, audited 385 packages in 821ms

93 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

> frontend@0.0.0 build
> tsc -b && vite build

src/components/layout/AppShell.tsx:1:10 - error TS1484: 'ReactNode' is a type and must be imported using a type-only import when 'verbatimModuleSyntax' is enabled.

1 import { ReactNode } from 'react';
           ~~~~~~~~~

src/components/layout/AppShell.tsx:20:10 - error TS2322: Type '{ children: ReactNode; initial: { opacity: number; y: number; }; animate: { opacity: number; y: number; }; exit: { opacity: number; y: number; }; transition: { duration: number; ease: string; }; className: string; }' is not assignable to type 'Omit<HTMLMotionProps<"main">, "ref">'.
  Types of property 'transition' are incompatible.
    Type '{ duration: number; ease: string; }' is not assignable to type 'Transition<any> | undefined'.
      Type '{ duration: number; ease: string; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
        Type '{ duration: number; ease: string; }' is not assignable to type 'ValueAnimationTransition<any>'.
          Types of property 'ease' are incompatible.
            Type 'string' is not assignable to type 'Easing | Easing[] | undefined'.

20         <motion.main
            ~~~~~~~~~~~

src/components/layout/RoleBottomNav.tsx:2:122 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

2 import { Sparkles, Zap, Flame, Bell, UserCircle, Briefcase, Plus, Home, MessageCircle, Users, BarChart3, Settings } from 'lucide-react';
                                                                                                                           ~~~~~~~~~~~~~~

src/components/map/OnlineWorkersMap.tsx:5:27 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

5 import type { User } from '../../lib/api';
                            ~~~~~~~~~~~~~~~

src/components/map/OnlineWorkersMap.tsx:6:23 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

6 import { Users } from 'lucide-react';
                        ~~~~~~~~~~~~~~

src/components/map/OnlineWorkersMap.tsx:104:65 - error TS7006: Parameter 'qual' implicitly has an 'any' type.

104                         {worker.qualifications.slice(0, 3).map((qual, idx) => (
                                                                    ~~~~

src/components/map/OnlineWorkersMap.tsx:104:71 - error TS7006: Parameter 'idx' implicitly has an 'any' type.

104                         {worker.qualifications.slice(0, 3).map((qual, idx) => (
                                                                          ~~~

src/components/map/WorkerMap.tsx:4:8 - error TS2307: Cannot find module 'leaflet-routing-machine' or its corresponding type declarations.

4 import 'leaflet-routing-machine';
         ~~~~~~~~~~~~~~~~~~~~~~~~~

src/components/map/WorkerMap.tsx:99:30 - error TS2339: Property 'Routing' does not exist on type 'typeof import("/var/www/worknow/frontend/node_modules/@types/leaflet/index")'.

99     const routingControl = L.Routing.control({
                                ~~~~~~~

src/components/ui/Button.tsx:1:10 - error TS1484: 'ButtonHTMLAttributes' is a type and must be imported using a type-only import when 'verbatimModuleSyntax' is enabled.

1 import { ButtonHTMLAttributes, forwardRef } from 'react';
           ~~~~~~~~~~~~~~~~~~~~

src/components/ui/Button.tsx:35:8 - error TS2322: Type '{ children: (ReactNode | Element)[]; form?: string | undefined; formAction?: string | ((formData: FormData) => void | Promise<void>) | undefined; ... 287 more ...; variants: { ...; }; }' is not assignable to type 'Omit<HTMLMotionProps<"button">, "ref">'.
  Types of property 'onDrag' are incompatible.
    Type 'DragEventHandler<HTMLButtonElement> | undefined' is not assignable to type '((event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => void) | undefined'.
      Type 'DragEventHandler<HTMLButtonElement>' is not assignable to type '(event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => void'.
        Types of parameters 'event' and 'event' are incompatible.
          Type 'MouseEvent | TouchEvent | PointerEvent' is not assignable to type 'DragEvent<HTMLButtonElement>'.
            Type 'MouseEvent' is missing the following properties from type 'DragEvent<HTMLButtonElement>': dataTransfer, nativeEvent, isDefaultPrevented, isPropagationStopped, persist

35       <motion.button
          ~~~~~~~~~~~~~

src/components/ui/Card.tsx:1:10 - error TS1484: 'HTMLAttributes' is a type and must be imported using a type-only import when 'verbatimModuleSyntax' is enabled.

1 import { HTMLAttributes, ReactNode } from 'react';
           ~~~~~~~~~~~~~~

src/components/ui/Card.tsx:1:26 - error TS1484: 'ReactNode' is a type and must be imported using a type-only import when 'verbatimModuleSyntax' is enabled.

1 import { HTMLAttributes, ReactNode } from 'react';
                           ~~~~~~~~~

src/components/ui/Card.tsx:27:6 - error TS2322: Type '{ children: ReactNode; defaultChecked?: boolean | undefined; defaultValue?: string | number | readonly string[] | undefined; suppressContentEditableWarning?: boolean | undefined; ... 275 more ...; whileHover: { ...; } | undefined; }' is not assignable to type 'Omit<HTMLMotionProps<"div">, "ref">'.
  Types of property 'onDrag' are incompatible.
    Type 'DragEventHandler<HTMLDivElement> | undefined' is not assignable to type '((event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => void) | undefined'.
      Type 'DragEventHandler<HTMLDivElement>' is not assignable to type '(event: MouseEvent | TouchEvent | PointerEvent, info: PanInfo) => void'.
        Types of parameters 'event' and 'event' are incompatible.
          Type 'MouseEvent | TouchEvent | PointerEvent' is not assignable to type 'DragEvent<HTMLDivElement>'.
            Type 'MouseEvent' is missing the following properties from type 'DragEvent<HTMLDivElement>': dataTransfer, nativeEvent, isDefaultPrevented, isPropagationStopped, persist

27     <motion.div
        ~~~~~~~~~~

src/hooks/useAuthInit.ts:3:17 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

3 import api from '../lib/api';
                  ~~~~~~~~~~~~

src/pages/ActivityPage.tsx:10:8 - error TS2307: Cannot find module '@heroicons/react/24/outline' or its corresponding type declarations.

10 } from '@heroicons/react/24/outline';
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ActivityPage.tsx:11:31 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

11 import { activitiesAPI } from '../lib/api';
                                 ~~~~~~~~~~~~

src/pages/ActivityPage.tsx:16:65 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

16 import { Sparkles, Zap, Flame, MessageCircle, UserCircle } from 'lucide-react';
                                                                   ~~~~~~~~~~~~~~

src/pages/ActivityPage.tsx:87:32 - error TS7006: Parameter 'activity' implicitly has an 'any' type.

87               {activities.map((activity) => (
                                  ~~~~~~~~

src/pages/NotificationsPage.tsx:3:37 - error TS2307: Cannot find module '@heroicons/react/24/outline' or its corresponding type declarations.

3 import { BellIcon, CheckIcon } from '@heroicons/react/24/outline';
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/NotificationsPage.tsx:6:53 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

6 import { notificationsAPI, type Notification } from '../lib/api';
                                                      ~~~~~~~~~~~~

src/pages/PaymentsPage.tsx:13:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

13 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/PaymentsPage.tsx:19:8 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

19 } from '../lib/api';
          ~~~~~~~~~~~~

src/pages/PaymentsPage.tsx:20:65 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

20 import { Sparkles, Zap, Flame, MessageCircle, UserCircle } from 'lucide-react';
                                                                   ~~~~~~~~~~~~~~

src/pages/PaymentsPage.tsx:135:26 - error TS7006: Parameter 'payment' implicitly has an 'any' type.

135           {payments.map((payment) => (
                             ~~~~~~~

src/pages/PenaltiesPage.tsx:6:94 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

6 import { AlertTriangle, XCircle, Ban, Sparkles, Zap, Flame, MessageCircle, UserCircle } from 'lucide-react';
                                                                                               ~~~~~~~~~~~~~~

src/pages/PenaltiesPage.tsx:7:30 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

7 import { penaltiesAPI } from '../lib/api';
                               ~~~~~~~~~~~~

src/pages/ProfilePage.tsx:11:8 - error TS2307: Cannot find module '@heroicons/react/24/outline' or its corresponding type declarations.

11 } from '@heroicons/react/24/outline';
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:16:45 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

16 import { authAPI, filesAPI, phoneAPI } from '../lib/api';
                                               ~~~~~~~~~~~~

src/pages/ProfilePage.tsx:18:55 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

18 import { Wallet, HelpCircle, ShieldAlert, Star } from 'lucide-react';
                                                         ~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:66:35 - error TS2339: Property 'emergency_contact_name' does not exist on type 'User'.

66     emergency_contact_name: user?.emergency_contact_name || '',
                                     ~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:67:36 - error TS2339: Property 'emergency_contact_phone' does not exist on type 'User'.

67     emergency_contact_phone: user?.emergency_contact_phone || '',
                                      ~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:68:43 - error TS2339: Property 'emergency_contact_relationship' does not exist on type 'User'.

68     emergency_contact_relationship: user?.emergency_contact_relationship || '',
                                             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:69:27 - error TS2339: Property 'qualifications' does not exist on type 'User'.

69     qualifications: user?.qualifications || [],
                             ~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:151:37 - error TS2339: Property 'emergency_contact_name' does not exist on type 'User'.

151       emergency_contact_name: user?.emergency_contact_name || '',
                                        ~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:152:38 - error TS2339: Property 'emergency_contact_phone' does not exist on type 'User'.

152       emergency_contact_phone: user?.emergency_contact_phone || '',
                                         ~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:153:45 - error TS2339: Property 'emergency_contact_relationship' does not exist on type 'User'.

153       emergency_contact_relationship: user?.emergency_contact_relationship || '',
                                                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:154:29 - error TS2339: Property 'qualifications' does not exist on type 'User'.

154       qualifications: user?.qualifications || [],
                                ~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:612:63 - error TS2339: Property 'emergency_contact_name' does not exist on type 'User'.

612                           <p className="text-gray-900">{user?.emergency_contact_name || '未設定'}</p>
                                                                  ~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:629:63 - error TS2339: Property 'emergency_contact_phone' does not exist on type 'User'.

629                           <p className="text-gray-900">{user?.emergency_contact_phone || '未設定'}</p>
                                                                  ~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:646:63 - error TS2339: Property 'emergency_contact_relationship' does not exist on type 'User'.

646                           <p className="text-gray-900">{user?.emergency_contact_relationship || '未設定'}</p>
                                                                  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:717:33 - error TS2339: Property 'qualifications' does not exist on type 'User'.

717                         {(user?.qualifications || []).length > 0 ? (
                                    ~~~~~~~~~~~~~~

src/pages/ProfilePage.tsx:718:34 - error TS2339: Property 'qualifications' does not exist on type 'User'.

718                           (user?.qualifications || []).map((qual: string, index: number) => (
                                     ~~~~~~~~~~~~~~

src/pages/ReviewsListPage.tsx:5:22 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

5 import { Star } from 'lucide-react';
                       ~~~~~~~~~~~~~~

src/pages/ReviewsListPage.tsx:6:28 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

6 import { reviewsAPI } from '../lib/api';
                             ~~~~~~~~~~~~

src/pages/ReviewsListPage.tsx:7:65 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

7 import { Sparkles, Zap, Flame, MessageCircle, UserCircle } from 'lucide-react';
                                                                  ~~~~~~~~~~~~~~

src/pages/SupportPage.tsx:5:114 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

5 import { MessageCircle, Mail, Phone, HelpCircle, ChevronDown, ChevronUp, Sparkles, Zap, Flame, UserCircle } from 'lucide-react';
                                                                                                                   ~~~~~~~~~~~~~~

src/pages/admin/AdminDashboard.tsx:6:26 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { adminAPI } from '../../lib/api';
                           ~~~~~~~~~~~~~~~

src/pages/admin/AdminDashboard.tsx:19:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

19 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/admin/JobsManagePage.tsx:20:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

20 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:4:26 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

4 import { adminAPI } from '../../lib/api';
                           ~~~~~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:13:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

13 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:61:68 - error TS2339: Property 'total_users' does not exist on type '{}'.

61                   <div className="text-3xl font-bold mb-1">{stats?.total_users || 0}</div>
                                                                      ~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:73:68 - error TS2339: Property 'total_jobs' does not exist on type '{}'.

73                   <div className="text-3xl font-bold mb-1">{stats?.total_jobs || 0}</div>
                                                                      ~~~~~~~~~~

src/pages/admin/StatsPage.tsx:85:68 - error TS2339: Property 'total_applications' does not exist on type '{}'.

85                   <div className="text-3xl font-bold mb-1">{stats?.total_applications || 0}</div>
                                                                      ~~~~~~~~~~~~~~~~~~

src/pages/admin/StatsPage.tsx:98:32 - error TS2339: Property 'total_revenue' does not exist on type '{}'.

98                     ¥{((stats?.total_revenue || 0) / 10000).toFixed(1)}万
                                  ~~~~~~~~~~~~~

src/pages/admin/UsersManagePage.tsx:20:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

20 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/admin/UsersManagePage.tsx:22:26 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

22 import { adminAPI } from '../../lib/api';
                            ~~~~~~~~~~~~~~~

src/pages/admin/UsersManagePage.tsx:47:26 - error TS7006: Parameter 'user' implicitly has an 'any' type.

47     return users.filter((user) => {
                            ~~~~

src/pages/admin/UsersManagePage.tsx:70:29 - error TS7006: Parameter 'u' implicitly has an 'any' type.

70     worker: allUsers.filter(u => u.role === 'worker').length,
                               ~

src/pages/admin/UsersManagePage.tsx:71:30 - error TS7006: Parameter 'u' implicitly has an 'any' type.

71     company: allUsers.filter(u => u.role === 'company').length,
                                ~

src/pages/admin/UsersManagePage.tsx:72:28 - error TS7006: Parameter 'u' implicitly has an 'any' type.

72     admin: allUsers.filter(u => u.role === 'admin').length,
                              ~

src/pages/admin/UsersManagePage.tsx:141:31 - error TS7006: Parameter 'user' implicitly has an 'any' type.

141           {filteredUsers.map((user, index) => {
                                  ~~~~

src/pages/admin/UsersManagePage.tsx:141:37 - error TS7006: Parameter 'index' implicitly has an 'any' type.

141           {filteredUsers.map((user, index) => {
                                        ~~~~~

src/pages/client/ApplicationsManagePage.tsx:8:86 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

8 import { applicationsAPI, jobsAPI, assignmentsAPI, usersAPI, type Application } from '../../lib/api';
                                                                                       ~~~~~~~~~~~~~~~

src/pages/client/ApplicationsManagePage.tsx:24:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

24 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/ApplicationsManagePage.tsx:110:29 - error TS7006: Parameter 'a' implicitly has an 'any' type.

110     return assignments.some(a => a.application_id === application.id);
                                ~

src/pages/client/ApplicationsManagePage.tsx:507:61 - error TS7006: Parameter 'qual' implicitly has an 'any' type.

507                             {workerInfo.qualifications.map((qual, idx) => (
                                                                ~~~~

src/pages/client/ApplicationsManagePage.tsx:507:67 - error TS7006: Parameter 'idx' implicitly has an 'any' type.

507                             {workerInfo.qualifications.map((qual, idx) => (
                                                                      ~~~

src/pages/client/ClientDashboard.tsx:7:34 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

7 import { jobsAPI, authAPI } from '../../lib/api';
                                   ~~~~~~~~~~~~~~~

src/pages/client/ClientDashboard.tsx:19:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

19 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/DeliveryManagePage.tsx:16:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

16 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/JobCreatePage.tsx:4:25 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

4 import { jobsAPI } from '../../lib/api';
                          ~~~~~~~~~~~~~~~

src/pages/client/JobCreatePage.tsx:25:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

25 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/JobsManagePage.tsx:8:86 - error TS6133: 'QRCodeResponse' is declared but its value is never read.

8 import { jobsAPI, assignmentsAPI, reviewsAPI, qrAPI, type Assignment, type Job, type QRCodeResponse } from '../../lib/api';
                                                                                       ~~~~~~~~~~~~~~

src/pages/client/JobsManagePage.tsx:8:108 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

8 import { jobsAPI, assignmentsAPI, reviewsAPI, qrAPI, type Assignment, type Job, type QRCodeResponse } from '../../lib/api';
                                                                                                             ~~~~~~~~~~~~~~~

src/pages/client/JobsManagePage.tsx:33:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

33 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/JobsManagePage.tsx:96:35 - error TS7006: Parameter 'a' implicitly has an 'any' type.

96     return allAssignments?.filter(a => a.job_id === jobId) || [];
                                     ~

src/pages/client/JobsManagePage.tsx:100:28 - error TS7006: Parameter 'r' implicitly has an 'any' type.

100     return myReviews?.some(r => r.assignment_id === assignmentId) || false;
                               ~

src/pages/client/MessagesPage.tsx:15:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

15 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:18:29 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

18 import { messagesAPI } from '../../lib/api';
                               ~~~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:19:44 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

19 import type { Conversation, Message } from '../../lib/api';
                                              ~~~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:59:33 - error TS18046: 'updatedConversations' is of type 'unknown'.

59         const newConversation = updatedConversations.find((conv: Conversation) =>
                                   ~~~~~~~~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:76:24 - error TS18046: 'conversations' is of type 'unknown'.

76     if (userIdParam && conversations.length > 0) {
                          ~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:77:36 - error TS18046: 'conversations' is of type 'unknown'.

77       const existingConversation = conversations.find((conv: Conversation) =>
                                      ~~~~~~~~~~~~~

src/pages/client/MessagesPage.tsx:127:33 - error TS18046: 'conversations' is of type 'unknown'.

127   const filteredConversations = conversations.filter((conv: Conversation) =>
                                    ~~~~~~~~~~~~~

src/pages/client/PaymentsPage.tsx:15:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

15 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/PaymentsPage.tsx:16:43 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

16 import { paymentsAPI, type Payment } from '../../lib/api';
                                             ~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:7:69 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

7 import { authAPI, paymentsAPI, reviewsAPI, clientSettingsAPI } from '../../lib/api';
                                                                      ~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:9:134 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

9 import { Mail, Calendar, Shield, CreditCard, TrendingUp, Star, X, Building2, Phone, MapPin, Lock, Eye, EyeOff, Bell, FileText } from 'lucide-react';
                                                                                                                                       ~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:44:45 - error TS2339: Property 'id' does not exist on type '{}'.

44     queryKey: ['reviews', 'received', user?.id],
                                               ~~

src/pages/client/ProfilePage.tsx:45:57 - error TS2339: Property 'id' does not exist on type '{}'.

45     queryFn: () => reviewsAPI.list({ reviewee_id: user?.id }),
                                                           ~~

src/pages/client/ProfilePage.tsx:46:22 - error TS2339: Property 'id' does not exist on type '{}'.

46     enabled: !!user?.id,
                        ~~

src/pages/client/ProfilePage.tsx:50:14 - error TS7006: Parameter 'p' implicitly has an 'any' type.

50     .filter((p) => p.status === 'completed')
                ~

src/pages/client/ProfilePage.tsx:51:14 - error TS7006: Parameter 'sum' implicitly has an 'any' type.

51     .reduce((sum, p) => sum + p.amount, 0) || 0;
                ~~~

src/pages/client/ProfilePage.tsx:51:19 - error TS7006: Parameter 'p' implicitly has an 'any' type.

51     .reduce((sum, p) => sum + p.amount, 0) || 0;
                     ~

src/pages/client/ProfilePage.tsx:54:31 - error TS7006: Parameter 'sum' implicitly has an 'any' type.

54     ? receivedReviews.reduce((sum, r) => sum + r.rating, 0) / receivedReviews.length
                                 ~~~

src/pages/client/ProfilePage.tsx:54:36 - error TS7006: Parameter 'r' implicitly has an 'any' type.

54     ? receivedReviews.reduce((sum, r) => sum + r.rating, 0) / receivedReviews.length
                                      ~

src/pages/client/ProfilePage.tsx:84:29 - error TS2339: Property 'role' does not exist on type '{}'.

84     enabled: !!user && user.role === 'company',
                               ~~~~

src/pages/client/ProfilePage.tsx:90:29 - error TS2339: Property 'role' does not exist on type '{}'.

90     enabled: !!user && user.role === 'company',
                               ~~~~

src/pages/client/ProfilePage.tsx:135:25 - error TS2339: Property 'full_name' does not exist on type '{}'.

135         full_name: user.full_name || '',
                            ~~~~~~~~~

src/pages/client/ProfilePage.tsx:136:21 - error TS2339: Property 'phone' does not exist on type '{}'.

136         phone: user.phone || '',
                        ~~~~~

src/pages/client/ProfilePage.tsx:137:23 - error TS2339: Property 'address' does not exist on type '{}'.

137         address: user.address || '',
                          ~~~~~~~

src/pages/client/ProfilePage.tsx:145:34 - error TS2345: Argument of type '{ full_name: string; phone: string; address: string; }' is not assignable to parameter of type 'void'.

145     updateProfileMutation.mutate(editForm);
                                     ~~~~~~~~

src/pages/client/ProfilePage.tsx:166:35 - error TS2345: Argument of type '{ current_password: string; new_password: string; }' is not assignable to parameter of type 'void'.

166     changePasswordMutation.mutate({
                                      ~
167       current_password: passwordForm.current_password,
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
168       new_password: passwordForm.new_password,
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
169     });
    ~~~~~

src/pages/client/ProfilePage.tsx:175:47 - error TS2339: Property 'push_enabled' does not exist on type '{}'.

175         push_enabled: notificationPreferences.push_enabled,
                                                  ~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:176:48 - error TS2339: Property 'email_enabled' does not exist on type '{}'.

176         email_enabled: notificationPreferences.email_enabled,
                                                   ~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:177:51 - error TS2339: Property 'job_applications' does not exist on type '{}'.

177         job_applications: notificationPreferences.job_applications,
                                                      ~~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:178:43 - error TS2339: Property 'messages' does not exist on type '{}'.

178         messages: notificationPreferences.messages,
                                              ~~~~~~~~

src/pages/client/ProfilePage.tsx:179:55 - error TS2339: Property 'system_notifications' does not exist on type '{}'.

179         system_notifications: notificationPreferences.system_notifications,
                                                          ~~~~~~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:188:39 - error TS2339: Property 'company_name' does not exist on type '{}'.

188         company_name: invoiceSettings.company_name || '',
                                          ~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:189:42 - error TS2339: Property 'company_address' does not exist on type '{}'.

189         company_address: invoiceSettings.company_address || '',
                                             ~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:190:40 - error TS2339: Property 'company_phone' does not exist on type '{}'.

190         company_phone: invoiceSettings.company_phone || '',
                                           ~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:191:33 - error TS2339: Property 'tax_id' does not exist on type '{}'.

191         tax_id: invoiceSettings.tax_id || '',
                                    ~~~~~~

src/pages/client/ProfilePage.tsx:199:40 - error TS2345: Argument of type '{ push_enabled: boolean; email_enabled: boolean; job_applications: boolean; messages: boolean; system_notifications: boolean; }' is not assignable to parameter of type 'void'.

199     updateNotificationsMutation.mutate(notificationForm);
                                           ~~~~~~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:204:34 - error TS2345: Argument of type '{ company_name: string; company_address: string; company_phone: string; tax_id: string; }' is not assignable to parameter of type 'void'.

204     updateInvoiceMutation.mutate(invoiceForm);
                                     ~~~~~~~~~~~

src/pages/client/ProfilePage.tsx:225:27 - error TS2339: Property 'full_name' does not exist on type '{}'.

225                     {user.full_name.charAt(0)}
                              ~~~~~~~~~

src/pages/client/ProfilePage.tsx:228:76 - error TS2339: Property 'full_name' does not exist on type '{}'.

228                     <h2 className="text-2xl font-bold text-gray-900">{user.full_name}</h2>
                                                                               ~~~~~~~~~

src/pages/client/ProfilePage.tsx:239:33 - error TS2339: Property 'email' does not exist on type '{}'.

239                     <span>{user.email}</span>
                                    ~~~~~

src/pages/client/ProfilePage.tsx:243:47 - error TS2339: Property 'created_at' does not exist on type '{}'.

243                     <span>登録日: {new Date(user.created_at).toLocaleDateString('ja-JP')}</span>
                                                  ~~~~~~~~~~

src/pages/client/ProfilePage.tsx:330:57 - error TS7006: Parameter 'review' implicitly has an 'any' type.

330                       {receivedReviews.slice(0, 5).map((review) => (
                                                            ~~~~~~

src/pages/client/QRCodeDisplayPage.tsx:5:23 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

5 import { qrAPI } from '../../lib/api';
                        ~~~~~~~~~~~~~~~

src/pages/client/QRCodeDisplayPage.tsx:8:66 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

8 import { ArrowLeft, QrCode, RefreshCw, Clock, CheckCircle } from 'lucide-react';
                                                                   ~~~~~~~~~~~~~~

src/pages/client/WorkersPage.tsx:18:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

18 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/client/WorkersPage.tsx:19:27 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

19 import { type User } from '../../lib/api';
                             ~~~~~~~~~~~~~~~

src/pages/jobs/JobsPage.tsx:2:35 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

2 import { jobsAPI, type Job } from '../../lib/api';
                                    ~~~~~~~~~~~~~~~

src/pages/jobs/JobsPage.tsx:78:32 - error TS7006: Parameter 'tag' implicitly has an 'any' type.

78                 {job.tags.map((tag) => (
                                  ~~~

src/pages/public/ContactPage.tsx:3:37 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

3 import { Mail, Phone, MapPin } from 'lucide-react';
                                      ~~~~~~~~~~~~~~

src/pages/public/LandingPage.tsx:2:43 - error TS6133: 'useSpring' is declared but its value is never read.

2 import { motion, useScroll, useTransform, useSpring, useInView } from 'framer-motion';
                                            ~~~~~~~~~

src/pages/public/LandingPage.tsx:17:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

17 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/public/LandingPage.tsx:97:11 - error TS2322: Type '{ animate: { scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }; }' is not assignable to type 'Variants'.
  Property 'animate' is incompatible with index signature.
    Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'Variant'.
      Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'TargetAndTransition'.
        Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type '{ transition?: Transition<any> | undefined; transitionEnd?: ResolvedValues | undefined; }'.
          Types of property 'transition' are incompatible.
            Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'Transition<any> | undefined'.
              Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
                Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'ValueAnimationTransition<any>'.
                  Types of property 'ease' are incompatible.
                    Type 'string' is not assignable to type 'Easing | Easing[] | undefined'.

97           variants={pulseGlow}
             ~~~~~~~~

  node_modules/motion-dom/dist/index.d.ts:1800:5
    1800     variants?: Variants;
             ~~~~~~~~
    The expected type comes from property 'variants' which is declared here on type 'IntrinsicAttributes & Omit<HTMLMotionProps<"div">, "ref"> & RefAttributes<HTMLDivElement>'

src/pages/public/LandingPage.tsx:102:11 - error TS2322: Type '{ animate: { scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }; }' is not assignable to type 'Variants'.
  Property 'animate' is incompatible with index signature.
    Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'Variant'.
      Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'TargetAndTransition'.
        Type '{ scale: number[]; opacity: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type '{ transition?: Transition<any> | undefined; transitionEnd?: ResolvedValues | undefined; }'.
          Types of property 'transition' are incompatible.
            Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'Transition<any> | undefined'.
              Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
                Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'ValueAnimationTransition<any>'.
                  Types of property 'ease' are incompatible.
                    Type 'string' is not assignable to type 'Easing | Easing[] | undefined'.

102           variants={pulseGlow}
              ~~~~~~~~

  node_modules/motion-dom/dist/index.d.ts:1800:5
    1800     variants?: Variants;
             ~~~~~~~~
    The expected type comes from property 'variants' which is declared here on type 'IntrinsicAttributes & Omit<HTMLMotionProps<"div">, "ref"> & RefAttributes<HTMLDivElement>'

src/pages/public/LandingPage.tsx:120:15 - error TS2322: Type '{ initial: { scale: number; opacity: number; }; animate: { scale: number; opacity: number; transition: { type: string; damping: number; stiffness: number; }; }; }' is not assignable to type 'Variants'.
  Property 'animate' is incompatible with index signature.
    Type '{ scale: number; opacity: number; transition: { type: string; damping: number; stiffness: number; }; }' is not assignable to type 'Variant'.
      Type '{ scale: number; opacity: number; transition: { type: string; damping: number; stiffness: number; }; }' is not assignable to type 'TargetAndTransition'.
        Type '{ scale: number; opacity: number; transition: { type: string; damping: number; stiffness: number; }; }' is not assignable to type '{ transition?: Transition<any> | undefined; transitionEnd?: ResolvedValues | undefined; }'.
          Types of property 'transition' are incompatible.
            Type '{ type: string; damping: number; stiffness: number; }' is not assignable to type 'Transition<any> | undefined'.
              Type '{ type: string; damping: number; stiffness: number; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
                Type '{ type: string; damping: number; stiffness: number; }' is not assignable to type 'ValueAnimationTransition<any>'.
                  Types of property 'type' are incompatible.
                    Type 'string' is not assignable to type 'AnimationGeneratorType | undefined'.

120               variants={scaleInSpring}
                  ~~~~~~~~

  node_modules/motion-dom/dist/index.d.ts:1800:5
    1800     variants?: Variants;
             ~~~~~~~~
    The expected type comes from property 'variants' which is declared here on type 'IntrinsicAttributes & Omit<HTMLMotionProps<"div">, "ref"> & RefAttributes<HTMLDivElement>'

src/pages/public/LandingPage.tsx:181:11 - error TS2322: Type '{ animate: { y: number[]; transition: { duration: number; repeat: number; ease: string; }; }; }' is not assignable to type 'Variants'.
  Property 'animate' is incompatible with index signature.
    Type '{ y: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'Variant'.
      Type '{ y: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type 'TargetAndTransition'.
        Type '{ y: number[]; transition: { duration: number; repeat: number; ease: string; }; }' is not assignable to type '{ transition?: Transition<any> | undefined; transitionEnd?: ResolvedValues | undefined; }'.
          Types of property 'transition' are incompatible.
            Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'Transition<any> | undefined'.
              Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'TransitionWithValueOverrides<any>'.
                Type '{ duration: number; repeat: number; ease: string; }' is not assignable to type 'ValueAnimationTransition<any>'.
                  Types of property 'ease' are incompatible.
                    Type 'string' is not assignable to type 'Easing | Easing[] | undefined'.

181           variants={floatAnimation}
              ~~~~~~~~

  node_modules/motion-dom/dist/index.d.ts:1800:5
    1800     variants?: Variants;
             ~~~~~~~~
    The expected type comes from property 'variants' which is declared here on type 'IntrinsicAttributes & Omit<HTMLMotionProps<"div">, "ref"> & RefAttributes<HTMLDivElement>'

src/pages/shared/JobDetailPage.tsx:8:42 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

8 import { jobsAPI, applicationsAPI } from '../../lib/api';
                                           ~~~~~~~~~~~~~~~

src/pages/shared/JobDetailPage.tsx:14:3 - error TS6133: 'DollarSign' is declared but its value is never read.

14   DollarSign,
     ~~~~~~~~~~

src/pages/shared/JobDetailPage.tsx:20:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

20 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/shared/JobDetailPage.tsx:197:34 - error TS7006: Parameter 'tag' implicitly has an 'any' type.

197                   {job.tags.map((tag, index) => (
                                     ~~~

src/pages/shared/JobDetailPage.tsx:197:39 - error TS7006: Parameter 'index' implicitly has an 'any' type.

197                   {job.tags.map((tag, index) => (
                                          ~~~~~

src/pages/shared/MessagesPage.tsx:4:29 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

4 import { messagesAPI } from '../../lib/api';
                              ~~~~~~~~~~~~~~~

src/pages/shared/MessagesPage.tsx:5:44 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

5 import type { Conversation, Message } from '../../lib/api';
                                             ~~~~~~~~~~~~~~~

src/pages/shared/MessagesPage.tsx:7:54 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

7 import { Send, ArrowLeft, User, MessageCircle } from 'lucide-react';
                                                       ~~~~~~~~~~~~~~

src/pages/shared/MessagesPage.tsx:153:44 - error TS2339: Property 'length' does not exist on type '{}'.

153         ) : conversations && conversations.length > 0 ? (
                                               ~~~~~~

src/pages/shared/MessagesPage.tsx:155:28 - error TS2339: Property 'map' does not exist on type '{}'.

155             {conversations.map((conversation: Conversation) => (
                               ~~~

src/pages/shared/NotificationsPage.tsx:6:34 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { notificationsAPI } from '../../lib/api';
                                   ~~~~~~~~~~~~~~~

src/pages/shared/NotificationsPage.tsx:8:10 - error TS6133: 'MessageCircle' is declared but its value is never read.

8 import { MessageCircle, Check, Trash2, CheckCheck, AlertCircle, Info, Briefcase, DollarSign, Bell } from 'lucide-react';
           ~~~~~~~~~~~~~

src/pages/shared/NotificationsPage.tsx:8:106 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

8 import { MessageCircle, Check, Trash2, CheckCheck, AlertCircle, Info, Briefcase, DollarSign, Bell } from 'lucide-react';
                                                                                                           ~~~~~~~~~~~~~~

src/pages/shared/NotificationsPage.tsx:57:38 - error TS2339: Property 'filter' does not exist on type '{}'.

57   const unreadCount = notifications?.filter((n) => !n.is_read).length || 0;
                                        ~~~~~~

src/pages/shared/NotificationsPage.tsx:57:46 - error TS7006: Parameter 'n' implicitly has an 'any' type.

57   const unreadCount = notifications?.filter((n) => !n.is_read).length || 0;
                                                ~

src/pages/shared/NotificationsPage.tsx:90:44 - error TS2339: Property 'length' does not exist on type '{}'.

90         ) : notifications && notifications.length > 0 ? (
                                              ~~~~~~

src/pages/shared/NotificationsPage.tsx:92:28 - error TS2339: Property 'map' does not exist on type '{}'.

92             {notifications.map((notification, index) => (
                              ~~~

src/pages/shared/NotificationsPage.tsx:92:33 - error TS7006: Parameter 'notification' implicitly has an 'any' type.

92             {notifications.map((notification, index) => (
                                   ~~~~~~~~~~~~

src/pages/shared/NotificationsPage.tsx:92:47 - error TS7006: Parameter 'index' implicitly has an 'any' type.

92             {notifications.map((notification, index) => (
                                                 ~~~~~

src/pages/shared/ReviewPage.tsx:5:28 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

5 import { reviewsAPI } from '../../lib/api';
                             ~~~~~~~~~~~~~~~

src/pages/shared/ReviewPage.tsx:9:52 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

9 import { ArrowLeft, Star, Send, CheckCircle } from 'lucide-react';
                                                     ~~~~~~~~~~~~~~

src/pages/shared/SettingsPage.tsx:6:56 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

6 import { Settings, Bell, Lock, User, Mail, Save } from 'lucide-react';
                                                         ~~~~~~~~~~~~~~

src/pages/shared/WorkStyleGuidePage.tsx:17:3 - error TS6133: 'Bell' is declared but its value is never read.

17   Bell,
     ~~~~

src/pages/shared/WorkStyleGuidePage.tsx:19:8 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

19 } from 'lucide-react';
          ~~~~~~~~~~~~~~

src/pages/shared/WorkStyleGuidePage.tsx:212:54 - error TS2304: Cannot find name 'MessageCircle'.

212           { label: 'メッセージ', path: '/messages', icon: MessageCircle },
                                                         ~~~~~~~~~~~~~

src/pages/worker/ApplicationsPage.tsx:8:96 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

8 import { applicationsAPI, assignmentsAPI, reviewsAPI, type Application, type Assignment } from '../../lib/api';
                                                                                                 ~~~~~~~~~~~~~~~

src/pages/worker/ApplicationsPage.tsx:10:125 - error TS6133: 'QrCode' is declared but its value is never read.

10 import { Sparkles, Zap, Flame, MessageCircle, UserCircle, Clock, CheckCircle, XCircle, AlertCircle, BookOpen, ChevronRight, QrCode, LogIn, LogOut, Star } from 'lucide-react';
                                                                                                                               ~~~~~~

src/pages/worker/ApplicationsPage.tsx:10:160 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

10 import { Sparkles, Zap, Flame, MessageCircle, UserCircle, Clock, CheckCircle, XCircle, AlertCircle, BookOpen, ChevronRight, QrCode, LogIn, LogOut, Star } from 'lucide-react';
                                                                                                                                                                  ~~~~~~~~~~~~~~

src/pages/worker/ApplicationsPage.tsx:34:46 - error TS2339: Property 'filter' does not exist on type '{}'.

34   const upcomingApplications = applications?.filter(app => {
                                                ~~~~~~

src/pages/worker/ApplicationsPage.tsx:34:53 - error TS7006: Parameter 'app' implicitly has an 'any' type.

34   const upcomingApplications = applications?.filter(app => {
                                                       ~~~

src/pages/worker/ApplicationsPage.tsx:35:37 - error TS2339: Property 'find' does not exist on type '{}'.

35     const assignment = assignments?.find(a => a.application_id === app.id);
                                       ~~~~

src/pages/worker/ApplicationsPage.tsx:35:42 - error TS7006: Parameter 'a' implicitly has an 'any' type.

35     const assignment = assignments?.find(a => a.application_id === app.id);
                                            ~

src/pages/worker/ApplicationsPage.tsx:40:42 - error TS2339: Property 'filter' does not exist on type '{}'.

40   const pastApplications = applications?.filter(app => {
                                            ~~~~~~

src/pages/worker/ApplicationsPage.tsx:40:49 - error TS7006: Parameter 'app' implicitly has an 'any' type.

40   const pastApplications = applications?.filter(app => {
                                                   ~~~

src/pages/worker/ApplicationsPage.tsx:41:37 - error TS2339: Property 'find' does not exist on type '{}'.

41     const assignment = assignments?.find(a => a.application_id === app.id);
                                       ~~~~

src/pages/worker/ApplicationsPage.tsx:41:42 - error TS7006: Parameter 'a' implicitly has an 'any' type.

41     const assignment = assignments?.find(a => a.application_id === app.id);
                                            ~

src/pages/worker/ApplicationsPage.tsx:64:25 - error TS2339: Property 'find' does not exist on type '{}'.

64     return assignments?.find(a => a.application_id === applicationId);
                           ~~~~

src/pages/worker/ApplicationsPage.tsx:64:30 - error TS7006: Parameter 'a' implicitly has an 'any' type.

64     return assignments?.find(a => a.application_id === applicationId);
                                ~

src/pages/worker/ApplicationsPage.tsx:68:28 - error TS7006: Parameter 'r' implicitly has an 'any' type.

68     return myReviews?.some(r => r.assignment_id === assignmentId) || false;
                              ~

src/pages/worker/ApplicationsPage.tsx:123:39 - error TS7006: Parameter 'application' implicitly has an 'any' type.

123             {currentApplications.map((application, index) => {
                                          ~~~~~~~~~~~

src/pages/worker/ApplicationsPage.tsx:123:52 - error TS7006: Parameter 'index' implicitly has an 'any' type.

123             {currentApplications.map((application, index) => {
                                                       ~~~~~

src/pages/worker/ApplicationsPage.tsx:129:21 - error TS6133: 'isCompleted' is declared but its value is never read.

129               const isCompleted = assignment && assignment.completed_at;
                        ~~~~~~~~~~~

src/pages/worker/JobsPage.tsx:6:60 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { jobsAPI, favoritesAPI, jobNotificationsAPI } from '../../lib/api';
                                                             ~~~~~~~~~~~~~~~

src/pages/worker/JobsPage.tsx:7:112 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

7 import { MapPin, Clock, Heart, ChevronDown, Sparkles, Zap, Flame, MessageCircle, UserCircle, MapPinIcon } from 'lucide-react';
                                                                                                                 ~~~~~~~~~~~~~~

src/pages/worker/JobsPage.tsx:93:29 - error TS2769: No overload matches this call.
  Overload 1 of 2, '(iterable?: Iterable<unknown> | null | undefined): Set<unknown>', gave the following error.
    Argument of type '{}' is not assignable to parameter of type 'Iterable<unknown>'.
      Property '[Symbol.iterator]' is missing in type '{}' but required in type 'Iterable<unknown>'.
  Overload 2 of 2, '(values?: readonly any[] | null | undefined): Set<any>', gave the following error.
    Argument of type '{}' is not assignable to parameter of type 'readonly any[]'.
      Type '{}' is missing the following properties from type 'readonly any[]': length, concat, join, slice, and 20 more.

93   const favorites = new Set(favoritesData || []);
                               ~~~~~~~~~~~~~~~~~~~

  node_modules/typescript/lib/lib.es2015.iterable.d.ts:49:5
    49     [Symbol.iterator](): Iterator<T, TReturn, TNext>;
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    '[Symbol.iterator]' is declared here.

src/pages/worker/ProfilePage.tsx:6:50 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { authAPI, paymentsAPI, reviewsAPI } from '../../lib/api';
                                                   ~~~~~~~~~~~~~~~

src/pages/worker/ProfilePage.tsx:8:102 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

8 import { Home, Search, FileText, User, Mail, Calendar, Shield, CreditCard, ExternalLink, Star } from 'lucide-react';
                                                                                                       ~~~~~~~~~~~~~~

src/pages/worker/ProfilePage.tsx:26:45 - error TS2339: Property 'id' does not exist on type '{}'.

26     queryKey: ['reviews', 'received', user?.id],
                                               ~~

src/pages/worker/ProfilePage.tsx:27:57 - error TS2339: Property 'id' does not exist on type '{}'.

27     queryFn: () => reviewsAPI.list({ reviewee_id: user?.id }),
                                                           ~~

src/pages/worker/ProfilePage.tsx:28:22 - error TS2339: Property 'id' does not exist on type '{}'.

28     enabled: !!user?.id,
                        ~~

src/pages/worker/ProfilePage.tsx:32:16 - error TS2339: Property 'email' does not exist on type '{}'.

32     if (!user?.email) return;
                  ~~~~~

src/pages/worker/ProfilePage.tsx:36:66 - error TS2339: Property 'email' does not exist on type '{}'.

36       const result = await paymentsAPI.createConnectAccount(user.email);
                                                                    ~~~~~

src/pages/worker/ProfilePage.tsx:48:14 - error TS7006: Parameter 'p' implicitly has an 'any' type.

48     .filter((p) => p.status === 'completed')
                ~

src/pages/worker/ProfilePage.tsx:49:14 - error TS7006: Parameter 'sum' implicitly has an 'any' type.

49     .reduce((sum, p) => sum + p.amount, 0) || 0;
                ~~~

src/pages/worker/ProfilePage.tsx:49:19 - error TS7006: Parameter 'p' implicitly has an 'any' type.

49     .reduce((sum, p) => sum + p.amount, 0) || 0;
                     ~

src/pages/worker/ProfilePage.tsx:52:31 - error TS7006: Parameter 'sum' implicitly has an 'any' type.

52     ? receivedReviews.reduce((sum, r) => sum + r.rating, 0) / receivedReviews.length
                                 ~~~

src/pages/worker/ProfilePage.tsx:52:36 - error TS7006: Parameter 'r' implicitly has an 'any' type.

52     ? receivedReviews.reduce((sum, r) => sum + r.rating, 0) / receivedReviews.length
                                      ~

src/pages/worker/ProfilePage.tsx:73:27 - error TS2339: Property 'full_name' does not exist on type '{}'.

73                     {user.full_name.charAt(0)}
                             ~~~~~~~~~

src/pages/worker/ProfilePage.tsx:76:76 - error TS2339: Property 'full_name' does not exist on type '{}'.

76                     <h2 className="text-2xl font-bold text-gray-900">{user.full_name}</h2>
                                                                              ~~~~~~~~~

src/pages/worker/ProfilePage.tsx:87:33 - error TS2339: Property 'email' does not exist on type '{}'.

87                     <span>{user.email}</span>
                                   ~~~~~

src/pages/worker/ProfilePage.tsx:91:47 - error TS2339: Property 'created_at' does not exist on type '{}'.

91                     <span>登録日: {new Date(user.created_at).toLocaleDateString('ja-JP')}</span>
                                                 ~~~~~~~~~~

src/pages/worker/ProfilePage.tsx:165:57 - error TS7006: Parameter 'review' implicitly has an 'any' type.

165                       {receivedReviews.slice(0, 5).map((review) => (
                                                            ~~~~~~

src/pages/worker/QRScanPage.tsx:3:36 - error TS2307: Cannot find module 'html5-qrcode' or its corresponding type declarations.

3 import { Html5QrcodeScanner } from 'html5-qrcode';
                                     ~~~~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:6:23 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

6 import { qrAPI } from '../../lib/api';
                        ~~~~~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:9:64 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

9 import { ArrowLeft, QrCode, CheckCircle, XCircle, Clock } from 'lucide-react';
                                                                 ~~~~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:17:10 - error TS6133: 'scanning' is declared but its value is never read.

17   const [scanning, setScanning] = useState(true);
            ~~~~~~~~

src/pages/worker/QRScanPage.tsx:67:8 - error TS7006: Parameter 'decodedText' implicitly has an 'any' type.

67       (decodedText) => {
          ~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:106:8 - error TS6133: 'errorMessage' is declared but its value is never read.

106       (errorMessage) => {
           ~~~~~~~~~~~~

src/pages/worker/QRScanPage.tsx:106:8 - error TS7006: Parameter 'errorMessage' implicitly has an 'any' type.

106       (errorMessage) => {
           ~~~~~~~~~~~~

src/pages/worker/WorkerDashboard.tsx:4:50 - error TS2307: Cannot find module '../../lib/api' or its corresponding type declarations.

4 import { jobsAPI, authAPI, assignmentsAPI } from '../../lib/api';
                                                   ~~~~~~~~~~~~~~~

src/pages/worker/WorkerDashboard.tsx:5:84 - error TS6133: 'Radio' is declared but its value is never read.

5 import { Sparkles, Zap, Flame, MessageCircle, UserCircle, MapPin, BarChart3, Menu, Radio, X, Settings, LogOut, HelpCircle, RefreshCw, Package, Navigation, CheckCircle } from 'lucide-react';
                                                                                     ~~~~~

src/pages/worker/WorkerDashboard.tsx:5:175 - error TS2307: Cannot find module 'lucide-react' or its corresponding type declarations.

5 import { Sparkles, Zap, Flame, MessageCircle, UserCircle, MapPin, BarChart3, Menu, Radio, X, Settings, LogOut, HelpCircle, RefreshCw, Package, Navigation, CheckCircle } from 'lucide-react';
                                                                                                                                                                                ~~~~~~~~~~~~~~

src/pages/worker/WorkerDashboard.tsx:18:9 - error TS6133: 'queryClient' is declared but its value is never read.

18   const queryClient = useQueryClient();
           ~~~~~~~~~~~

src/pages/worker/WorkerDashboard.tsx:334:40 - error TS7006: Parameter 'job' implicitly has an 'any' type.

334                 {jobs.slice(0, 3).map((job) => (
                                           ~~~

src/stores/authStore.ts:2:25 - error TS2307: Cannot find module '../lib/api' or its corresponding type declarations.

2 import { authAPI } from '../lib/api';
                          ~~~~~~~~~~~~

vite.config.ts:3:25 - error TS2307: Cannot find module 'vite-plugin-pwa' or its corresponding type declarations.

3 import { VitePWA } from 'vite-plugin-pwa'
                          ~~~~~~~~~~~~~~~~~


Found 210 errors.


up to date, audited 385 packages in 876ms

93 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
● worknow-frontend.service - Work Now Frontend (React + Vite)
     Loaded: loaded (/etc/systemd/system/worknow-frontend.service; enabled; pre>
     Active: active (running) since Sun 2025-11-09 14:23:58 UTC; 7ms ago
   Main PID: 157516 (node)
      Tasks: 1 (limit: 9483)
     Memory: 556.0K (peak: 848.0K)
        CPU: 5ms
     CGroup: /system.slice/worknow-frontend.service
             └─157516 /usr/bin/node /var/www/worknow/frontend/dist-server/serve>

Nov 09 14:23:58 srv1087935 systemd[1]: Started worknow-frontend.service - Work >
root@srv1087935:/var/www/worknow/frontend# # HTTP専用のNginx設定を適用
cp /var/www/worknow/deployment/nginx-http.conf /etc/nginx/sites-available/worknow
ln -sf /etc/nginx/sites-available/worknow /etc/nginx/sites-enabled/
rm -f /etc/nginx/sites-enabled/default

# Nginx設定のテスト
nginx -t

# Nginxを再起動
systemctl restart nginx

# Nginxのステータス確認
systemctl status nginx
2025/11/09 14:24:29 [warn] 157579#157579: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/only-u.fun:53
2025/11/09 14:24:29 [warn] 157579#157579: protocol options redefined for 0.0.0.0:443 in /etc/nginx/sites-enabled/only-u.fun:76
2025/11/09 14:24:29 [warn] 157579#157579: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/only-u.fun:77
2025/11/09 14:24:29 [warn] 157579#157579: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/sinjapan-logimatch:16
2025/11/09 14:24:29 [warn] 157579#157579: protocol options redefined for 0.0.0.0:443 in /etc/nginx/sites-enabled/sinjapan-logimatch:17
2025/11/09 14:24:29 [warn] 157579#157579: protocol options redefined for 0.0.0.0:443 in /etc/nginx/sites-enabled/sinjapan-poker.com:11
2025/11/09 14:24:29 [warn] 157579#157579: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/sinjapan-poker.com:12
2025/11/09 14:24:29 [warn] 157579#157579: conflicting server name "www.only-u.fun" on [::]:443, ignored
2025/11/09 14:24:29 [warn] 157579#157579: conflicting server name "only-u.fun" on [::]:443, ignored
2025/11/09 14:24:29 [warn] 157579#157579: conflicting server name "www.only-u.fun" on 0.0.0.0:443, ignored
2025/11/09 14:24:29 [warn] 157579#157579: conflicting server name "only-u.fun" on 0.0.0.0:443, ignored
2025/11/09 14:24:29 [warn] 157579#157579: conflicting server name "www.only-u.fun" on 0.0.0.0:80, ignored
2025/11/09 14:24:29 [warn] 157579#157579: conflicting server name "only-u.fun" on 0.0.0.0:80, ignored
2025/11/09 14:24:29 [warn] 157579#157579: conflicting server name "www.only-u.fun" on [::]:80, ignored
2025/11/09 14:24:29 [warn] 157579#157579: conflicting server name "only-u.fun" on [::]:80, ignored
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
● nginx.service - A high performance web server and a reverse proxy server
     Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: en>
     Active: active (running) since Sun 2025-11-09 14:24:29 UTC; 8ms ago
       Docs: man:nginx(8)
    Process: 157596 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_pro>
    Process: 157598 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; >
   Main PID: 157599 (nginx)
      Tasks: 3 (limit: 9483)
     Memory: 3.4M (peak: 3.5M)
        CPU: 55ms
     CGroup: /system.slice/nginx.service
             ├─157599 "nginx: master process /usr/sbin/nginx -g daemon on; mast>
             ├─157600 "nginx: worker process"
             └─157601 "nginx: worker process"

Nov 09 14:24:29 srv1087935 nginx[157598]: 2025/11/09 14:24:29 [warn] 157598#157>
Nov 09 14:24:29 srv1087935 nginx[157598]: 2025/11/09 14:24:29 [warn] 157598#157>
Nov 09 14:24:29 srv1087935 nginx[157598]: 2025/11/09 14:24:29 [warn] 157598#157>
Nov 09 14:24:29 srv1087935 nginx[157598]: 2025/11/09 14:24:29 [warn] 157598#157>
Nov 09 14:24:29 srv1087935 nginx[157598]: 2025/11/09 14:24:29 [warn] 157598#157>
Nov 09 14:24:29 srv1087935 nginx[157598]: 2025/11/09 14:24:29 [warn] 157598#157>
Nov 09 14:24:29 srv1087935 nginx[157598]: 2025/11/09 14:24:29 [warn] 157598#157>
Nov 09 14:24:29 srv1087935 nginx[157598]: 2025/11/09 14:24:29 [warn] 157598#157>
root@srv1087935:/var/www/worknow/frontend# # 全サービスの状態を確認
systemctl status worknow-backend worknow-frontend nginx

# ローカルでアクセステスト
curl http://localhost:20000
curl http://localhost:8008/api/docs
● worknow-backend.service - Work Now Backend (FastAPI)
     Loaded: loaded (/etc/systemd/system/worknow-backend.service; enabled; pres>
     Active: active (running) since Sun 2025-11-09 14:24:45 UTC; 365ms ago
   Main PID: 157624 (gunicorn)
      Tasks: 5 (limit: 9483)
     Memory: 77.4M (peak: 77.7M)
        CPU: 586ms
     CGroup: /system.slice/worknow-backend.service
             ├─157624 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>
             ├─157625 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>
             ├─157626 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>
             ├─157627 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>
             └─157628 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>

Nov 09 14:24:45 srv1087935 systemd[1]: worknow-backend.service: Scheduled resta>
Nov 09 14:24:45 srv1087935 systemd[1]: Started worknow-backend.service - Work N>
Nov 09 14:24:45 srv1087935 gunicorn[157624]: [2025-11-09 14:24:45 +0000] [15762>
Nov 09 14:24:45 srv1087935 gunicorn[157624]: [2025-11-09 14:24:45 +0000] [15762>
Nov 09 14:24:45 srv1087935 gunicorn[157624]: [2025-11-09 14:24:45 +0000] [15762>
Nov 09 14:24:45 srv1087935 gunicorn[157625]: [2025-11-09 14:24:45 +0000] [15762>
Nov 09 14:24:45 srv1087935 gunicorn[157626]: [2025-11-09 14:24:45 +0000] [15762>
Nov 09 14:24:45 srv1087935 gunicorn[157627]: [2025-11-09 14:24:45 +0000] [15762>
Nov 09 14:24:45 srv1087935 gunicorn[157628]: [2025-11-09 14:24:45 +0000] [15762>
curl: (7) Failed to connect to localhost port 20000 after 0 ms: Couldn't connect to server
curl: (7) Failed to connect to localhost port 8008 after 0 ms: Couldn't connect to server
root@srv1087935:/var/www/worknow/frontend# # SSL証明書の取得（メールアドレスを自分のものに変更してください）
certbot --nginx -d sinjapan-worknow.com -d www.sinjapan-worknow.com --non-interactive --agree-tos -m your-email@example.com

# SSL証明書取得後、HTTPS設定に切り替え
cp /var/www/worknow/deployment/nginx.conf /etc/nginx/sites-available/worknow
nginx -t
systemctl restart nginx

# 証明書の自動更新を有効化
systemctl enable certbot.timer
systemctl status certbot.timer
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Requesting a certificate for sinjapan-worknow.com and www.sinjapan-worknow.com
^CExiting due to user request.
2025/11/09 14:25:19 [warn] 157705#157705: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/only-u.fun:53
2025/11/09 14:25:19 [warn] 157705#157705: protocol options redefined for 0.0.0.0:443 in /etc/nginx/sites-enabled/only-u.fun:76
2025/11/09 14:25:19 [warn] 157705#157705: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/only-u.fun:77
2025/11/09 14:25:19 [warn] 157705#157705: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/sinjapan-logimatch:16
2025/11/09 14:25:19 [warn] 157705#157705: protocol options redefined for 0.0.0.0:443 in /etc/nginx/sites-enabled/sinjapan-logimatch:17
2025/11/09 14:25:19 [warn] 157705#157705: protocol options redefined for 0.0.0.0:443 in /etc/nginx/sites-enabled/sinjapan-poker.com:11
2025/11/09 14:25:19 [warn] 157705#157705: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/sinjapan-poker.com:12
2025/11/09 14:25:19 [emerg] 157705#157705: cannot load certificate "/etc/letsencrypt/live/sinjapan-worknow.com/fullchain.pem": BIO_new_file() failed (SSL: error:80000002:system library::No such file or directory:calling fopen(/etc/letsencrypt/live/sinjapan-worknow.com/fullchain.pem, r) error:10000080:BIO routines::no such file)
nginx: configuration file /etc/nginx/nginx.conf test failed
Job for nginx.service failed because the control process exited with error code.
See "systemctl status nginx.service" and "journalctl -xeu nginx.service" for details.
● certbot.timer - Run certbot twice daily
     Loaded: loaded (/usr/lib/systemd/system/certbot.timer; enabled; preset: en>
     Active: active (waiting) since Mon 2025-10-27 11:07:30 UTC; 1 week 6 days >
    Trigger: Sun 2025-11-09 16:14:48 UTC; 1h 49min left
   Triggers: ● certbot.service

Notice: journal has been rotated since unit was started, output may be incomple>
root@srv1087935:/var/www/worknow/frontend# # HTTP専用の設定に戻す
cp /var/www/worknow/deployment/nginx-http.conf /etc/nginx/sites-available/worknow

# Nginx設定をテスト
nginx -t

# Nginxを再起動
systemctl restart nginx

# Nginxのステータス確認
systemctl status nginx
2025/11/09 14:26:07 [warn] 157854#157854: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/only-u.fun:53
2025/11/09 14:26:07 [warn] 157854#157854: protocol options redefined for 0.0.0.0:443 in /etc/nginx/sites-enabled/only-u.fun:76
2025/11/09 14:26:07 [warn] 157854#157854: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/only-u.fun:77
2025/11/09 14:26:07 [warn] 157854#157854: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/sinjapan-logimatch:16
2025/11/09 14:26:07 [warn] 157854#157854: protocol options redefined for 0.0.0.0:443 in /etc/nginx/sites-enabled/sinjapan-logimatch:17
2025/11/09 14:26:07 [warn] 157854#157854: protocol options redefined for 0.0.0.0:443 in /etc/nginx/sites-enabled/sinjapan-poker.com:11
2025/11/09 14:26:07 [warn] 157854#157854: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/sinjapan-poker.com:12
2025/11/09 14:26:07 [warn] 157854#157854: conflicting server name "www.only-u.fun" on [::]:443, ignored
2025/11/09 14:26:07 [warn] 157854#157854: conflicting server name "only-u.fun" on [::]:443, ignored
2025/11/09 14:26:07 [warn] 157854#157854: conflicting server name "www.only-u.fun" on 0.0.0.0:443, ignored
2025/11/09 14:26:07 [warn] 157854#157854: conflicting server name "only-u.fun" on 0.0.0.0:443, ignored
2025/11/09 14:26:07 [warn] 157854#157854: conflicting server name "www.only-u.fun" on 0.0.0.0:80, ignored
2025/11/09 14:26:07 [warn] 157854#157854: conflicting server name "only-u.fun" on 0.0.0.0:80, ignored
2025/11/09 14:26:07 [warn] 157854#157854: conflicting server name "www.only-u.fun" on [::]:80, ignored
2025/11/09 14:26:07 [warn] 157854#157854: conflicting server name "only-u.fun" on [::]:80, ignored
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
● nginx.service - A high performance web server and a reverse proxy server
     Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: en>
     Active: active (running) since Sun 2025-11-09 14:26:07 UTC; 9ms ago
       Docs: man:nginx(8)
    Process: 157857 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_pro>
    Process: 157859 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; >
   Main PID: 157860 (nginx)
      Tasks: 3 (limit: 9483)
     Memory: 3.4M (peak: 3.6M)
        CPU: 39ms
     CGroup: /system.slice/nginx.service
             ├─157860 "nginx: master process /usr/sbin/nginx -g daemon on; mast>
             ├─157861 "nginx: worker process"
             └─157862 "nginx: worker process"

Nov 09 14:26:07 srv1087935 nginx[157859]: 2025/11/09 14:26:07 [warn] 157859#157>
Nov 09 14:26:07 srv1087935 nginx[157859]: 2025/11/09 14:26:07 [warn] 157859#157>
Nov 09 14:26:07 srv1087935 nginx[157859]: 2025/11/09 14:26:07 [warn] 157859#157>
Nov 09 14:26:07 srv1087935 nginx[157859]: 2025/11/09 14:26:07 [warn] 157859#157>
Nov 09 14:26:07 srv1087935 nginx[157859]: 2025/11/09 14:26:07 [warn] 157859#157>
Nov 09 14:26:07 srv1087935 nginx[157859]: 2025/11/09 14:26:07 [warn] 157859#157>
Nov 09 14:26:07 srv1087935 nginx[157859]: 2025/11/09 14:26:07 [warn] 157859#157>
Nov 09 14:26:07 srv1087935 nginx[157859]: 2025/11/09 14:26:07 [warn] 157859#157>
root@srv1087935:/var/www/worknow/frontend# # SSL証明書を取得（メールアドレスを実際のものに変更してください）
certbot --nginx -d sinjapan-worknow.com -d www.sinjapan-worknow.com
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Requesting a certificate for sinjapan-worknow.com and www.sinjapan-worknow.com

Successfully received certificate.
Certificate is saved at: /etc/letsencrypt/live/sinjapan-worknow.com/fullchain.pem
Key is saved at:         /etc/letsencrypt/live/sinjapan-worknow.com/privkey.pem
This certificate expires on 2026-02-07.
These files will be updated when the certificate renews.
Certbot has set up a scheduled task to automatically renew this certificate in the background.

Deploying certificate
Successfully deployed certificate for sinjapan-worknow.com to /etc/nginx/sites-enabled/worknow
Successfully deployed certificate for www.sinjapan-worknow.com to /etc/nginx/sites-enabled/worknow
Congratulations! You have successfully enabled HTTPS on https://sinjapan-worknow.com and https://www.sinjapan-worknow.com

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
If you like Certbot, please consider supporting our work by:
 * Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
 * Donating to EFF:                    https://eff.org/donate-le
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
root@srv1087935:/var/www/worknow/frontend# # HTTPS設定に切り替え
cp /var/www/worknow/deployment/nginx.conf /etc/nginx/sites-available/worknow

# Nginx設定をテスト
nginx -t

# Nginxを再起動
systemctl restart nginx

# すべてのサービスが正常か確認
echo "=== Backend Status ==="
systemctl status worknow-backend --no-pager

echo "=== Frontend Status ==="
systemctl status worknow-frontend --no-pager

echo "=== Nginx Status ==="
systemctl status nginx --no-pager

# ポートがリッスンされているか確認
echo "=== Port Check ==="
netstat -tlnp | grep -E '(20000|8008|80|443)'

# HTTPSでアクセステスト
curl -I https://sinjapan-worknow.com
2025/11/09 14:27:11 [warn] 157984#157984: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/only-u.fun:53
2025/11/09 14:27:11 [warn] 157984#157984: protocol options redefined for 0.0.0.0:443 in /etc/nginx/sites-enabled/only-u.fun:76
2025/11/09 14:27:11 [warn] 157984#157984: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/only-u.fun:77
2025/11/09 14:27:11 [warn] 157984#157984: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/sinjapan-logimatch:16
2025/11/09 14:27:11 [warn] 157984#157984: protocol options redefined for 0.0.0.0:443 in /etc/nginx/sites-enabled/sinjapan-logimatch:17
2025/11/09 14:27:11 [warn] 157984#157984: protocol options redefined for 0.0.0.0:443 in /etc/nginx/sites-enabled/sinjapan-poker.com:11
2025/11/09 14:27:11 [warn] 157984#157984: protocol options redefined for [::]:443 in /etc/nginx/sites-enabled/sinjapan-poker.com:12
2025/11/09 14:27:11 [warn] 157984#157984: conflicting server name "www.only-u.fun" on [::]:443, ignored
2025/11/09 14:27:11 [warn] 157984#157984: conflicting server name "only-u.fun" on [::]:443, ignored
2025/11/09 14:27:11 [warn] 157984#157984: conflicting server name "www.only-u.fun" on 0.0.0.0:443, ignored
2025/11/09 14:27:11 [warn] 157984#157984: conflicting server name "only-u.fun" on 0.0.0.0:443, ignored
2025/11/09 14:27:11 [warn] 157984#157984: conflicting server name "www.only-u.fun" on 0.0.0.0:80, ignored
2025/11/09 14:27:11 [warn] 157984#157984: conflicting server name "only-u.fun" on 0.0.0.0:80, ignored
2025/11/09 14:27:11 [warn] 157984#157984: conflicting server name "www.only-u.fun" on [::]:80, ignored
2025/11/09 14:27:11 [warn] 157984#157984: conflicting server name "only-u.fun" on [::]:80, ignored
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful
=== Backend Status ===
● worknow-backend.service - Work Now Backend (FastAPI)
     Loaded: loaded (/etc/systemd/system/worknow-backend.service; enabled; preset: enabled)
     Active: active (running) since Sun 2025-11-09 14:26:57 UTC; 19s ago
   Main PID: 157965 (gunicorn)
      Tasks: 1 (limit: 9483)
     Memory: 17.4M (peak: 124.0M)
        CPU: 1.343s
     CGroup: /system.slice/worknow-backend.service
             └─157965 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b…

Nov 09 14:26:58 srv1087935 gunicorn[157965]:   File "/var/www/worknow/venv/l…top
Nov 09 14:26:58 srv1087935 gunicorn[157965]:     time.sleep(0.1)
Nov 09 14:26:58 srv1087935 gunicorn[157965]:   File "/var/www/worknow/venv/l…hld
Nov 09 14:26:58 srv1087935 gunicorn[157965]:     self.reap_workers()
Nov 09 14:26:58 srv1087935 gunicorn[157965]:   File "/var/www/worknow/venv/l…ers
Nov 09 14:26:58 srv1087935 gunicorn[157965]:     self.log.error(msg)
Nov 09 14:26:58 srv1087935 gunicorn[157965]:   File "/var/www/worknow/venv/l…ror
Nov 09 14:26:58 srv1087935 gunicorn[157965]:     self.error_log.error(msg, *…gs)
Nov 09 14:26:58 srv1087935 gunicorn[157965]: Message: 'Worker (pid:157968) w…M!'
Nov 09 14:26:58 srv1087935 gunicorn[157965]: Arguments: ()
Hint: Some lines were ellipsized, use -l to show in full.
=== Frontend Status ===
● worknow-frontend.service - Work Now Frontend (React + Vite)
     Loaded: loaded (/etc/systemd/system/worknow-frontend.service; enabled; preset: enabled)
     Active: activating (auto-restart) (Result: exit-code) since Sun 2025-11-09 14:27:13 UTC; 3s ago
    Process: 157988 ExecStart=/usr/bin/node /var/www/worknow/frontend/dist-server/server.js (code=exited, status=1/FAILURE)
   Main PID: 157988 (code=exited, status=1/FAILURE)
        CPU: 38ms
=== Nginx Status ===
● nginx.service - A high performance web server and a reverse proxy server
     Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: enabled)
     Active: active (running) since Sun 2025-11-09 14:27:16 UTC; 26ms ago
       Docs: man:nginx(8)
    Process: 158002 ExecStartPre=/usr/sbin/nginx -t -q -g daemon on; master_process on; (code=exited, status=0/SUCCESS)
    Process: 158004 ExecStart=/usr/sbin/nginx -g daemon on; master_process on; (code=exited, status=0/SUCCESS)
   Main PID: 158005 (nginx)
      Tasks: 3 (limit: 9483)
     Memory: 4.6M (peak: 4.9M)
        CPU: 44ms
     CGroup: /system.slice/nginx.service
             ├─158005 "nginx: master process /usr/sbin/nginx -g daemon on; mast…
             ├─158006 "nginx: worker process"
             └─158007 "nginx: worker process"

Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…m:12
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 systemd[1]: Started nginx.service - A high perfo…ver.
Hint: Some lines were ellipsized, use -l to show in full.
=== Port Check ===
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      158005/nginx: maste 
tcp        0      0 0.0.0.0:443             0.0.0.0:*               LISTEN      158005/nginx: maste 
tcp        0      0 0.0.0.0:8000            0.0.0.0:*               LISTEN      136414/node         
tcp6       0      0 :::80                   :::*                    LISTEN      158005/nginx: maste 
tcp6       0      0 :::443                  :::*                    LISTEN      158005/nginx: maste 
=== HTTPS Access Test ===
HTTP/2 502 
server: nginx/1.24.0 (Ubuntu)
date: Sun, 09 Nov 2025 14:27:17 GMT
content-type: text/html
content-length: 166
strict-transport-security: max-age=31536000; includeSubDomains
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff
x-xss-protection: 1; mode=block

root@srv1087935:/var/www/worknow/frontend# # バックエンドの詳細ログを確認
echo "=== Backend Logs ==="
journalctl -u worknow-backend -n 100 --no-pager

# フロントエンドの詳細ログを確認
echo "=== Frontend Logs ==="
journalctl -u worknow-frontend -n 100 --no-pager

# バックエンドを手動起動してエラーを確認
cd /var/www/worknow/backend
source ../venv/bin/activate
export $(cat ../.env | xargs)

# データベーステーブルの初期化が必要かもしれません
python -c "from services.postgres_service import PostgresService; PostgresService().init_db()"

# 手動起動でエラーを確認
python -m uvicorn main:app --host 0.0.0.0 --port 8008
=== Backend Logs ===
Nov 09 14:27:39 srv1087935 gunicorn[158044]: SUPABASE_KEY
Nov 09 14:27:39 srv1087935 gunicorn[158044]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158044]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158044]: STRIPE_API_KEY
Nov 09 14:27:39 srv1087935 gunicorn[158044]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158044]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158044]: STRIPE_CONNECT_CLIENT_ID
Nov 09 14:27:39 srv1087935 gunicorn[158044]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158044]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158044]: FIREBASE_KEY
Nov 09 14:27:39 srv1087935 gunicorn[158044]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158044]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158044]: JWT_SECRET
Nov 09 14:27:39 srv1087935 gunicorn[158044]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158044]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158044]: DOMAIN
Nov 09 14:27:39 srv1087935 gunicorn[158044]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158044]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158044]: ADMIN_EMAIL
Nov 09 14:27:39 srv1087935 gunicorn[158044]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158044]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158044]: [2025-11-09 14:27:39 +0000] [158044] [INFO] Worker exiting (pid: 158044)
Nov 09 14:27:39 srv1087935 gunicorn[158046]: [2025-11-09 14:27:39 +0000] [158046] [ERROR] Exception in worker process
Nov 09 14:27:39 srv1087935 gunicorn[158046]: Traceback (most recent call last):
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/arbiter.py", line 608, in spawn_worker
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     worker.init_process()
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/workers/base.py", line 135, in init_process
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     self.load_wsgi()
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/workers/base.py", line 147, in load_wsgi
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     self.wsgi = self.app.wsgi()
Nov 09 14:27:39 srv1087935 gunicorn[158046]:                 ^^^^^^^^^^^^^^^
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/app/base.py", line 66, in wsgi
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     self.callable = self.load()
Nov 09 14:27:39 srv1087935 gunicorn[158046]:                     ^^^^^^^^^^^
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/app/wsgiapp.py", line 57, in load
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     return self.load_wsgiapp()
Nov 09 14:27:39 srv1087935 gunicorn[158046]:            ^^^^^^^^^^^^^^^^^^^
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/app/wsgiapp.py", line 47, in load_wsgiapp
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     return util.import_app(self.app_uri)
Nov 09 14:27:39 srv1087935 gunicorn[158046]:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/gunicorn/util.py", line 370, in import_app
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     mod = importlib.import_module(module)
Nov 09 14:27:39 srv1087935 gunicorn[158046]:           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/usr/lib/python3.12/importlib/__init__.py", line 90, in import_module
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     return _bootstrap._gcd_import(name[level:], package, level)
Nov 09 14:27:39 srv1087935 gunicorn[158046]:            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "<frozen importlib._bootstrap_external>", line 995, in exec_module
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/var/www/worknow/backend/main.py", line 6, in <module>
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     from utils.config import CFG
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/var/www/worknow/backend/utils/config.py", line 46, in <module>
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     CFG = get_settings().model_dump()
Nov 09 14:27:39 srv1087935 gunicorn[158046]:           ^^^^^^^^^^^^^^
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/var/www/worknow/backend/utils/config.py", line 43, in get_settings
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     return Settings()
Nov 09 14:27:39 srv1087935 gunicorn[158046]:            ^^^^^^^^^^
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/pydantic_settings/main.py", line 193, in __init__
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     super().__init__(
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   File "/var/www/worknow/venv/lib/python3.12/site-packages/pydantic/main.py", line 250, in __init__
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
Nov 09 14:27:39 srv1087935 gunicorn[158046]:                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Nov 09 14:27:39 srv1087935 gunicorn[158046]: pydantic_core._pydantic_core.ValidationError: 8 validation errors for Settings
Nov 09 14:27:39 srv1087935 gunicorn[158046]: SUPABASE_URL
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158046]: SUPABASE_KEY
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158046]: STRIPE_API_KEY
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158046]: STRIPE_CONNECT_CLIENT_ID
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158046]: FIREBASE_KEY
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158046]: JWT_SECRET
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158046]: DOMAIN
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158046]: ADMIN_EMAIL
Nov 09 14:27:39 srv1087935 gunicorn[158046]:   Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
Nov 09 14:27:39 srv1087935 gunicorn[158046]:     For further information visit https://errors.pydantic.dev/2.12/v/missing
Nov 09 14:27:39 srv1087935 gunicorn[158046]: [2025-11-09 14:27:39 +0000] [158046] [INFO] Worker exiting (pid: 158046)
Nov 09 14:27:39 srv1087935 gunicorn[158043]: [2025-11-09 14:27:39 +0000] [158043] [ERROR] Worker (pid:158045) exited with code 3
Nov 09 14:27:39 srv1087935 gunicorn[158043]: [2025-11-09 14:27:39 +0000] [158043] [ERROR] Worker (pid:158047) was sent SIGTERM!
Nov 09 14:27:39 srv1087935 gunicorn[158043]: [2025-11-09 14:27:39 +0000] [158043] [ERROR] Worker (pid:158044) was sent SIGTERM!
Nov 09 14:27:39 srv1087935 gunicorn[158043]: [2025-11-09 14:27:39 +0000] [158043] [ERROR] Worker (pid:158046) was sent SIGTERM!
Nov 09 14:27:39 srv1087935 gunicorn[158043]: [2025-11-09 14:27:39 +0000] [158043] [ERROR] Shutting down: Master
Nov 09 14:27:39 srv1087935 gunicorn[158043]: [2025-11-09 14:27:39 +0000] [158043] [ERROR] Reason: Worker failed to boot.
Nov 09 14:27:39 srv1087935 systemd[1]: worknow-backend.service: Main process exited, code=exited, status=3/NOTIMPLEMENTED
Nov 09 14:27:39 srv1087935 systemd[1]: worknow-backend.service: Failed with result 'exit-code'.
Nov 09 14:27:39 srv1087935 systemd[1]: worknow-backend.service: Consumed 1.378s CPU time.
=== Frontend Logs ===
Nov 09 14:26:32 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:26:32 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:26:42 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 24.
Nov 09 14:26:42 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:26:42 srv1087935 node[157934]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:26:42 srv1087935 node[157934]: const express = require('express');
Nov 09 14:26:42 srv1087935 node[157934]:                 ^
Nov 09 14:26:42 srv1087935 node[157934]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:26:42 srv1087935 node[157934]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:26:42 srv1087935 node[157934]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:26:42 srv1087935 node[157934]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:26:42 srv1087935 node[157934]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:26:42 srv1087935 node[157934]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:26:42 srv1087935 node[157934]: Node.js v20.19.5
Nov 09 14:26:42 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:26:42 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:26:52 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 25.
Nov 09 14:26:52 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:26:52 srv1087935 node[157953]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:26:52 srv1087935 node[157953]: const express = require('express');
Nov 09 14:26:52 srv1087935 node[157953]:                 ^
Nov 09 14:26:52 srv1087935 node[157953]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:26:52 srv1087935 node[157953]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:26:52 srv1087935 node[157953]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:26:52 srv1087935 node[157953]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:26:52 srv1087935 node[157953]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:26:52 srv1087935 node[157953]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:26:52 srv1087935 node[157953]: Node.js v20.19.5
Nov 09 14:26:52 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:26:52 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:27:02 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 26.
Nov 09 14:27:02 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:27:02 srv1087935 node[157971]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:27:02 srv1087935 node[157971]: const express = require('express');
Nov 09 14:27:02 srv1087935 node[157971]:                 ^
Nov 09 14:27:02 srv1087935 node[157971]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:27:02 srv1087935 node[157971]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:27:02 srv1087935 node[157971]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:27:02 srv1087935 node[157971]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:27:02 srv1087935 node[157971]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:27:02 srv1087935 node[157971]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:27:02 srv1087935 node[157971]: Node.js v20.19.5
Nov 09 14:27:02 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:27:02 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:27:13 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 27.
Nov 09 14:27:13 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:27:13 srv1087935 node[157988]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:27:13 srv1087935 node[157988]: const express = require('express');
Nov 09 14:27:13 srv1087935 node[157988]:                 ^
Nov 09 14:27:13 srv1087935 node[157988]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:27:13 srv1087935 node[157988]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:27:13 srv1087935 node[157988]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:27:13 srv1087935 node[157988]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:27:13 srv1087935 node[157988]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:27:13 srv1087935 node[157988]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:27:13 srv1087935 node[157988]: Node.js v20.19.5
Nov 09 14:27:13 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:27:13 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:27:23 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 28.
Nov 09 14:27:23 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:27:23 srv1087935 node[158016]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:27:23 srv1087935 node[158016]: const express = require('express');
Nov 09 14:27:23 srv1087935 node[158016]:                 ^
Nov 09 14:27:23 srv1087935 node[158016]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:27:23 srv1087935 node[158016]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:27:23 srv1087935 node[158016]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:27:23 srv1087935 node[158016]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:27:23 srv1087935 node[158016]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:27:23 srv1087935 node[158016]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:27:23 srv1087935 node[158016]: Node.js v20.19.5
Nov 09 14:27:23 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:27:23 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:27:33 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 29.
Nov 09 14:27:33 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:27:33 srv1087935 node[158030]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:27:33 srv1087935 node[158030]: const express = require('express');
Nov 09 14:27:33 srv1087935 node[158030]:                 ^
Nov 09 14:27:33 srv1087935 node[158030]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:27:33 srv1087935 node[158030]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:27:33 srv1087935 node[158030]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:27:33 srv1087935 node[158030]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:27:33 srv1087935 node[158030]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:27:33 srv1087935 node[158030]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:27:33 srv1087935 node[158030]: Node.js v20.19.5
Nov 09 14:27:33 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:27:33 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:27:43 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 30.
Nov 09 14:27:43 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:27:43 srv1087935 node[158049]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:27:43 srv1087935 node[158049]: const express = require('express');
Nov 09 14:27:43 srv1087935 node[158049]:                 ^
Nov 09 14:27:43 srv1087935 node[158049]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:27:43 srv1087935 node[158049]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:27:43 srv1087935 node[158049]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:27:43 srv1087935 node[158049]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:27:43 srv1087935 node[158049]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:27:43 srv1087935 node[158049]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:27:43 srv1087935 node[158049]: Node.js v20.19.5
Nov 09 14:27:43 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:27:43 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `データベース設定（VPS上のローカルPostgreSQL）': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `JWT認証設定（本番用に必ず変更してください）': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `サーバー設定': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `Stripe設定（支払い機能': not a valid identifier
-bash: export: `-': not a valid identifier
-bash: export: `後で設定）': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `Firebase設定（プッシュ通知': not a valid identifier
-bash: export: `-': not a valid identifier
-bash: export: `後で設定）': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `KEY-----\nYour_Private_Key_Here\n-----END': not a valid identifier
-bash: export: `KEY-----\n': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `Redis設定（オプション）': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `メール設定（後で設定）': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `ファイルアップロード設定': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `その他の設定': not a valid identifier
-bash: export: `#': not a valid identifier
-bash: export: `========================================': not a valid identifier
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ModuleNotFoundError: No module named 'services.postgres_service'
Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/var/www/worknow/venv/lib/python3.12/site-packages/uvicorn/__main__.py", line 4, in <module>
    uvicorn.main()
  File "/var/www/worknow/venv/lib/python3.12/site-packages/click/core.py", line 1462, in __call__
    return self.main(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/www/worknow/venv/lib/python3.12/site-packages/click/core.py", line 1383, in main
    rv = self.invoke(ctx)
         ^^^^^^^^^^^^^^^^
  File "/var/www/worknow/venv/lib/python3.12/site-packages/click/core.py", line 1246, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/www/worknow/venv/lib/python3.12/site-packages/click/core.py", line 814, in invoke
    return callback(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/www/worknow/venv/lib/python3.12/site-packages/uvicorn/main.py", line 423, in main
    run(
  File "/var/www/worknow/venv/lib/python3.12/site-packages/uvicorn/main.py", line 593, in run
    server.run()
  File "/var/www/worknow/venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/var/www/worknow/venv/lib/python3.12/site-packages/uvicorn/server.py", line 71, in serve
    await self._serve(sockets)
  File "/var/www/worknow/venv/lib/python3.12/site-packages/uvicorn/server.py", line 78, in _serve
    config.load()
  File "/var/www/worknow/venv/lib/python3.12/site-packages/uvicorn/config.py", line 439, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/var/www/worknow/venv/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/importlib/__init__.py", line 90, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 995, in exec_module
  File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
  File "/var/www/worknow/backend/main.py", line 6, in <module>
    from utils.config import CFG
  File "/var/www/worknow/backend/utils/config.py", line 46, in <module>
    CFG = get_settings().model_dump()
          ^^^^^^^^^^^^^^
  File "/var/www/worknow/backend/utils/config.py", line 43, in get_settings
    return Settings()
           ^^^^^^^^^^
  File "/var/www/worknow/venv/lib/python3.12/site-packages/pydantic_settings/main.py", line 193, in __init__
    super().__init__(
  File "/var/www/worknow/venv/lib/python3.12/site-packages/pydantic/main.py", line 250, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 8 validation errors for Settings
SUPABASE_URL
  Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
SUPABASE_KEY
  Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
STRIPE_API_KEY
  Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
STRIPE_CONNECT_CLIENT_ID
  Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
FIREBASE_KEY
  Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
JWT_SECRET
  Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
DOMAIN
  Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
ADMIN_EMAIL
  Field required [type=missing, input_value={'STRIPE_WEBHOOK_SECRET':...dis://localhost:6379/0'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
(venv) root@srv1087935:/var/www/worknow/backend# ^C
(venv) root@srv1087935:/var/www/worknow/backend# # .envファイルを修正（コメント行を削除して必須変数を追加）
cd /var/www/worknow
cat > .env << 'EOF'
DATABASE_URL=postgresql://worknow_user:Change_This_Password_123!@localhost:5432/worknow_production
PGHOST=localhost
PGPORT=5432
PGDATABASE=worknow_production
PGUSER=worknow_user
PGPASSWORD=Change_This_Password_123!

SECRET_KEY=your_super_secret_jwt_key_minimum_32_characters_change_this_immediately_12345
JWT_SECRET=your_super_secret_jwt_key_minimum_32_characters_change_this_immediately_12345
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

BACKEND_URL=https://sinjapan-worknow.com/api
FRONTEND_URL=https://sinjapan-worknow.com
DOMAIN=sinjapan-worknow.com
ALLOWED_ORIGINS=https://sinjapan-worknow.com,https://www.sinjapan-worknow.com

curl -I https://sinjapan-worknow.com)'-pagerET|g" .env
✅ .envファイルを更新しました
● worknow-backend.service - Work Now Backend (FastAPI)
     Loaded: loaded (/etc/systemd/system/worknow-backend.service; enabled; preset: enabled)
     Active: active (running) since Sun 2025-11-09 14:28:34 UTC; 5s ago
   Main PID: 158160 (gunicorn)
      Tasks: 5 (limit: 9483)
     Memory: 278.9M (peak: 279.3M)
        CPU: 4.023s
     CGroup: /system.slice/worknow-backend.service
             ├─158160 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b…
             ├─158176 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b…
             ├─158177 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b…
             ├─158178 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b…
             └─158179 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b…

Nov 09 14:28:36 srv1087935 gunicorn[158176]: [2025-11-09 14:28:36 +0000] [15…te.
Nov 09 14:28:36 srv1087935 gunicorn[158177]: [2025-11-09 14:28:36 +0000] [15…77]
Nov 09 14:28:36 srv1087935 gunicorn[158177]: [2025-11-09 14:28:36 +0000] [15…up.
Nov 09 14:28:36 srv1087935 gunicorn[158177]: [2025-11-09 14:28:36 +0000] [15…te.
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [15…78]
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [15…up.
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [15…te.
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [15…79]
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [15…up.
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [15…te.
Hint: Some lines were ellipsized, use -l to show in full.
● worknow-frontend.service - Work Now Frontend (React + Vite)
     Loaded: loaded (/etc/systemd/system/worknow-frontend.service; enabled; preset: enabled)
     Active: activating (auto-restart) (Result: exit-code) since Sun 2025-11-09 14:28:34 UTC; 4s ago
    Process: 158163 ExecStart=/usr/bin/node /var/www/worknow/frontend/dist-server/server.js (code=exited, status=1/FAILURE)
   Main PID: 158163 (code=exited, status=1/FAILURE)
        CPU: 35ms
tcp        0      0 0.0.0.0:8008            0.0.0.0:*               LISTEN      158160/python3      
HTTP/2 502 
server: nginx/1.24.0 (Ubuntu)
date: Sun, 09 Nov 2025 14:28:39 GMT
content-type: text/html
content-length: 166
strict-transport-security: max-age=31536000; includeSubDomains
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff
x-xss-protection: 1; mode=block

(venv) root@srv1087935:/var/www/worknow# # フロントエンドの詳細ログを確認
journalctl -u worknow-frontend -n 50 --no-pager

# dist-serverディレクトリの確認
ls -la /var/www/worknow/frontend/dist-server/

# server.jsの内容を確認
cat /var/www/worknow/frontend/dist-server/server.js

# 手動でフロントエンドを起動してエラーを確認
cd /var/www/worknow/frontend/dist-server
node server.js
Nov 09 14:28:24 srv1087935 node[158133]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:28:24 srv1087935 node[158133]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:28:24 srv1087935 node[158133]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:28:24 srv1087935 node[158133]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:28:24 srv1087935 node[158133]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:28:24 srv1087935 node[158133]: Node.js v20.19.5
Nov 09 14:28:24 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:28:24 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:28:34 srv1087935 systemd[1]: Stopped worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:28:34 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:28:34 srv1087935 node[158163]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:28:34 srv1087935 node[158163]: const express = require('express');
Nov 09 14:28:34 srv1087935 node[158163]:                 ^
Nov 09 14:28:34 srv1087935 node[158163]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:28:34 srv1087935 node[158163]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:28:34 srv1087935 node[158163]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:28:34 srv1087935 node[158163]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:28:34 srv1087935 node[158163]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:28:34 srv1087935 node[158163]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:28:34 srv1087935 node[158163]: Node.js v20.19.5
Nov 09 14:28:34 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:28:34 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:28:44 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 35.
Nov 09 14:28:44 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:28:44 srv1087935 node[158187]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:28:44 srv1087935 node[158187]: const express = require('express');
Nov 09 14:28:44 srv1087935 node[158187]:                 ^
Nov 09 14:28:44 srv1087935 node[158187]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:28:44 srv1087935 node[158187]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:28:44 srv1087935 node[158187]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:28:44 srv1087935 node[158187]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:28:44 srv1087935 node[158187]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:28:44 srv1087935 node[158187]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:28:44 srv1087935 node[158187]: Node.js v20.19.5
Nov 09 14:28:44 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:28:44 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:28:54 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 36.
Nov 09 14:28:54 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:28:54 srv1087935 node[158200]: file:///var/www/worknow/frontend/dist-server/server.js:1
Nov 09 14:28:54 srv1087935 node[158200]: const express = require('express');
Nov 09 14:28:54 srv1087935 node[158200]:                 ^
Nov 09 14:28:54 srv1087935 node[158200]: ReferenceError: require is not defined in ES module scope, you can use import instead
Nov 09 14:28:54 srv1087935 node[158200]: This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
Nov 09 14:28:54 srv1087935 node[158200]:     at file:///var/www/worknow/frontend/dist-server/server.js:1:17
Nov 09 14:28:54 srv1087935 node[158200]:     at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
Nov 09 14:28:54 srv1087935 node[158200]:     at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
Nov 09 14:28:54 srv1087935 node[158200]:     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)
Nov 09 14:28:54 srv1087935 node[158200]: Node.js v20.19.5
Nov 09 14:28:54 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:28:54 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
total 12
drwxr-xr-x 2 www-data www-data 4096 Nov  9 14:21 .
drwxr-xr-x 6 www-data www-data 4096 Nov  9 14:21 ..
-rw-r--r-- 1 www-data www-data  430 Nov  9 14:23 server.js
const express = require('express');
const path = require('path');
const app = express();
const PORT = process.env.PORT || 20000;
const HOST = process.env.HOST || '0.0.0.0';

app.use(express.static(path.join(__dirname, '../dist')));

app.get('*', (req, res) => {
  res.sendFile(path.join(__dirname, '../dist/index.html'));
});

app.listen(PORT, HOST, () => {
  console.log(`Frontend server running on http://${HOST}:${PORT}`);
});
file:///var/www/worknow/frontend/dist-server/server.js:1
const express = require('express');
                ^

ReferenceError: require is not defined in ES module scope, you can use import instead
This file is being treated as an ES module because it has a '.js' file extension and '/var/www/worknow/frontend/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///var/www/worknow/frontend/dist-server/server.js:1:17
    at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)

Node.js v20.19.5
(venv) root@srv1087935:/var/www/worknow/frontend/dist-server# # server.jsをserver.cjsにリネーム
cd /var/www/worknow/frontend/dist-server
mv server.js server.cjs

# systemdサービスファイルも更新
cat > /etc/systemd/system/worknow-frontend.service << 'EOF'
[Unit]
Description=Work Now Frontend (React + Vite)
After=network.target

[Service]
Type=simple
User=www-data
Group=www-data
WorkingDirectory=/var/www/worknow/frontend
Environment="PATH=/usr/bin:/usr/local/bin"
Environment="NODE_ENV=production"
Environment="PORT=20000"
Environment="HOST=0.0.0.0"
ExecStart=/usr/bin/node /var/www/worknow/frontend/dist-server/server.cjs
Restart=always
RestartSec=10

curl -I https://sinjapan-worknow.com)'-pager
● worknow-frontend.service - Work Now Frontend (React + Vite)
     Loaded: loaded (/etc/systemd/system/worknow-frontend.service; enabled; preset: enabled)
     Active: activating (auto-restart) (Result: exit-code) since Sun 2025-11-09 14:29:28 UTC; 2s ago
    Process: 158319 ExecStart=/usr/bin/node /var/www/worknow/frontend/dist-server/server.cjs (code=exited, status=1/FAILURE)
   Main PID: 158319 (code=exited, status=1/FAILURE)
        CPU: 146ms

Nov 09 14:29:28 srv1087935 systemd[1]: worknow-frontend.service: Failed wit…de'.
Hint: Some lines were ellipsized, use -l to show in full.
tcp        0      0 0.0.0.0:8008            0.0.0.0:*               LISTEN      158160/python3      
HTTP/2 502 
server: nginx/1.24.0 (Ubuntu)
date: Sun, 09 Nov 2025 14:29:32 GMT
content-type: text/html
content-length: 166
strict-transport-security: max-age=31536000; includeSubDomains
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff
x-xss-protection: 1; mode=block

(venv) root@srv1087935:/var/www/worknow/frontend/dist-server# cd /var/www/worknow/frontend

# expressがインストールされているか確認
npm list express

# もしなければインストール
npm install express --save

# node_modulesの所有者を確認・修正
chown -R www-data:www-data /var/www/worknow/frontend/node_modules

# 再度手動起動テスト
cd dist-server
node server.cjs
frontend@0.0.0 /var/www/worknow/frontend
└── express@5.1.0


up to date, audited 131 packages in 907ms

23 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
/var/www/worknow/frontend/node_modules/path-to-regexp/dist/index.js:96
            throw new PathError(`Missing parameter name at index ${index}`, str);
            ^

PathError [TypeError]: Missing parameter name at index 1: *; visit https://git.new/pathToRegexpError for info
    at name (/var/www/worknow/frontend/node_modules/path-to-regexp/dist/index.js:96:19)
    at parse (/var/www/worknow/frontend/node_modules/path-to-regexp/dist/index.js:113:68)
    at pathToRegexp (/var/www/worknow/frontend/node_modules/path-to-regexp/dist/index.js:267:58)
    at Object.match (/var/www/worknow/frontend/node_modules/path-to-regexp/dist/index.js:237:30)
    at matcher (/var/www/worknow/frontend/node_modules/router/lib/layer.js:86:23)
    at new Layer (/var/www/worknow/frontend/node_modules/router/lib/layer.js:93:62)
    at Function.route (/var/www/worknow/frontend/node_modules/router/index.js:428:17)
    at Function.route (/var/www/worknow/frontend/node_modules/express/lib/application.js:257:22)
    at app.<computed> [as get] (/var/www/worknow/frontend/node_modules/express/lib/application.js:478:22)
    at Object.<anonymous> (/var/www/worknow/frontend/dist-server/server.cjs:9:5) {
  originalPath: '*'
}

Node.js v20.19.5
(venv) root@srv1087935:/var/www/worknow/frontend/dist-server# # server.cjsを修正 
cat > /var/www/worknow/frontend/dist-server/server.cjs << 'EOF'
const express = require('express');
const path = require('path');
const app = express();
const PORT = process.env.PORT || 20000;
const HOST = process.env.HOST || '0.0.0.0';

// 静的ファイルの配信
app.use(express.static(path.join(__dirname, '../dist')));

// すべてのルートをindex.htmlにリダイレクト（SPA対応）
app.use((req, res) => {
  res.sendFile(path.join(__dirname, '../dist/index.html'));
});

app.listen(PORT, HOST, () => {
  console.log(`Frontend server running on http://${HOST}:${PORT}`);
});
EOF

# 権限を設定
node /var/www/worknow/frontend/dist-server/server.cjst-server/server.cjs
Frontend server running on http://0.0.0.0:20000
^C
(venv) root@srv1087935:/var/www/worknow/frontend/dist-server# # サービスを再起動 
systemctl restart worknow-frontend

# ステータス確認
systemctl status worknow-frontend --no-pager

# ポートがリッスンされているか確認
netstat -tlnp | grep -E '(20000|8008)'

# HTTPSでアクセステスト
curl -I https://sinjapan-worknow.com
● worknow-frontend.service - Work Now Frontend (React + Vite)
     Loaded: loaded (/etc/systemd/system/worknow-frontend.service; enabled; preset: enabled)
     Active: active (running) since Sun 2025-11-09 14:31:07 UTC; 9ms ago
   Main PID: 158456 (node)
      Tasks: 6 (limit: 9483)
     Memory: 1.6M (peak: 1.8M)
        CPU: 6ms
     CGroup: /system.slice/worknow-frontend.service
             └─158456 /usr/bin/node /var/www/worknow/frontend/dist-server/serve…

Nov 09 14:31:07 srv1087935 systemd[1]: Started worknow-frontend.service - W…te).
Hint: Some lines were ellipsized, use -l to show in full.
tcp        0      0 0.0.0.0:8008            0.0.0.0:*               LISTEN      158160/python3      
HTTP/2 404 
server: nginx/1.24.0 (Ubuntu)
date: Sun, 09 Nov 2025 14:31:07 GMT
content-type: text/html; charset=utf-8
content-length: 136
x-powered-by: Express
content-security-policy: default-src 'none'
x-content-type-options: nosniff
strict-transport-security: max-age=31536000; includeSubDomains
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff
x-xss-protection: 1; mode=block

(venv) root@srv1087935:/var/www/worknow/frontend/dist-server# # distディレクトリの確認
ls -la /var/www/worknow/frontend/dist/

# もしdistが存在しない、または空の場合はビルド
cd /var/www/worknow/frontend
npm run build

# ビルド後、distディレクトリの内容を確認
ls -la dist/

# サービスを再起動
systemctl restart worknow-frontend

# 最終確認
echo "=== All Services Status ==="
systemctl status worknow-backend worknow-frontend nginx --no-pager

echo "=== Port Check ==="
netstat -tlnp | grep -E '(20000|8008|80|443)'

echo "=== HTTPS Access Test ==="
curl -I https://sinjapan-worknow.com

curl -I https://sinjapan-worknow.com/api/docs
ls: cannot access '/var/www/worknow/frontend/dist/': No such file or directory

> frontend@0.0.0 build
> tsc -b && vite build

sh: 1: tsc: not found
ls: cannot access 'dist/': No such file or directory
=== All Services Status ===
● worknow-backend.service - Work Now Backend (FastAPI)
     Loaded: loaded (/etc/systemd/system/worknow-backend.service; enabled; preset: enabled)
     Active: active (running) since Sun 2025-11-09 14:28:34 UTC; 2min 58s ago
   Main PID: 158160 (gunicorn)
      Tasks: 5 (limit: 9483)
     Memory: 278.9M (peak: 279.3M)
        CPU: 5.071s
     CGroup: /system.slice/worknow-backend.service
             ├─158160 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b…
             ├─158176 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b…
             ├─158177 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b…
             ├─158178 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b…
             └─158179 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b…

Nov 09 14:28:36 srv1087935 gunicorn[158176]: [2025-11-09 14:28:36 +0000] [15…te.
Nov 09 14:28:36 srv1087935 gunicorn[158177]: [2025-11-09 14:28:36 +0000] [15…77]
Nov 09 14:28:36 srv1087935 gunicorn[158177]: [2025-11-09 14:28:36 +0000] [15…up.
Nov 09 14:28:36 srv1087935 gunicorn[158177]: [2025-11-09 14:28:36 +0000] [15…te.
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [15…78]
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [15…up.
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [15…te.
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [15…79]
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [15…up.
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [15…te.

● worknow-frontend.service - Work Now Frontend (React + Vite)
     Loaded: loaded (/etc/systemd/system/worknow-frontend.service; enabled; preset: enabled)
     Active: active (running) since Sun 2025-11-09 14:31:33 UTC; 13ms ago
   Main PID: 158492 (node)
      Tasks: 6 (limit: 9483)
     Memory: 2.8M (peak: 2.8M)
        CPU: 11ms
     CGroup: /system.slice/worknow-frontend.service
             └─158492 /usr/bin/node /var/www/worknow/frontend/dist-server/serve…

Nov 09 14:31:33 srv1087935 systemd[1]: Started worknow-frontend.service - W…te).

● nginx.service - A high performance web server and a reverse proxy server
     Loaded: loaded (/usr/lib/systemd/system/nginx.service; enabled; preset: enabled)
     Active: active (running) since Sun 2025-11-09 14:27:16 UTC; 4min 16s ago
       Docs: man:nginx(8)
   Main PID: 158005 (nginx)
      Tasks: 3 (limit: 9483)
     Memory: 5.6M (peak: 6.2M)
        CPU: 97ms
     CGroup: /system.slice/nginx.service
             ├─158005 "nginx: master process /usr/sbin/nginx -g daemon on; mast…
             ├─158006 "nginx: worker process"
             └─158007 "nginx: worker process"

Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…m:12
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 nginx[158004]: 2025/11/09 14:27:16 [warn] 158004…ored
Nov 09 14:27:16 srv1087935 systemd[1]: Started nginx.service - A high perfo…ver.
Hint: Some lines were ellipsized, use -l to show in full.
=== Port Check ===
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      158005/nginx: maste 
tcp        0      0 0.0.0.0:443             0.0.0.0:*               LISTEN      158005/nginx: maste 
tcp        0      0 0.0.0.0:8008            0.0.0.0:*               LISTEN      158160/python3      
tcp        0      0 0.0.0.0:8000            0.0.0.0:*               LISTEN      136414/node         
tcp6       0      0 :::80                   :::*                    LISTEN      158005/nginx: maste 
tcp6       0      0 :::443                  :::*                    LISTEN      158005/nginx: maste 
=== HTTPS Access Test ===
HTTP/2 502 
server: nginx/1.24.0 (Ubuntu)
date: Sun, 09 Nov 2025 14:31:33 GMT
content-type: text/html
content-length: 166
strict-transport-security: max-age=31536000; includeSubDomains
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff
x-xss-protection: 1; mode=block

=== API Docs Test ===
HTTP/2 404 
server: nginx/1.24.0 (Ubuntu)
date: Sun, 09 Nov 2025 14:31:33 GMT
content-type: application/json
content-length: 22
strict-transport-security: max-age=31536000; includeSubDomains
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff
x-xss-protection: 1; mode=block

(venv) root@srv1087935:/var/www/worknow/frontend# ^C
(venv) root@srv1087935:/var/www/worknow/frontend# # フロントエンドのログを確認
journalctl -u worknow-frontend -n 30 --no-pager   # フロントエンドのログを確認
journalctl -u worknow-frontend -n 30 --no-pager
# フロントエンドのプロセスを確認
# フロントエンドのプロセスを確認
ps aux | grep node
# distディレクトリが存在するか確認
# distディレクトリが存在するか確認ist/
ls -la /var/www/worknow/frontend/dist/
# もしdistが空の場合はビルド
# もしdistが空の場合はビルド
cd /var/www/worknow/frontend
npm run build
# ビルド完了後、権限を設定
# ビルド完了後、権限を設定 /var/www/worknow/frontend
chown -R www-data:www-data /var/www/worknow/frontend
# サービスを再起動
# サービスを再起動worknow-frontend
systemctl restart worknow-frontend
# 数秒待ってポートを確認
# 数秒待ってポートを確認
sleep 3 -tlnp | grep 20000
netstat -tlnp | grep 20000
# もしまだポートが開かれていない場合、手動起動でテスト
# もしまだポートが開かれていない場合、手動起動でテストerver/server.cjs
sudo -u www-data node /var/www/worknow/frontend/dist-server/server.cjs
Nov 09 14:30:40 srv1087935 node[158419]:     at matcher (/var/www/worknow/frontend/node_modules/router/lib/layer.js:86:23)
Nov 09 14:30:40 srv1087935 node[158419]:     at new Layer (/var/www/worknow/frontend/node_modules/router/lib/layer.js:93:62)
Nov 09 14:30:40 srv1087935 node[158419]:     at Function.route (/var/www/worknow/frontend/node_modules/router/index.js:428:17)
Nov 09 14:30:40 srv1087935 node[158419]:     at Function.route (/var/www/worknow/frontend/node_modules/express/lib/application.js:257:22)
Nov 09 14:30:40 srv1087935 node[158419]:     at app.<computed> [as get] (/var/www/worknow/frontend/node_modules/express/lib/application.js:478:22)
Nov 09 14:30:40 srv1087935 node[158419]:     at Object.<anonymous> (/var/www/worknow/frontend/dist-server/server.cjs:9:5) {
Nov 09 14:30:40 srv1087935 node[158419]:   originalPath: '*'
Nov 09 14:30:40 srv1087935 node[158419]: }
Nov 09 14:30:40 srv1087935 node[158419]: Node.js v20.19.5
Nov 09 14:30:40 srv1087935 systemd[1]: worknow-frontend.service: Main process exited, code=exited, status=1/FAILURE
Nov 09 14:30:40 srv1087935 systemd[1]: worknow-frontend.service: Failed with result 'exit-code'.
Nov 09 14:30:50 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 47.
Nov 09 14:30:50 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:30:50 srv1087935 node[158437]: Frontend server running on http://0.0.0.0:20000
Nov 09 14:30:51 srv1087935 systemd[1]: worknow-frontend.service: Deactivated successfully.
Nov 09 14:31:01 srv1087935 systemd[1]: worknow-frontend.service: Scheduled restart job, restart counter is at 48.
Nov 09 14:31:01 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:31:01 srv1087935 node[158445]: Frontend server running on http://0.0.0.0:20000
Nov 09 14:31:01 srv1087935 systemd[1]: worknow-frontend.service: Deactivated successfully.
Nov 09 14:31:07 srv1087935 systemd[1]: Stopped worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:31:07 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:31:07 srv1087935 node[158456]: Frontend server running on http://0.0.0.0:20000
Nov 09 14:31:07 srv1087935 node[158456]: Error: ENOENT: no such file or directory, stat '/var/www/worknow/frontend/dist/index.html'
Nov 09 14:31:15 srv1087935 node[158456]: Error: ENOENT: no such file or directory, stat '/var/www/worknow/frontend/dist/index.html'
Nov 09 14:31:33 srv1087935 systemd[1]: Stopping worknow-frontend.service - Work Now Frontend (React + Vite)...
Nov 09 14:31:33 srv1087935 systemd[1]: worknow-frontend.service: Deactivated successfully.
Nov 09 14:31:33 srv1087935 systemd[1]: Stopped worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:31:33 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:31:33 srv1087935 node[158492]: Frontend server running on http://0.0.0.0:20000
Nov 09 14:31:40 srv1087935 node[158492]: Error: ENOENT: no such file or directory, stat '/var/www/worknow/frontend/dist/index.html'
root      122941  0.1  1.2 11808884 101124 ?     Ssl  Nov08   3:45 node /var/www/sinjapan-onlineschool-ver2/dist/index.js
root      136402  0.0  0.6 1025056 55676 ?       Ssl  Nov08   0:00 node /usr/bin/tsx /var/www/sinjapan-manager/server/index.ts
root      136414  0.0  2.4 54690188 202780 ?     Sl   Nov08   0:33 /usr/bin/nod --require /usr/lib/node_modules/tsx/dist/preflight.cjs --import file:///usr/lib/node_modules/tsx/dist/loader.mjs /var/www/sinjapan-manager/server/index.ts
root      136426  0.0  0.0 1236776 6144 ?        Sl   Nov08   1:14 /usr/lib/nod_modules/tsx/node_modules/@esbuild/linux-x64/bin/esbuild --service=0.25.12 --ping
root      151294  1.2  6.7 55334052 547968 ?     Ssl  13:58   0:25 node /var/www/poker/start.js
root      151578  0.2  1.3 22561056 110116 ?     Sl   14:03   0:04 node /root/only-u-ver3/dist/index.js
www-data  158492  0.6  0.6 1026684 53748 ?       Ssl  14:31   0:00 /usr/bin/nod /var/www/worknow/frontend/dist-server/server.cjs
root      158515  0.0  0.0   7076  2176 pts/0    S+   14:32   0:00 grep --color=auto node
ls: cannot access '/var/www/worknow/frontend/dist/': No such file or directory

> frontend@0.0.0 build
> tsc -b && vite build

sh: 1: tsc: not found
tcp        0      0 0.0.0.0:20000           0.0.0.0:*               LISTEN      158534/node         
Frontend server running on http://0.0.0.0:20000
(venv) root@srv1087935:/var/www/worknow/frontend# cd /var/www/worknow/frontend

# node_modulesとpackage-lock.jsonをクリーンアップ
rm -rf node_modules package-lock.json

# 依存関係を完全に再インストール
npm install

# TypeScriptが正しくインストールされたか確認
npx tsc --version

# ビルドを実行
npm run build

# distディレクトリが作成されたか確認
ls -la dist/
ls -la dist/index.html

# 権限を設定
chown -R www-data:www-data /var/www/worknow/frontend

# フロントエンドサービスを再起動
systemctl restart worknow-frontend

curl -I https://sinjapan-worknow.com)'

added 124 packages, and audited 125 packages in 40s

23 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
Need to install the following packages:
tsc@2.0.4
Ok to proceed? (y) y


                                                                               
                This is not the tsc command you are looking for                
                                                                               

To get access to the TypeScript compiler, tsc, from the command line either:

- Use npm install typescript to first add TypeScript to your project before using npx
- Use yarn to avoid accidentally running code from un-installed packages

> frontend@0.0.0 build
> tsc -b && vite build

sh: 1: tsc: not found
ls: cannot access 'dist/': No such file or directory
ls: cannot access 'dist/index.html': No such file or directory
tcp        0      0 0.0.0.0:20000           0.0.0.0:*               LISTEN      158609/node         
tcp        0      0 0.0.0.0:8008            0.0.0.0:*               LISTEN      158160/python3      
HTTP/2 404 
server: nginx/1.24.0 (Ubuntu)
date: Sun, 09 Nov 2025 14:33:25 GMT
content-type: text/html; charset=utf-8
content-length: 136
x-powered-by: Express
content-security-policy: default-src 'none'
x-content-type-options: nosniff
strict-transport-security: max-age=31536000; includeSubDomains
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff
x-xss-protection: 1; mode=block

(venv) root@srv1087935:/var/www/worknow/frontend# cd /var/www/worknow/frontend

# TypeScriptとViteを開発依存関係としてインストール
npm install --save-dev typescript @types/node vite

# package.jsonを確認
cat package.json | grep -A 10 '"devDependencies"'

# 再度ビルド
npm run build

# ビルドが成功したか確認
ls -la dist/
ls -la dist/index.html

# 成功したらサービスを再起動
systemctl restart worknow-frontend

# 最終確認
sleep 3
netstat -tlnp | grep -E '(20000|8008)'
curl -I https://sinjapan-worknow.com

up to date, audited 125 packages in 1s

23 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
  "devDependencies": {
    "@eslint/js": "^9.36.0",
    "@types/node": "^24.10.0",
    "@types/react": "^19.1.16",
    "@types/react-dom": "^19.1.9",
    "@vitejs/plugin-react": "^5.0.4",
    "autoprefixer": "^10.4.20",
    "eslint": "^9.36.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.22",
    "globals": "^16.4.0",

> frontend@0.0.0 build
> tsc -b && vite build

sh: 1: tsc: not found
ls: cannot access 'dist/': No such file or directory
ls: cannot access 'dist/index.html': No such file or directory
tcp        0      0 0.0.0.0:20000           0.0.0.0:*               LISTEN      158658/node         
tcp        0      0 0.0.0.0:8008            0.0.0.0:*               LISTEN      158160/python3      
HTTP/2 404 
server: nginx/1.24.0 (Ubuntu)
date: Sun, 09 Nov 2025 14:33:50 GMT
content-type: text/html; charset=utf-8
content-length: 136
x-powered-by: Express
content-security-policy: default-src 'none'
x-content-type-options: nosniff
strict-transport-security: max-age=31536000; includeSubDomains
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff
x-xss-protection: 1; mode=block

(venv) root@srv1087935:/var/www/worknow/frontend# cd /var/www/worknow/frontend

# TypeScriptが実際にインストールされているか確認
ls -la node_modules/.bin/tsc

# npxを使って明示的にビルド
npx tsc -b && npx vite build

# または、package.jsonのビルドスクリプトを一時的に修正
cat > package.json.tmp << 'EOF'
{
  "scripts": {
    "build": "npx tsc -b && npx vite build"
  }
}
EOF

# 実際のpackage.jsonのビルドスクリプト部分だけ置き換える
sed -i 's/"tsc -b && vite build"/"npx tsc -b \&\& npx vite build"/' package.json 

# 再度ビルド
npm run build

curl https://sinjapan-worknow.comd
ls: cannot access 'node_modules/.bin/tsc': No such file or directory

                                                                               
                This is not the tsc command you are looking for                
                                                                               

To get access to the TypeScript compiler, tsc, from the command line either:

- Use npm install typescript to first add TypeScript to your project before using npx
- Use yarn to avoid accidentally running code from un-installed packages

> frontend@0.0.0 build
> npx tsc -b && npx vite build


                                                                               
                This is not the tsc command you are looking for                
                                                                               

To get access to the TypeScript compiler, tsc, from the command line either:

- Use npm install typescript to first add TypeScript to your project before using npx
- Use yarn to avoid accidentally running code from un-installed packages
ls: cannot access 'dist/': No such file or directory
ls: cannot access 'dist/index.html': No such file or directory
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Not Found</pre>
</body>
</html>
(venv) root@srv1087935:/var/www/worknow/frontend# cd /var/www/worknow/frontend

# TypeScriptを明示的にインストール
npm install typescript --save-dev

# node_modulesにtscが存在するか確認
ls -la node_modules/.bin/tsc

# ビルドを実行
npm run build

# 成功したか確認
ls -la dist/
ls -la dist/index.html

up to date, audited 125 packages in 1s

23 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
ls: cannot access 'node_modules/.bin/tsc': No such file or directory

> frontend@0.0.0 build
> npx tsc -b && npx vite build


                                                                               
                This is not the tsc command you are looking for                
                                                                               

To get access to the TypeScript compiler, tsc, from the command line either:

- Use npm install typescript to first add TypeScript to your project before using npx
- Use yarn to avoid accidentally running code from un-installed packages
ls: cannot access 'dist/': No such file or directory
ls: cannot access 'dist/index.html': No such file or directory
(venv) root@srv1087935:/var/www/worknow/frontend# cd /var/www/worknow/frontend

# TypeScriptを明示的にインストール
npm install typescript --save-dev

# インストールされたか確認
./node_modules/.bin/tsc --version

# ビルドを実行（エラーを無視してビルド）
npm run build -- --skipLibCheck || echo "TypeScriptエラーがありますが続行します" 

# それでも失敗する場合は、tscをスキップしてViteのみでビルド
npx vite build

# distディレクトリが作成されたか確認
ls -la dist/
ls -la dist/index.html

# 成功したらサービスを再起動
systemctl restart worknow-frontend

# 最終確認
sleep 3
curl https://sinjapan-worknow.com

up to date, audited 125 packages in 1s

23 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
-bash: ./node_modules/.bin/tsc: No such file or directory

> frontend@0.0.0 build
> npx tsc -b && npx vite build --skipLibCheck


                                                                               
                This is not the tsc command you are looking for                
                                                                               

To get access to the TypeScript compiler, tsc, from the command line either:

- Use npm install typescript to first add TypeScript to your project before using npx
- Use yarn to avoid accidentally running code from un-installed packages
TypeScriptエラーがありますが続行します
Need to install the following packages:
vite@7.2.2
Ok to proceed? (y) y

failed to load config from /var/www/worknow/frontend/vite.config.ts
error during build:
Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'vite' imported from /var/www/worknow/frontend/node_modules/.vite-temp/vite.config.ts.timestamp-1762699006085-3919b2c032a08.mjs
    at packageResolve (node:internal/modules/esm/resolve:873:9)
    at moduleResolve (node:internal/modules/esm/resolve:946:18)
    at defaultResolve (node:internal/modules/esm/resolve:1188:11)
    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:168:49)
ls: cannot access 'dist/': No such file or directory
ls: cannot access 'dist/index.html': No such file or directory
tcp        0      0 0.0.0.0:20000           0.0.0.0:*               LISTEN      158898/node         
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Not Found</pre>
</body>
</html>
(venv) root@srv1087935:/var/www/worknow/frontend# ls -la dist/
ls -la dist/index.html
# 権限を設定
chown -R www-data:www-data /var/www/worknow/frontend
# サービスを再起動
systemctl restart worknow-frontend
# 数秒待ってから最終確認
sleep 5
echo "=== すべてのサービスの状態 ==="
systemctl status worknow-backend worknow-frontend nginx --no-pager | head -20
echo "=== ポート確認 ==="
netstat -tlnp | grep -E '(20000|8008|80|443)'
echo "=== HTTPSアクセステスト ==="
curl -I https://sinjapan-worknow.com
echo "=== APIドキュメント ==="
curl -I https://sinjapan-worknow.com/api/docs
ls: cannot access 'dist/': No such file or directory
ls: cannot access 'dist/index.html': No such file or directory
=== すべてのサービスの状態 ===
● worknow-backend.service - Work Now Backend (FastAPI)
     Loaded: loaded (/etc/systemd/system/worknow-backend.service; enabled; preset: enabled)
     Active: active (running) since Sun 2025-11-09 14:28:34 UTC; 8min ago
   Main PID: 158160 (gunicorn)
      Tasks: 5 (limit: 9483)
     Memory: 279.0M (peak: 279.4M)
        CPU: 6.756s
     CGroup: /system.slice/worknow-backend.service
             ├─158160 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/bin/gunicorn main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:8008 --timeout 120 --access-logfile - --error-logfile -
             ├─158176 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/bin/gunicorn main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:8008 --timeout 120 --access-logfile - --error-logfile -
             ├─158177 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/bin/gunicorn main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:8008 --timeout 120 --access-logfile - --error-logfile -
             ├─158178 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/bin/gunicorn main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:8008 --timeout 120 --access-logfile - --error-logfile -
             └─158179 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/bin/gunicorn main:app --workers 4 --worker-class uvicorn.workers.UvicornWorker --bind 0.0.0.0:8008 --timeout 120 --access-logfile - --error-logfile -

Nov 09 14:28:36 srv1087935 gunicorn[158177]: [2025-11-09 14:28:36 +0000] [158177] [INFO] Started server process [158177]
Nov 09 14:28:36 srv1087935 gunicorn[158177]: [2025-11-09 14:28:36 +0000] [158177] [INFO] Waiting for application startup.
Nov 09 14:28:36 srv1087935 gunicorn[158177]: [2025-11-09 14:28:36 +0000] [158177] [INFO] Application startup complete.
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [158178] [INFO] Started server process [158178]
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [158178] [INFO] Waiting for application startup.
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [158178] [INFO] Application startup complete.
=== ポート確認 ===
tcp        0      0 0.0.0.0:80              0.0.0.0:*               LISTEN      158005/nginx: maste 
tcp        0      0 0.0.0.0:443             0.0.0.0:*               LISTEN      158005/nginx: maste 
tcp        0      0 0.0.0.0:20000           0.0.0.0:*               LISTEN      158921/node         
tcp        0      0 0.0.0.0:8008            0.0.0.0:*               LISTEN      158160/python3      
tcp        0      0 0.0.0.0:8000            0.0.0.0:*               LISTEN      136414/node         
tcp6       0      0 :::80                   :::*                    LISTEN      158005/nginx: maste 
tcp6       0      0 :::443                  :::*                    LISTEN      158005/nginx: maste 
=== HTTPSアクセステスト ===
HTTP/2 404 
server: nginx/1.24.0 (Ubuntu)
date: Sun, 09 Nov 2025 14:37:00 GMT
content-type: text/html; charset=utf-8
content-length: 136
x-powered-by: Express
content-security-policy: default-src 'none'
x-content-type-options: nosniff
strict-transport-security: max-age=31536000; includeSubDomains
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff
x-xss-protection: 1; mode=block

=== APIドキュメント ===
HTTP/2 404 
server: nginx/1.24.0 (Ubuntu)
date: Sun, 09 Nov 2025 14:37:00 GMT
content-type: application/json
content-length: 22
strict-transport-security: max-age=31536000; includeSubDomains
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff
x-xss-protection: 1; mode=block

(venv) root@srv1087935:/var/www/worknow/frontend# # distディレクトリの内容を確認 
ls -la /var/www/worknow/frontend/dist/

# index.htmlが存在するか確認
cat /var/www/worknow/frontend/dist/index.html | head -20

# フロントエンドのログを確認
journalctl -u worknow-frontend -n 30 --no-pager

# もしdistが空または存在しない場合、再度ビルド
cd /var/www/worknow/frontend

# viteを使って直接ビルド（tscをスキップ）
npx vite build --force

# ビルド成功後
ls -la dist/
systemctl restart worknow-frontend

# 最終確認
sleep 3
curl https://sinjapan-worknow.com
ls: cannot access '/var/www/worknow/frontend/dist/': No such file or directory
cat: /var/www/worknow/frontend/dist/index.html: No such file or directory
Nov 09 14:33:19 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:33:20 srv1087935 node[158609]: Frontend server running on http://0.0.0.0:20000
Nov 09 14:33:25 srv1087935 node[158609]: Error: ENOENT: no such file or directory, stat '/var/www/worknow/frontend/dist/index.html'
Nov 09 14:33:31 srv1087935 node[158609]: Error: ENOENT: no such file or directory, stat '/var/www/worknow/frontend/dist/index.html'
Nov 09 14:33:46 srv1087935 systemd[1]: Stopping worknow-frontend.service - Work Now Frontend (React + Vite)...
Nov 09 14:33:46 srv1087935 systemd[1]: worknow-frontend.service: Deactivated successfully.
Nov 09 14:33:46 srv1087935 systemd[1]: Stopped worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:33:46 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:33:47 srv1087935 node[158658]: Frontend server running on http://0.0.0.0:20000
Nov 09 14:33:50 srv1087935 node[158658]: Error: ENOENT: no such file or directory, stat '/var/www/worknow/frontend/dist/index.html'
Nov 09 14:34:21 srv1087935 systemd[1]: Stopping worknow-frontend.service - Work Now Frontend (React + Vite)...
Nov 09 14:34:21 srv1087935 systemd[1]: worknow-frontend.service: Deactivated successfully.
Nov 09 14:34:21 srv1087935 systemd[1]: Stopped worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:34:21 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:34:21 srv1087935 node[158736]: Frontend server running on http://0.0.0.0:20000
Nov 09 14:34:24 srv1087935 node[158736]: Error: ENOENT: no such file or directory, stat '/var/www/worknow/frontend/dist/index.html'
Nov 09 14:35:25 srv1087935 node[158736]: Error: ENOENT: no such file or directory, stat '/var/www/worknow/frontend/dist/index.html'
Nov 09 14:36:46 srv1087935 systemd[1]: Stopping worknow-frontend.service - Work Now Frontend (React + Vite)...
Nov 09 14:36:46 srv1087935 systemd[1]: worknow-frontend.service: Deactivated successfully.
Nov 09 14:36:46 srv1087935 systemd[1]: Stopped worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:36:46 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:36:46 srv1087935 node[158898]: Frontend server running on http://0.0.0.0:20000
Nov 09 14:36:49 srv1087935 node[158898]: Error: ENOENT: no such file or directory, stat '/var/www/worknow/frontend/dist/index.html'
Nov 09 14:36:55 srv1087935 systemd[1]: Stopping worknow-frontend.service - Work Now Frontend (React + Vite)...
Nov 09 14:36:55 srv1087935 systemd[1]: worknow-frontend.service: Deactivated successfully.
Nov 09 14:36:55 srv1087935 systemd[1]: Stopped worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:36:55 srv1087935 systemd[1]: Started worknow-frontend.service - Work Now Frontend (React + Vite).
Nov 09 14:36:55 srv1087935 node[158921]: Frontend server running on http://0.0.0.0:20000
Nov 09 14:37:00 srv1087935 node[158921]: Error: ENOENT: no such file or directory, stat '/var/www/worknow/frontend/dist/index.html'
Nov 09 14:37:07 srv1087935 node[158921]: Error: ENOENT: no such file or directory, stat '/var/www/worknow/frontend/dist/index.html'
file:///root/.npm/_npx/9ed06546b0653f96/node_modules/vite/dist/node/cli.js:311
			for (const name of Object.keys(options)) if (name !== "--" && !this.hasOption(name) && !globalCommand.hasOption(name)) throw new CACError(`Unknown option \`${name.length > 1 ? `--${name}` : `-${name}`}\``);
			                                                                                                                             ^

CACError: Unknown option `--force`
    at Command.checkUnknownOptions (file:///root/.npm/_npx/9ed06546b0653f96/node_modules/vite/dist/node/cli.js:311:129)
    at CAC.runMatchedCommand (file:///root/.npm/_npx/9ed06546b0653f96/node_modules/vite/dist/node/cli.js:473:11)
    at CAC.parse (file:///root/.npm/_npx/9ed06546b0653f96/node_modules/vite/dist/node/cli.js:430:17)
    at file:///root/.npm/_npx/9ed06546b0653f96/node_modules/vite/dist/node/cli.js:695:5
    at ModuleJob.run (node:internal/modules/esm/module_job:325:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:606:24)

Node.js v20.19.5
ls: cannot access 'dist/': No such file or directory
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Not Found</pre>
</body>
</html>
(venv) root@srv1087935:/var/www/worknow/frontend# cd /var/www/worknow/frontend

# package.jsonのビルドスクリプトを一時的に変更（tscをスキップ）
# 元のスクリプト: "tsc -b && vite build"
# 新しいスクリプト: "vite build"

# sedで置き換え
sed -i 's/"build": ".*"/"build": "vite build"/' package.json

# ビルドスクリプトを確認
grep '"build"' package.json

# ビルドを実行
npm run build

# ビルド成功後、distディレクトリを確認
ls -la dist/
ls -la dist/index.html

# 権限を設定
chown -R www-data:www-data dist/

# サービスを再起動
curl https://sinjapan-worknow.com | head -20
    "build": "vite build",

> frontend@0.0.0 build
> vite build

sh: 1: vite: not found
ls: cannot access 'dist/': No such file or directory
ls: cannot access 'dist/index.html': No such file or directory
chown: cannot access 'dist/': No such file or directory
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   136  100   136    0     0   3388      0 --:--:-- --:--:-- --:--:--  3400
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Not Found</pre>
</body>
</html>
(venv) root@srv1087935:/var/www/worknow/frontend# cd /var/www/worknow/frontend

# package.jsonのビルドスクリプトをnpx付きに変更
sed -i 's/"build": "vite build"/"build": "npx vite build"/' package.json

# 確認
grep '"build"' package.json

# 再度ビルド
npm run build

# ビルド成功後
ls -la dist/
ls -la dist/index.html

# 権限を設定
chown -R www-data:www-data dist/

# サービスを再起動
systemctl restart worknow-frontend

# 最終確認
sleep 5
echo "=== ポート確認 ==="
curl https://sinjapan-worknow.com/api/docs | head -20
    "build": "npx vite build",

> frontend@0.0.0 build
> npx vite build

failed to load config from /var/www/worknow/frontend/vite.config.ts
error during build:
Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'vite' imported from /var/www/worknow/frontend/node_modules/.vite-temp/vite.config.ts.timestamp-1762699101571-a207e0b57b9f3.mjs
    at packageResolve (node:internal/modules/esm/resolve:873:9)
    at moduleResolve (node:internal/modules/esm/resolve:946:18)
    at defaultResolve (node:internal/modules/esm/resolve:1188:11)
    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:168:49)
ls: cannot access 'dist/': No such file or directory
ls: cannot access 'dist/index.html': No such file or directory
chown: cannot access 'dist/': No such file or directory
=== ポート確認 ===
tcp        0      0 0.0.0.0:20000           0.0.0.0:*               LISTEN      159078/node         
=== HTTPSアクセステスト ===
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   136  100   136    0     0   3940      0 --:--:-- --:--:-- --:--:--  4000
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Not Found</pre>
</body>
</html>
=== API確認 ===
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100    22  100    22    0     0    820      0 --:--:-- --:--:-- --:--:--   846
{"detail":"Not Found"}(venv) root@srv1087935:/var/www/worknow/frontend# cd /var/(venv) root@srv1087935:/var/www/worknow/frontend# cd /var/www/worknow/frontend

# 完全クリーンアップ
rm -rf node_modules package-lock.json .vite

# 依存関係を再インストール
npm install

# viteがインストールされたか確認
npm list vite

# ビルド実行
npm run build

# 成功したか確認
ls -la dist/

# サービス再起動
systemctl restart worknow-frontend
sleep 3
curl https://sinjapan-worknow.com | head -30

added 124 packages, and audited 125 packages in 40s

23 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
frontend@0.0.0 /var/www/worknow/frontend
└── (empty)


> frontend@0.0.0 build
> npx vite build

failed to load config from /var/www/worknow/frontend/vite.config.ts
error during build:
Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'vite' imported from /var/www/worknow/frontend/node_modules/.vite-temp/vite.config.ts.timestamp-1762699181274-60c49d74ff1ba.mjs
    at packageResolve (node:internal/modules/esm/resolve:873:9)
    at moduleResolve (node:internal/modules/esm/resolve:946:18)
    at defaultResolve (node:internal/modules/esm/resolve:1188:11)
    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:168:49)
ls: cannot access 'dist/': No such file or directory
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   136  100   136    0     0   4615      0 --:--:-- --:--:-- --:--:--  4689
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Not Found</pre>
</body>
</html>
(venv) root@srv1087935:/var/www/worknow/frontend# # Replit上でdistディレクトリの確認
ls -la frontend/dist/
ls: cannot access 'frontend/dist/': No such file or directory
(venv) root@srv1087935:/var/www/worknow/frontend# cd /var/www/worknow/frontend

# 完全クリーンアップ
rm -rf node_modules package-lock.json .vite dist

# npmキャッシュもクリア
npm cache clean --force

# 依存関係を完全に再インストール
npm install

# viteとTypeScriptがインストールされたか確認
npm list vite typescript

# ビルドを実行
npm run build

# 成功したか確認
ls -la dist/
ls -la dist/index.html

# 成功したらサービス再起動
systemctl restart worknow-frontend

curl https://sinjapan-worknow.com | head -30
npm warn using --force Recommended protections disabled.

added 124 packages, and audited 125 packages in 36s

23 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
frontend@0.0.0 /var/www/worknow/frontend
└── (empty)


> frontend@0.0.0 build
> npx vite build

failed to load config from /var/www/worknow/frontend/vite.config.ts
error during build:
Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'vite' imported from /var/www/worknow/frontend/node_modules/.vite-temp/vite.config.ts.timestamp-1762699261690-6b723c429ce1d.mjs
    at packageResolve (node:internal/modules/esm/resolve:873:9)
    at moduleResolve (node:internal/modules/esm/resolve:946:18)
    at defaultResolve (node:internal/modules/esm/resolve:1188:11)
    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:168:49)
ls: cannot access 'dist/': No such file or directory
ls: cannot access 'dist/index.html': No such file or directory
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   136  100   136    0     0   4475      0 --:--:-- --:--:-- --:--:--  4533
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Not Found</pre>
</body>
</html>
(venv) root@srv1087935:/var/www/worknow/frontend# # ローカルマシン（Mac）で実行
cd /path/to/local/worknow/frontend
npm install
npm run build

# VPSにアップロード
scp -r dist/ root@212.85.24.206:/var/www/worknow/frontend/

# その後VPS上でサービス再起動
ssh root@212.85.24.206 "systemctl restart worknow-frontend"
-bash: cd: /path/to/local/worknow/frontend: No such file or directory

up to date, audited 125 packages in 846ms

23 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

> frontend@0.0.0 build
> npx vite build

failed to load config from /var/www/worknow/frontend/vite.config.ts
error during build:
Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'vite' imported from /var/www/worknow/frontend/node_modules/.vite-temp/vite.config.ts.timestamp-1762699278061-533f6e8f4e8ce.mjs
    at packageResolve (node:internal/modules/esm/resolve:873:9)
    at moduleResolve (node:internal/modules/esm/resolve:946:18)
    at defaultResolve (node:internal/modules/esm/resolve:1188:11)
    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:168:49)
scp: stat local "dist/": No such file or directory
root@212.85.24.206's password: 
(venv) root@srv1087935:/var/www/worknow/frontend# cd /var/www/worknow/frontend

# NODE_ENVを確認
echo $NODE_ENV

# 開発依存関係を含めてインストール
NODE_ENV=development npm install

# または
npm install --include=dev

# viteとTypeScriptがインストールされたか確認
ls -la node_modules/vite
ls -la node_modules/typescript

# ビルド実行
npm run build

# 成功したか確認
ls -la dist/
ls -la dist/index.html

# 権限設定
curl https://sinjapan-worknow.com/api/docs | head -30
production

added 254 packages, and audited 379 packages in 3s

93 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

up to date, audited 379 packages in 825ms

93 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
total 156
drwxr-xr-x   7 root root   4096 Nov  9 14:42 .
drwxr-xr-x 291 root root  12288 Nov  9 14:42 ..
-rw-r--r--   1 root root 102383 Nov  9 14:42 LICENSE.md
-rw-r--r--   1 root root   1152 Nov  9 14:42 README.md
drwxr-xr-x   2 root root   4096 Nov  9 14:42 bin
-rw-r--r--   1 root root   5109 Nov  9 14:42 client.d.ts
drwxr-xr-x   4 root root   4096 Nov  9 14:42 dist
drwxr-xr-x   2 root root   4096 Nov  9 14:42 misc
drwxr-xr-x   4 root root   4096 Nov  9 14:42 node_modules
-rw-r--r--   1 root root   5147 Nov  9 14:42 package.json
drwxr-xr-x   3 root root   4096 Nov  9 14:42 types
total 88
drwxr-xr-x   4 root root  4096 Nov  9 14:42 .
drwxr-xr-x 291 root root 12288 Nov  9 14:42 ..
-rw-r--r--   1 root root  9197 Nov  9 14:42 LICENSE.txt
-rw-r--r--   1 root root  2842 Nov  9 14:42 README.md
-rw-r--r--   1 root root  2656 Nov  9 14:42 SECURITY.md
-rw-r--r--   1 root root 37824 Nov  9 14:42 ThirdPartyNoticeText.txt
drwxr-xr-x   2 root root  4096 Nov  9 14:42 bin
drwxr-xr-x  15 root root  4096 Nov  9 14:42 lib
-rw-r--r--   1 root root  3620 Nov  9 14:42 package.json

> frontend@0.0.0 build
> npx vite build

failed to load config from /var/www/worknow/frontend/vite.config.ts
error during build:
Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'vite-plugin-pwa' imported from /var/www/worknow/frontend/node_modules/.vite-temp/vite.config.ts.timestamp-1762699358990-13cb490bd07a8.mjs
    at packageResolve (node:internal/modules/esm/resolve:873:9)
    at moduleResolve (node:internal/modules/esm/resolve:946:18)
    at defaultResolve (node:internal/modules/esm/resolve:1188:11)
    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:168:49)
ls: cannot access 'dist/': No such file or directory
ls: cannot access 'dist/index.html': No such file or directory
chown: cannot access 'dist/': No such file or directory
=== HTTPSアクセステスト ===
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   136  100   136    0     0   3832      0 --:--:-- --:--:-- --:--:--  3885
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Error</title>
</head>
<body>
<pre>Not Found</pre>
</body>
</html>
=== APIドキュメント ===
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100    22  100    22    0     0    377      0 --:--:-- --:--:-- --:--:--   372
(venv) root@srv1087935:/var/www/worknow/frontend# # GitHubからプロジェクトをクローン（まだしていない場合）（まだしていない場合）
# または既存のローカルリポジトリに移動
cd ~/Desktop  # または任意のディレクトリ
git clone https://github.com/YOUR_USERNAME/worknow.git
cd worknow/frontend

# または既存のプロジェクトがある場合
cd /path/to/your/worknow/frontend
git pull origin main  # 最新コードを取得
-bash: cd: /root/Desktop: No such file or directory
Cloning into 'worknow'...
Username for 'https://github.com': SINJAPANLLC
Password for 'https://SINJAPANLLC@github.com': 
remote: Invalid username or token. Password authentication is not supported for Git operations.
fatal: Authentication failed for 'https://github.com/YOUR_USERNAME/worknow.git/'
-bash: cd: worknow/frontend: No such file or directory
-bash: cd: /path/to/your/worknow/frontend: No such file or directory
fatal: detected dubious ownership in repository at '/var/www/worknow'
To add an exception for this directory, call:

	git config --global --add safe.directory /var/www/worknow
(venv) root@srv1087935:/var/www/worknow/frontend# # 依存関係のインストール
npm install

# ビルド実行
npm run build

# ビルド成功を確認
ls -la dist/
ls -la dist/index.html

up to date, audited 125 packages in 876ms

23 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

> frontend@0.0.0 build
> npx vite build

failed to load config from /var/www/worknow/frontend/vite.config.ts
error during build:
Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'vite' imported from /var/www/worknow/frontend/node_modules/.vite-temp/vite.config.ts.timestamp-1762699576376-62b1a25eb0706.mjs
    at packageResolve (node:internal/modules/esm/resolve:873:9)
    at moduleResolve (node:internal/modules/esm/resolve:946:18)
    at defaultResolve (node:internal/modules/esm/resolve:1188:11)
    at ModuleLoader.defaultResolve (node:internal/modules/esm/loader:708:12)
    at #cachedDefaultResolve (node:internal/modules/esm/loader:657:25)
    at ModuleLoader.resolve (node:internal/modules/esm/loader:640:38)
    at ModuleLoader.getModuleJobForImport (node:internal/modules/esm/loader:264:38)
    at ModuleJob._link (node:internal/modules/esm/module_job:168:49)
ls: cannot access 'dist/': No such file or directory
ls: cannot access 'dist/index.html': No such file or directory
(venv) root@srv1087935:/var/www/worknow/frontend# exit
logout
Connection to 212.85.24.206 closed.
kazuyaotani@Mac ~ % # ここからMacで実行
# プロジェクトディレクトリに移動
cd ~/Desktop  # またはプロジェクトがある場所
# 最新コードを取得（GitHubリポジトリがある場合）
git clone https://github.com/YOUR_REPO/worknow.git
cd worknow/frontend
zsh: command not found: #
zsh: command not found: #
cd: too many arguments
zsh: command not found: #
Cloning into 'worknow'...
remote: Repository not found.
fatal: repository 'https://github.com/YOUR_REPO/worknow.git/' not found
cd: no such file or directory: worknow/frontend
kazuyaotani@Mac ~ % # ダウンロードフォルダに移動
cd ~/Downloads

# ファイル名を確認（正確な名前を確認）
ls -lh dist.tar*.gz

# ファイル名を修正（Replitが追加した数字を含む実際の名前に変更）
# 例: dist.tar_1762699971226.gz の場合
mv dist.tar_1762699971226.gz dist.tar.gz

# VPSに転送
scp dist.tar.gz root@212.85.24.206:/tmp/

# パスワードを入力してください
zsh: command not found: #
zsh: command not found: #
zsh: no matches found: dist.tar*.gz
zsh: command not found: #
zsh: command not found: #
mv: rename dist.tar_1762699971226.gz to dist.tar.gz: No such file or directory
zsh: command not found: #
scp: stat local "dist.tar.gz": No such file or directory
zsh: command not found: #
kazuyaotani@Mac Downloads % # ダウンロードフォルダに移動
cd ~/Downloads

# ファイル名を確認（正確な名前を確認）
ls -lh dist.tar*.gz

# ファイル名を修正（Replitが追加した数字を含む実際の名前に変更）
# 例: dist.tar_1762699971226.gz の場合
mv dist.tar_1762699971226.gz dist.tar.gz

# VPSに転送
scp dist.tar.gz root@212.85.24.206:/tmp/

# パスワードを入力してください
zsh: command not found: #
zsh: command not found: #
zsh: no matches found: dist.tar*.gz
zsh: command not found: #
zsh: command not found: #
mv: rename dist.tar_1762699971226.gz to dist.tar.gz: No such file or directory
zsh: command not found: #
scp: stat local "dist.tar.gz": No such file or directory
zsh: command not found: #
kazuyaotani@Mac Downloads % # デスクトップに移動
cd ~/Desktop

# ファイル名を確認
ls -lh dist.tar*.gz

# VPSに転送（正確なファイル名に置き換えてください）
scp dist.tar_1762699971226.gz root@212.85.24.206:/tmp/dist.tar.gz

# パスワードを入力
zsh: command not found: #
zsh: command not found: #
-rw-r--r--@ 1 kazuyaotani  staff   580K 11  9 23:52 dist.tar.gz
zsh: command not found: #
scp: stat local "dist.tar_1762699971226.gz": No such file or directory
zsh: command not found: #
kazuyaotani@Mac Desktop % # デスクトップに移動
cd ~/Desktop

# ファイルの詳細を確認
ls -lh dist

# VPSに転送（distファイルとして）
scp dist root@212.85.24.206:/tmp/dist.tar.gz

# パスワードを入力
zsh: command not found: #
zsh: command not found: #
total 392
drwxr-xr-x@ 4 kazuyaotani  staff   128B 11  9 23:54 assets
-rw-r--r--@ 1 kazuyaotani  staff   1.4K 11  9 23:47 index.html
-rw-------@ 1 kazuyaotani  staff    54K 11  9 23:47 logo-new.jpg
-rw-------@ 1 kazuyaotani  staff    93K 11  9 23:47 logo.png
-rw-r--r--@ 1 kazuyaotani  staff   463B 11  9 23:47 manifest.webmanifest
-rw-r--r--@ 1 kazuyaotani  staff   134B 11  9 23:47 registerSW.js
-rw-r--r--@ 1 kazuyaotani  staff   1.4K 11  9 23:47 sw.js
-rw-r--r--@ 1 kazuyaotani  staff   1.5K 11  9 23:47 vite.svg
-rw-r--r--@ 1 kazuyaotani  staff    22K 11  9 23:47 workbox-54adf05e.js
zsh: command not found: #
root@212.85.24.206's password: 
scp: local "dist" is not a regular file
scp: failed to upload file dist to /tmp/dist.tar.gz
zsh: command not found: #
kazuyaotani@Mac Desktop % # デスクトップから直接distディレクトリを転送
cd ~/Desktop
scp -r dist root@212.85.24.206:/tmp/

# パスワードを入力
zsh: command not found: #
root@212.85.24.206's password: 
zsh: command not found: #
kazuyaotani@Mac Desktop % 
kazuyaotani@Mac Desktop % # デスクトップから直接distディレクトリを転送
cd ~/Desktop
scp -r dist root@212.85.24.206:/tmp/

# パスワードを入力
zsh: command not found: #
root@212.85.24.206's password: 
index.html                                    100% 1469    10.1KB/s   00:00    
vite.svg                                      100% 1497    10.0KB/s   00:00    
registerSW.js                                 100%  134     1.0KB/s   00:00    
logo.png                                      100%   93KB  80.2KB/s   00:01    
workbox-54adf05e.js                           100%   22KB  74.5KB/s   00:00    
manifest.webmanifest                          100%  463     3.2KB/s   00:00    
index-BTVz7rI7.js                             100% 1847KB 348.3KB/s   00:05    
index-Bc7Bid2C.css                            100%   82KB 328.2KB/s   00:00    
logo-new.jpg                                  100%   54KB 278.4KB/s   00:00    
sw.js                                         100% 1454     9.3KB/s   00:00    
zsh: command not found: #
kazuyaotani@Mac Desktop % >....                                                 

# 内容を確認
ls -la dist/
ls -la dist/index.html
ls -la dist/assets/

# 権限設定
chown -R www-data:www-data dist/

# サービス再起動
systemctl restart worknow-frontend

# 動作確認
sleep 5
echo "=== HTTPSレスポンスヘッダー ==="
curl -I https://sinjapan-worknow.com

echo ""
echo "=== HTMLコンテンツ（最初の30行） ==="
curl https://sinjapan-worknow.com | head -30

echo ""
echo "🌐 ブラウザでアクセス: https://sinjapan-worknow.com"
zsh: command not found: #
root@212.85.24.206's password: 
Welcome to Ubuntu 24.04.3 LTS (GNU/Linux 6.8.0-85-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Sun Nov  9 14:56:32 UTC 2025

  System load:  0.0                Processes:             136
  Usage of /:   13.3% of 95.82GB   Users logged in:       0
  Memory usage: 31%                IPv4 address for eth0: 212.85.24.206
  Swap usage:   0%                 IPv6 address for eth0: 2a02:4780:59:cc86::1


Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

Enable ESM Apps to receive additional future security updates.
See https://ubuntu.com/esm or run: sudo pro status


1 updates could not be installed automatically. For more details,
see /var/log/unattended-upgrades/unattended-upgrades.log

*** System restart required ***
Last login: Sun Nov  9 14:09:58 2025 from 106.155.51.71
root@srv1087935:~# # フロントエンドディレクトリに移動
cd /var/www/worknow/frontend

# 既存のdistをバックアップ
rm -rf dist.old
mv dist dist.old 2>/dev/null || true

# 新しいdistを配置
mv /tmp/dist ./

# 内容を確認
ls -la dist/
ls -la dist/index.html
ls -la dist/assets/

# 権限設定
chown -R www-data:www-data dist/

# サービス再起動
systemctl restart worknow-frontend

# 動作確認
sleep 5
echo ""
echo "🌐 https://sinjapan-worknow.com" ださい："d -20
total 208
drwxr-xr-x 3 root     root      4096 Nov  9 14:56 .
drwxr-xr-x 7 www-data www-data  4096 Nov  9 14:56 ..
drwxr-xr-x 2 root     root      4096 Nov  9 14:56 assets
-rw-r--r-- 1 root     root      1469 Nov  9 14:56 index.html
-rw------- 1 root     root     55267 Nov  9 14:56 logo-new.jpg
-rw------- 1 root     root     94827 Nov  9 14:56 logo.png
-rw-r--r-- 1 root     root       463 Nov  9 14:56 manifest.webmanifest
-rw-r--r-- 1 root     root       134 Nov  9 14:56 registerSW.js
-rw-r--r-- 1 root     root      1454 Nov  9 14:56 sw.js
-rw-r--r-- 1 root     root      1497 Nov  9 14:56 vite.svg
-rw-r--r-- 1 root     root     22046 Nov  9 14:56 workbox-54adf05e.js
-rw-r--r-- 1 root root 1469 Nov  9 14:56 dist/index.html
total 1940
drwxr-xr-x 2 root root    4096 Nov  9 14:56 .
drwxr-xr-x 3 root root    4096 Nov  9 14:56 ..
-rw-r--r-- 1 root root 1891037 Nov  9 14:56 index-BTVz7rI7.js
-rw-r--r-- 1 root root   84352 Nov  9 14:56 index-Bc7Bid2C.css

=== HTTPSレスポンスヘッダー ===
HTTP/2 200 
server: nginx/1.24.0 (Ubuntu)
date: Sun, 09 Nov 2025 14:57:04 GMT
content-type: text/html; charset=utf-8
content-length: 1469
x-powered-by: Express
accept-ranges: bytes
cache-control: public, max-age=0
last-modified: Sun, 09 Nov 2025 14:56:13 GMT
etag: W/"5bd-19a691e1ee1"
strict-transport-security: max-age=31536000; includeSubDomains
x-frame-options: SAMEORIGIN
x-content-type-options: nosniff
x-xss-protection: 1; mode=block


=== HTMLコンテンツ（最初の30行） ===
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  1469  100  1469    0     0   6439      0 --:--:-- --:--:-- --:--:--  6442
<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#00C6A7" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Work Now" />
    <link rel="apple-touch-icon" href="/logo.png" />
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="即戦力マッチング&報酬プラットフォーム - Work Now" />
    <meta name="keywords" content="求人,マッチング,報酬,ワーク,クライアント,フリーランス" />
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin="" />
    
    <title>Work Now</title>
    <script type="module" crossorigin src="/assets/index-BTVz7rI7.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-Bc7Bid2C.css">
  <link rel="manifest" href="/manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script></head>
  <body class="antialiased">
    <div id="root"></div>
  </body>

=== バックエンドAPI確認 ===
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100    22  100    22    0     0    111      0 --:--:-- --:--:-- --:--:--   111
{"detail":"Not Found"}
✅ 完了！ブラウザでアクセスしてください：
🌐 https://sinjapan-worknow.com
root@srv1087935:/var/www/worknow/frontend# # Nginx設定を確認
cat /etc/nginx/sites-available/worknow

# バックエンドが動作しているか確認
systemctl status worknow-backend

# バックエンドに直接アクセス
curl http://localhost:8008/docs | head -30

# バックエンドのヘルスチェック
curl http://localhost:8008/api/health || echo "ヘルスエンドポイントなし"
server {
    listen 80;
    server_name sinjapan-worknow.com www.sinjapan-worknow.com;

    # Redirect HTTP to HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name sinjapan-worknow.com www.sinjapan-worknow.com;

    # SSL証明書の設定（Let's Encrypt使用）
    ssl_certificate /etc/letsencrypt/live/sinjapan-worknow.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/sinjapan-worknow.com/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    # セキュリティヘッダー
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;

    # フロントエンド（React + Vite）
    location / {
        proxy_pass http://localhost:20000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # バックエンドAPI（FastAPI）
    location /api {
        proxy_pass http://localhost:8008;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # アップロードファイルの静的配信
    location /uploads/ {
        alias /var/www/worknow/backend/uploads/;
        expires 30d;
        add_header Cache-Control "public, immutable";
    }

    # クライアントの最大ボディサイズ（ファイルアップロード用）
    client_max_body_size 10M;

    # ログ設定
    access_log /var/log/nginx/worknow_access.log;
    error_log /var/log/nginx/worknow_error.log;
}
● worknow-backend.service - Work Now Backend (FastAPI)
     Loaded: loaded (/etc/systemd/system/worknow-backend.service; enabled; pres>
     Active: active (running) since Sun 2025-11-09 14:28:34 UTC; 29min ago
   Main PID: 158160 (gunicorn)
      Tasks: 5 (limit: 9483)
     Memory: 279.1M (peak: 279.6M)
        CPU: 13.295s
     CGroup: /system.slice/worknow-backend.service
             ├─158160 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>
             ├─158176 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>
             ├─158177 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>
             ├─158178 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>
             └─158179 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>

Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [15817>
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [15817>
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [15817>
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [15817>
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [15817>
Nov 09 14:31:33 srv1087935 gunicorn[158179]: 212.85.24.206:0 - "HEAD /api/docs >
Nov 09 14:37:00 srv1087935 gunicorn[158179]: 212.85.24.206:0 - "HEAD /api/docs >
Nov 09 14:38:26 srv1087935 gunicorn[158179]: 212.85.24.206:0 - "GET /api/docs H>
Nov 09 14:42:44 srv1087935 gunicorn[158178]: 212.85.24.206:0 - "GET /api/docs H>
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   936  100   936    0     0   403k      0 --:--:-- --:--:-- --:--:--  457k

    <!DOCTYPE html>
    <html>
    <head>
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swagger-ui-dist@5/swagger-ui.css">
    <link rel="shortcut icon" href="https://fastapi.tiangolo.com/img/favicon.png">
    <title>WORK NOW API - Swagger UI</title>
    </head>
    <body>
    <div id="swagger-ui">
    </div>
    <script src="https://cdn.jsdelivr.net/npm/swagger-ui-dist@5/swagger-ui-bundle.js"></script>
    <!-- `SwaggerUIBundle` is now available on the page -->
    <script>
    const ui = SwaggerUIBundle({
        url: '/openapi.json',
    "dom_id": "#swagger-ui",
"layout": "BaseLayout",
"deepLinking": true,
"showExtensions": true,
"showCommonExtensions": true,
oauth2RedirectUrl: window.location.origin + '/docs/oauth2-redirect',
    presets: [
        SwaggerUIBundle.presets.apis,
        SwaggerUIBundle.SwaggerUIStandalonePreset
        ],
    })
    </script>
    </body>
    </html>
{"detail":"Not Found"}root@srv1087935:/var/www/worknow/frontend# # Nginx設定を確root@srv1087935:/var/www/worknow/frontend# # Nginx設定を確認
cat /etc/nginx/sites-available/worknow | grep -A 10 "location"

# または全体を確認
cat /etc/nginx/sites-available/worknow
    location / {
        proxy_pass http://localhost:20000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
--
    location /api {
        proxy_pass http://localhost:8008;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
--
    location /uploads/ {
        alias /var/www/worknow/backend/uploads/;
        expires 30d;
        add_header Cache-Control "public, immutable";
    }

    # クライアントの最大ボディサイズ（ファイルアップロード用）
    client_max_body_size 10M;

    # ログ設定
    access_log /var/log/nginx/worknow_access.log;
server {
    listen 80;
    server_name sinjapan-worknow.com www.sinjapan-worknow.com;

    # Redirect HTTP to HTTPS
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name sinjapan-worknow.com www.sinjapan-worknow.com;

    # SSL証明書の設定（Let's Encrypt使用）
    ssl_certificate /etc/letsencrypt/live/sinjapan-worknow.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/sinjapan-worknow.com/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    # セキュリティヘッダー
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;

    # フロントエンド（React + Vite）
    location / {
        proxy_pass http://localhost:20000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # バックエンドAPI（FastAPI）
    location /api {
        proxy_pass http://localhost:8008;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # アップロードファイルの静的配信
    location /uploads/ {
        alias /var/www/worknow/backend/uploads/;
        expires 30d;
        add_header Cache-Control "public, immutable";
    }

    # クライアントの最大ボディサイズ（ファイルアップロード用）
    client_max_body_size 10M;

    # ログ設定
    access_log /var/log/nginx/worknow_access.log;
    error_log /var/log/nginx/worknow_error.log;
}
root@srv1087935:/var/www/worknow/frontend#     # APIドキュメント（FastAPI）
    location /docs {
        proxy_pass http://localhost:8008/docs;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /openapi.json {
        proxy_pass http://localhost:8008/openapi.json;
        proxy_http_version 1.1;
        proxy_set_header Host $host;
    }
Command 'location' not found, but can be installed with:
apt install location
proxy_pass: command not found
proxy_http_version: command not found
proxy_set_header: command not found
proxy_set_header: command not found
proxy_set_header: command not found
proxy_set_header: command not found
-bash: syntax error near unexpected token `}'
Command 'location' not found, but can be installed with:
apt install location
proxy_pass: command not found
proxy_http_version: command not found
proxy_set_header: command not found
-bash: syntax error near unexpected token `}'
root@srv1087935:/var/www/worknow/frontend# # Nginx設定を編集
nano /etc/nginx/sites-available/worknow
root@srv1087935:/var/www/worknow/frontend# # VPSに接続（既に接続済みの場合はスキップ）
ssh root@212.85.24.206

# Pythonでパスワードをハッシュ化
cd /var/www/worknow
source venv/bin/activate
python3 << 'EOF'
from passlib.context import CryptContext

pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")
password = "Kazuya8008"
hashed = pwd_context.hash(password)
print(f"ハッシュ化されたパスワード: {hashed}")
EOF

# 上記で出力されたハッシュをコピーして、以下のSQLで使用します
# （ハッシュは $2b$ で始まる長い文字列です）

# データベースに接続してユーザーを追加
sudo -u postgres psql worknow_production << 'SQL'
-- 既存のユーザーを確認
SELECT id, email, role FROM users WHERE email = 'info@sinjapanllc.jp';

SQL 'info@sinjapanllc.jp';ll_name, is_verified, created_at FROM users WHERE emai
root@212.85.24.206's password: 
Permission denied, please try again.
root@212.85.24.206's password: 
Welcome to Ubuntu 24.04.3 LTS (GNU/Linux 6.8.0-85-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Sun Nov  9 15:03:48 UTC 2025

  System load:  0.01               Processes:             140
  Usage of /:   13.3% of 95.82GB   Users logged in:       1
  Memory usage: 31%                IPv4 address for eth0: 212.85.24.206
  Swap usage:   0%                 IPv6 address for eth0: 2a02:4780:59:cc86::1


Expanded Security Maintenance for Applications is not enabled.

0 updates can be applied immediately.

Enable ESM Apps to receive additional future security updates.
See https://ubuntu.com/esm or run: sudo pro status


1 updates could not be installed automatically. For more details,
see /var/log/unattended-upgrades/unattended-upgrades.log

*** System restart required ***
Last login: Sun Nov  9 14:56:33 2025 from 106.155.51.71
root@srv1087935:~# cd /var/www/worknow && source venv/bin/activate && HASH=$(python3 -c "from passlib.context import CryptContext; pwd_context = CryptContext(schemes=['bcrypt'], deprecated='auto'); print(pwd_context.hash('Kazuya8008'))") && sudo -u postgres psql worknow_production -c "INSERT INTO users (email, password_hash, role, full_name, is_verified, created_at) VALUES ('info@sinjapanllc.jp', '$HASH', 'admin', 'SINJAPAN LLC Admin', true, NOW()) ON CONFLICT (email) DO UPDATE SET password_hash = EXCLUDED.password_hash, role = 'admin', is_verified = true; SELECT id, email, role, full_name, is_verified FROM users WHERE email = 'info@sinjapanllc.jp';"
ERROR:  relation "users" does not exist
LINE 1: INSERT INTO users (email, password_hash, role, full_name, is...
                    ^
(venv) root@srv1087935:/var/www/worknow# # データベースの現在のテーブルを確認
sudo -u postgres psql worknow_production -c "\dt"

# スキーマファイルがあるか確認
ls -la /var/www/worknow/backend/*.sql
ls -la /var/www/worknow/backend/schema.sql

# もしスキーマファイルがあれば実行
sudo -u postgres psql worknow_production < /var/www/worknow/backend/schema.sql
Did not find any relations.
ls: cannot access '/var/www/worknow/backend/*.sql': No such file or directory
ls: cannot access '/var/www/worknow/backend/schema.sql': No such file or directory
-bash: /var/www/worknow/backend/schema.sql: No such file or directory
(venv) root@srv1087935:/var/www/worknow# # schema.sqlファイルを作成
cat > /var/www/worknow/backend/schema.sql << 'EOF'
-- Work Now Database Schema for Production
-- Generated: 2025-11-09

-- Users Table
CREATE TABLE IF NOT EXISTS users (
    id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid()::text,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    full_name VARCHAR(255),
    role VARCHAR(50) NOT NULL CHECK (role IN ('worker', 'client', 'admin')),
    avatar_url TEXT,
    phone VARCHAR(20),
    phone_verified BOOLEAN DEFAULT FALSE,
    date_of_birth DATE,
    gender VARCHAR(20),
    address TEXT,
    work_style TEXT,
    affiliation VARCHAR(255),
    id_document_url TEXT,
    preferred_prefecture VARCHAR(100),
    latitude DECIMAL(10, 8),
    longitude DECIMAL(11, 8),
echo "✅ 完了！ https://sinjapan-worknow.com にログインできます"users WHERE emai
=== PostgreSQL拡張機能を有効化 ===
CREATE EXTENSION
=== データベーススキーマを適用 ===
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
=== テーブルを確認 ===
                      List of relations
 Schema |              Name               | Type  |  Owner   
--------+---------------------------------+-------+----------
 public | activity_logs                   | table | postgres
 public | applications                    | table | postgres
 public | assignments                     | table | postgres
 public | bank_accounts                   | table | postgres
 public | client_invoice_settings         | table | postgres
 public | client_notification_preferences | table | postgres
 public | conversation_participants       | table | postgres
 public | conversations                   | table | postgres
 public | device_tokens                   | table | postgres
 public | jobs                            | table | postgres
 public | messages                        | table | postgres
 public | payments                        | table | postgres
 public | penalties                       | table | postgres
 public | reviews                         | table | postgres
 public | users                           | table | postgres
 public | withdrawal_requests             | table | postgres
(16 rows)

=== 管理者アカウントを作成 ===
INSERT 0 1
                  id                  |        email        | role  |     full_name      | is_verified |         created_at         
--------------------------------------+---------------------+-------+--------------------+-------------+----------------------------
 f1b6b7f9-e2e7-431b-b7c4-4c29c240f52e | info@sinjapanllc.jp | admin | SINJAPAN LLC Admin | t           | 2025-11-09 15:08:38.517554
(1 row)

✅ 完了！ https://sinjapan-worknow.com にログインできます
(venv) root@srv1087935:/var/www/worknow# # VPS上で実行：既存のデータベースを削除して正しいスキーマで再作成

# 1. データベースを再作成
sudo -u postgres psql << 'SQL'
DROP DATABASE IF EXISTS worknow_production;
CREATE DATABASE worknow_production;
SQL

# 2. 正しいスキーマファイルをVPSにコピー（Mac側で実行）
cd ~/Desktop/dist  # またはプロジェクトのある場所
scp -r /path/to/backend/db/schema.sql root@212.85.24.206:/var/www/worknow/backend/db/

# 3. VPS上で正しいスキーマを適用
sudo -u postgres psql worknow_production < /var/www/worknow/backend/db/schema.sql

# 4. 管理者アカウントを作成
cd /var/www/worknow && source venv/bin/activate && HASH=$(python3 -c "from passlib.context import CryptContext; pwd_context = CryptContext(schemes=['bcrypt'], deprecated='auto'); print(pwd_context.hash('Kazuya8008'))") && sudo -u postgres psql worknow_production << SQL
INSERT INTO users (email, password_hash, role, full_name, is_active, phone_verifSQLECT id, email, role, full_name FROM users WHERE email = 'info@sinjapanllc.jp'
DROP DATABASE
CREATE DATABASE
-bash: cd: /root/Desktop/dist: No such file or directory
scp: stat local "/path/to/backend/db/schema.sql": No such file or directory
CREATE EXTENSION
CREATE EXTENSION
CREATE TABLE
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE INDEX
ERROR:  syntax error at or near "begin"
LINE 8:         begin
                ^
ERROR:  syntax error at or near "return"
LINE 1: return new;
        ^
WARNING:  there is no transaction in progress
COMMIT
ERROR:  syntax error at or near "$$ language plpgsql;
    end if;
end $$"
LINE 1: $$ language plpgsql;
        ^
ERROR:  function public.set_updated_at() does not exist
CONTEXT:  SQL statement "create trigger set_updated_at_users
        before update on public.users
        for each row execute function public.set_updated_at()"
PL/pgSQL function inline_code_block line 5 at SQL statement
INSERT 0 1
                  id                  |        email        | role  |     full_name      
--------------------------------------+---------------------+-------+--------------------
 b1cfcdbc-ebf5-4d04-99be-58204aef67ec | info@sinjapanllc.jp | admin | SINJAPAN LLC Admin
(1 row)

(venv) root@srv1087935:/var/www/worknow# # VPS上で実行：欠落しているテーブルとトリガーを追加

sudo -u postgres psql worknow_production << 'SQL'

-- =====================================================
-- トリガー関数を正しく作成
-- =====================================================
CREATE OR REPLACE FUNCTION public.set_updated_at()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- 既存テーブルにトリガーを追加
DROP TRIGGER IF EXISTS set_updated_at_users ON users;
CREATE TRIGGER set_updated_at_users BEFORE UPDATE ON users FOR EACH ROW EXECUTE FUNCTION set_updated_at();

DROP TRIGGER IF EXISTS set_updated_at_jobs ON jobs;
CREATE TRIGGER set_updated_at_jobs BEFORE UPDATE ON jobs FOR EACH ROW EXECUTE FUecho "Password: Kazuya8008"lc.jp"japan-worknow.com"t_updated_at"e);TZ;ALSE;nt_in
CREATE FUNCTION
NOTICE:  trigger "set_updated_at_users" for relation "users" does not exist, skipping
DROP TRIGGER
CREATE TRIGGER
NOTICE:  trigger "set_updated_at_jobs" for relation "jobs" does not exist, skipping
DROP TRIGGER
CREATE TRIGGER
NOTICE:  trigger "set_updated_at_applications" for relation "applications" does not exist, skipping
DROP TRIGGER
CREATE TRIGGER
NOTICE:  trigger "set_updated_at_assignments" for relation "assignments" does not exist, skipping
DROP TRIGGER
CREATE TRIGGER
NOTICE:  trigger "set_updated_at_payments" for relation "payments" does not exist, skipping
DROP TRIGGER
CREATE TRIGGER
NOTICE:  trigger "set_updated_at_reviews" for relation "reviews" does not exist, skipping
DROP TRIGGER
CREATE TRIGGER
NOTICE:  trigger "set_updated_at_notifications" for relation "notifications" does not exist, skipping
DROP TRIGGER
CREATE TRIGGER
NOTICE:  trigger "set_updated_at_bank_accounts" for relation "bank_accounts" does not exist, skipping
DROP TRIGGER
CREATE TRIGGER
NOTICE:  trigger "set_updated_at_withdrawal_requests" for relation "withdrawal_requests" does not exist, skipping
DROP TRIGGER
CREATE TRIGGER
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE TRIGGER
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE TRIGGER
CREATE TABLE
CREATE INDEX
CREATE TABLE
CREATE INDEX
CREATE INDEX
CREATE INDEX
CREATE TABLE
CREATE TRIGGER
CREATE TABLE
CREATE TRIGGER
CREATE TABLE
CREATE INDEX
ALTER TABLE
ALTER TABLE
CREATE INDEX
✅ トリガーと欠落テーブルを追加しました
                      List of relations
 Schema |              Name               | Type  |  Owner   
--------+---------------------------------+-------+----------
 public | activity_logs                   | table | postgres
 public | applications                    | table | postgres
 public | assignments                     | table | postgres
 public | bank_accounts                   | table | postgres
 public | client_invoice_settings         | table | postgres
 public | client_notification_preferences | table | postgres
 public | conversation_participants       | table | postgres
 public | conversations                   | table | postgres
 public | device_tokens                   | table | postgres
 public | job_notifications               | table | postgres
 public | jobs                            | table | postgres
 public | messages                        | table | postgres
 public | notifications                   | table | postgres
 public | payments                        | table | postgres
 public | penalties                       | table | postgres
 public | qr_tokens                       | table | postgres
 public | reviews                         | table | postgres
 public | users                           | table | postgres
 public | withdrawal_requests             | table | postgres
 public | worker_favorites                | table | postgres
(20 rows)

                            List of functions
 Schema |      Name      | Result data type | Argument data types | Type 
--------+----------------+------------------+---------------------+------
 public | set_updated_at | trigger          |                     | func
(1 row)


🎉 データベースセットアップ完了！
ログインテスト: https://sinjapan-worknow.com
Email: info@sinjapanllc.jp
Password: Kazuya8008
(venv) root@srv1087935:/var/www/worknow# # VPS上で実行：管理者アカウントのメールアドレスを修正

cd /var/www/worknow && source venv/bin/activate && HASH=$(python3 -c "from passlib.context import CryptContext; pwd_context = CryptContext(schemes=['bcrypt'], deprecated='auto'); print(pwd_context.hash('Kazuya8008'))") && sudo -u postgres psql worknow_production << SQL

-- 既存のアカウントを削除
DELETE FROM users WHERE email = 'info@sinjapanllc.jp';

-- 正しいメールアドレスで管理者アカウントを作成
INSERT INTO users (email, password_hash, role, full_name, is_active, phone_verified, created_at)
VALUES ('info@sinjapan.jp', '$HASH', 'admin', 'SINJAPAN LLC Admin', true, true, NOW());

-- 確認
SELECT id, email, role, full_name, is_active FROM users WHERE email = 'info@sinjapan.jp';

SQL
DELETE 1
INSERT 0 1
                  id                  |      email       | role  |     full_name      | is_active 
--------------------------------------+------------------+-------+--------------------+-----------
 ad3e4f1c-568d-42ec-9ed0-a1421b88318c | info@sinjapan.jp | admin | SINJAPAN LLC Admin | t
(1 row)

(venv) root@srv1087935:/var/www/worknow# # VPS上で実行：バックエンドのCORS設定とサービス状態を確認

# バックエンドサービスのログを確認
journalctl -u worknow-backend -n 50 --no-pager

# 環境変数を確認
cat /var/www/worknow/.env.production | grep CORS

# バックエンド設定ファイルを確認
cat /var/www/worknow/backend/main.py | grep -A 10 "CORS"

# バックエンドが動作しているか確認
systemctl status worknow-backend

# ローカルでAPIにアクセスできるか確認
curl http://localhost:8008/api/health || curl http://localhost:8008/
Nov 09 14:28:34 srv1087935 gunicorn[158147]: [2025-11-09 14:28:34 +0000] [158147] [INFO] Worker exiting (pid: 158147)
Nov 09 14:28:34 srv1087935 systemd[1]: Stopping worknow-backend.service - Work Now Backend (FastAPI)...
Nov 09 14:28:34 srv1087935 gunicorn[158146]: [2025-11-09 14:28:34 +0000] [158146] [INFO] Handling signal: term
Nov 09 14:28:34 srv1087935 gunicorn[158146]: [2025-11-09 14:28:34 +0000] [158146] [ERROR] Worker (pid:158147) was sent SIGTERM!
Nov 09 14:28:34 srv1087935 gunicorn[158146]: [2025-11-09 14:28:34 +0000] [158146] [ERROR] Worker (pid:158150) was sent SIGTERM!
Nov 09 14:28:34 srv1087935 gunicorn[158146]: [2025-11-09 14:28:34 +0000] [158146] [ERROR] Worker (pid:158149) was sent SIGTERM!
Nov 09 14:28:34 srv1087935 gunicorn[158146]: [2025-11-09 14:28:34 +0000] [158146] [ERROR] Worker (pid:158148) was sent SIGTERM!
Nov 09 14:28:34 srv1087935 gunicorn[158146]: [2025-11-09 14:28:34 +0000] [158146] [INFO] Shutting down: Master
Nov 09 14:28:34 srv1087935 systemd[1]: worknow-backend.service: Deactivated successfully.
Nov 09 14:28:34 srv1087935 systemd[1]: Stopped worknow-backend.service - Work Now Backend (FastAPI).
Nov 09 14:28:34 srv1087935 systemd[1]: worknow-backend.service: Consumed 1.103s CPU time.
Nov 09 14:28:34 srv1087935 systemd[1]: Started worknow-backend.service - Work Now Backend (FastAPI).
Nov 09 14:28:34 srv1087935 gunicorn[158160]: [2025-11-09 14:28:34 +0000] [158160] [INFO] Starting gunicorn 23.0.0
Nov 09 14:28:34 srv1087935 gunicorn[158160]: [2025-11-09 14:28:34 +0000] [158160] [INFO] Listening at: http://0.0.0.0:8008 (158160)
Nov 09 14:28:34 srv1087935 gunicorn[158160]: [2025-11-09 14:28:34 +0000] [158160] [INFO] Using worker: uvicorn.workers.UvicornWorker
Nov 09 14:28:34 srv1087935 gunicorn[158176]: [2025-11-09 14:28:34 +0000] [158176] [INFO] Booting worker with pid: 158176
Nov 09 14:28:34 srv1087935 gunicorn[158177]: [2025-11-09 14:28:34 +0000] [158177] [INFO] Booting worker with pid: 158177
Nov 09 14:28:34 srv1087935 gunicorn[158178]: [2025-11-09 14:28:34 +0000] [158178] [INFO] Booting worker with pid: 158178
Nov 09 14:28:34 srv1087935 gunicorn[158179]: [2025-11-09 14:28:34 +0000] [158179] [INFO] Booting worker with pid: 158179
Nov 09 14:28:34 srv1087935 gunicorn[158176]: /var/www/worknow/venv/lib/python3.12/site-packages/pydantic/main.py:464: UserWarning: Pydantic serializer warnings:
Nov 09 14:28:34 srv1087935 gunicorn[158176]:   PydanticSerializationUnexpectedValue(Expected `str` - serialized value may not be as expected [field_name='CORS_ORIGINS', input_value=[], input_type=list])
Nov 09 14:28:34 srv1087935 gunicorn[158176]:   return self.__pydantic_serializer__.to_python(
Nov 09 14:28:35 srv1087935 gunicorn[158177]: /var/www/worknow/venv/lib/python3.12/site-packages/pydantic/main.py:464: UserWarning: Pydantic serializer warnings:
Nov 09 14:28:35 srv1087935 gunicorn[158177]:   PydanticSerializationUnexpectedValue(Expected `str` - serialized value may not be as expected [field_name='CORS_ORIGINS', input_value=[], input_type=list])
Nov 09 14:28:35 srv1087935 gunicorn[158177]:   return self.__pydantic_serializer__.to_python(
Nov 09 14:28:35 srv1087935 gunicorn[158178]: /var/www/worknow/venv/lib/python3.12/site-packages/pydantic/main.py:464: UserWarning: Pydantic serializer warnings:
Nov 09 14:28:35 srv1087935 gunicorn[158178]:   PydanticSerializationUnexpectedValue(Expected `str` - serialized value may not be as expected [field_name='CORS_ORIGINS', input_value=[], input_type=list])
Nov 09 14:28:35 srv1087935 gunicorn[158178]:   return self.__pydantic_serializer__.to_python(
Nov 09 14:28:35 srv1087935 gunicorn[158179]: /var/www/worknow/venv/lib/python3.12/site-packages/pydantic/main.py:464: UserWarning: Pydantic serializer warnings:
Nov 09 14:28:35 srv1087935 gunicorn[158179]:   PydanticSerializationUnexpectedValue(Expected `str` - serialized value may not be as expected [field_name='CORS_ORIGINS', input_value=[], input_type=list])
Nov 09 14:28:35 srv1087935 gunicorn[158179]:   return self.__pydantic_serializer__.to_python(
Nov 09 14:28:36 srv1087935 gunicorn[158176]: [2025-11-09 14:28:36 +0000] [158176] [INFO] Started server process [158176]
Nov 09 14:28:36 srv1087935 gunicorn[158176]: [2025-11-09 14:28:36 +0000] [158176] [INFO] Waiting for application startup.
Nov 09 14:28:36 srv1087935 gunicorn[158176]: [2025-11-09 14:28:36 +0000] [158176] [INFO] Application startup complete.
Nov 09 14:28:36 srv1087935 gunicorn[158177]: [2025-11-09 14:28:36 +0000] [158177] [INFO] Started server process [158177]
Nov 09 14:28:36 srv1087935 gunicorn[158177]: [2025-11-09 14:28:36 +0000] [158177] [INFO] Waiting for application startup.
Nov 09 14:28:36 srv1087935 gunicorn[158177]: [2025-11-09 14:28:36 +0000] [158177] [INFO] Application startup complete.
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [158178] [INFO] Started server process [158178]
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [158178] [INFO] Waiting for application startup.
Nov 09 14:28:36 srv1087935 gunicorn[158178]: [2025-11-09 14:28:36 +0000] [158178] [INFO] Application startup complete.
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [158179] [INFO] Started server process [158179]
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [158179] [INFO] Waiting for application startup.
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [158179] [INFO] Application startup complete.
Nov 09 14:31:33 srv1087935 gunicorn[158179]: 212.85.24.206:0 - "HEAD /api/docs HTTP/1.1" 404
Nov 09 14:37:00 srv1087935 gunicorn[158179]: 212.85.24.206:0 - "HEAD /api/docs HTTP/1.1" 404
Nov 09 14:38:26 srv1087935 gunicorn[158179]: 212.85.24.206:0 - "GET /api/docs HTTP/1.1" 404
Nov 09 14:42:44 srv1087935 gunicorn[158178]: 212.85.24.206:0 - "GET /api/docs HTTP/1.1" 404
Nov 09 14:57:05 srv1087935 gunicorn[158179]: 212.85.24.206:0 - "GET /api/docs HTTP/1.1" 404
Nov 09 14:58:17 srv1087935 gunicorn[158179]: 127.0.0.1:38722 - "GET /docs HTTP/1.1" 200
Nov 09 14:58:17 srv1087935 gunicorn[158179]: 127.0.0.1:38736 - "GET /api/health HTTP/1.1" 404
cat: /var/www/worknow/.env.production: No such file or directory
from fastapi.middleware.cors import CORSMiddleware
from fastapi.staticfiles import StaticFiles
from pathlib import Path
from utils.config import CFG
from routers import (
    auth,
    jobs,
    applications,
    assignments,
    payments,
    reviews,
--
    CORSMiddleware,
    allow_origins=CFG["CORS_ORIGINS"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

UPLOAD_DIR = Path("uploads")
UPLOAD_DIR.mkdir(exist_ok=True)
app.mount("/uploads", StaticFiles(directory=str(UPLOAD_DIR)), name="uploads")


● worknow-backend.service - Work Now Backend (FastAPI)
     Loaded: loaded (/etc/systemd/system/worknow-backend.service; enabled; pres>
     Active: active (running) since Sun 2025-11-09 14:28:34 UTC; 51min ago
   Main PID: 158160 (gunicorn)
      Tasks: 5 (limit: 9483)
     Memory: 279.1M (peak: 279.6M)
        CPU: 19.911s
     CGroup: /system.slice/worknow-backend.service
             ├─158160 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>
             ├─158176 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>
             ├─158177 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>
             ├─158178 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>
             └─158179 /var/www/worknow/venv/bin/python3 /var/www/worknow/venv/b>

Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [15817>
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [15817>
Nov 09 14:28:36 srv1087935 gunicorn[158179]: [2025-11-09 14:28:36 +0000] [15817>
Nov 09 14:31:33 srv1087935 gunicorn[158179]: 212.85.24.206:0 - "HEAD /api/docs >
Nov 09 14:37:00 srv1087935 gunicorn[158179]: 212.85.24.206:0 - "HEAD /api/docs >
Nov 09 14:38:26 srv1087935 gunicorn[158179]: 212.85.24.206:0 - "GET /api/docs H>
Nov 09 14:42:44 srv1087935 gunicorn[158178]: 212.85.24.206:0 - "GET /api/docs H>
Nov 09 14:57:05 srv1087935 gunicorn[158179]: 212.85.24.206:0 - "GET /api/docs H>
Nov 09 14:58:17 srv1087935 gunicorn[158179]: 127.0.0.1:38722 - "GET /docs HTTP/>
{"detail":"Not Found"}(venv) root@srv1087# VPS上で実行：設定ファイルとCORS設定を確認ァイルとCORS設定を確認

# 1. バックエンドの設定ファイルを確認
cat /var/www/worknow/backend/utils/config.py

# 2. 環境変数ファイルを確認（存在する場合）
ls -la /var/www/worknow/.env*
cat /var/www/worknow/backend/.env 2>/dev/null || echo "backend/.env not found"

# 3. バックエンドのルーター設定を確認
cat /var/www/worknow/backend/main.py | grep -A 5 "app.include_router"

# 4. APIエンドポイントをテスト
curl http://localhost:8008/auth/login -X POST -H "Content-Type: application/json" -d '{"email":"test","password":"test"}' -v 2>&1 | head -20
from functools import lru_cache
from typing import List

from dotenv import load_dotenv
from pydantic import Field, field_validator
from pydantic_settings import BaseSettings

load_dotenv()


class Settings(BaseSettings):
    SUPABASE_URL: str = Field(..., env="SUPABASE_URL")
    SUPABASE_KEY: str = Field(..., env="SUPABASE_KEY")
    STRIPE_API_KEY: str = Field(..., env="STRIPE_API_KEY")
    STRIPE_CONNECT_CLIENT_ID: str = Field(..., env="STRIPE_CONNECT_CLIENT_ID")
    STRIPE_WEBHOOK_SECRET: str = Field(..., env="STRIPE_WEBHOOK_SECRET")
    STRIPE_PLATFORM_FEE: int = Field(10, env="STRIPE_PLATFORM_FEE")
    FIREBASE_KEY: str = Field(..., env="FIREBASE_KEY")
    REDIS_URL: str = Field("redis://localhost:6379/0", env="REDIS_URL")
    JWT_SECRET: str = Field(..., env="JWT_SECRET")
    JWT_EXPIRE_MINUTES: int = Field(60, env="JWT_EXPIRE_MINUTES")
    DOMAIN: str = Field(..., env="DOMAIN")
    ADMIN_EMAIL: str = Field(..., env="ADMIN_EMAIL")
    CORS_ORIGINS: str = Field("", env="CORS_ORIGINS")
    ENVIRONMENT: str = Field("production", env="ENVIRONMENT")
    PORT: int = Field(8000, env="PORT")

    @field_validator("CORS_ORIGINS", mode="after")
    @classmethod
    def split_origins(cls, value):
        if isinstance(value, str):
            value = value.strip()
            if value.startswith("[") and value.endswith("]"):
                value = value[1:-1]
            if not value:
                return []
            return [origin.strip().strip('"\'') for origin in value.split(",")]
        return value


@lru_cache()
def get_settings() -> Settings:
    return Settings()


CFG = get_settings().model_dump()
-rw------- 1 www-data www-data 1462 Nov  9 14:28 /var/www/worknow/.env
-rw-r--r-- 1 www-data www-data 2740 Nov  9 14:17 /var/www/worknow/.env.production.template
backend/.env not found
app.include_router(auth.router, prefix="/auth", tags=["Auth"])
app.include_router(jobs.router, prefix="/jobs", tags=["Jobs"])
app.include_router(applications.router, prefix="/applications", tags=["Applications"])
app.include_router(assignments.router, prefix="/assignments", tags=["Assignments"])
app.include_router(payments.router, prefix="/payments", tags=["Payments"])
app.include_router(reviews.router, prefix="/reviews", tags=["Reviews"])
app.include_router(notifications.router, prefix="/notifications", tags=["Notifications"])
app.include_router(admin.router, prefix="/admin", tags=["Admin"])
app.include_router(client_settings.router, prefix="/client/settings", tags=["Client Settings"])
app.include_router(files.router, prefix="/files", tags=["Files"])
app.include_router(phone_verification.router, prefix="/phone", tags=["Phone Verification"])
app.include_router(bank_accounts.router)
app.include_router(withdrawals.router)
app.include_router(activities.router)
app.include_router(messages.router)
app.include_router(favorites.router, prefix="/favorites", tags=["Favorites"])
app.include_router(job_notifications.router, prefix="/job-notifications", tags=["Job Notifications"])
app.include_router(qr.router)
app.include_router(penalties.router)
app.include_router(workers.router, prefix="/workers", tags=["Workers"])


if __name__ == "__main__":
    uvicorn.run("main:app", host="0.0.0.0", port=int(CFG["PORT"]), reload=True)
Note: Unnecessary use of -X or --request, POST is already inferred.
* Host localhost:8008 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8008...
* connect to ::1 port 8008 from ::1 port 39152 failed: Connection refused
*   Trying 127.0.0.1:8008...
* Connected to localhost (127.0.0.1) port 8008
> POST /auth/login HTTP/1.1
> Host: localhost:8008
> User-Agent: curl/8.5.0
> Accept: */*
> Content-Type: application/json
> Content-Length: 34
> 
} [34 bytes data]
< HTTP/1.1 422 Unprocessable Entity
< date: Sun, 09 Nov 2025 15:20:14 GMT
(venv) root@srv1087935:/var/www/worknow# ^C
(venv) root@srv1087935:/var/www/worknow# # VPS上で実行：設定ファイルとCORS設定を確認

# 1. バックエンドの設定ファイルを確認
cat /var/www/worknow/backend/utils/config.py

# 2. 環境変数ファイルを確認（存在する場合）
ls -la /var/www/worknow/.env*
cat /var/www/worknow/backend/.env 2>/dev/null || echo "backend/.env not found"

# 3. バックエンドのルーター設定を確認
cat /var/www/worknow/backend/main.py | grep -A 5 "app.include_router"

# 4. APIエンドポイントをテスト
curl http://localhost:8008/auth/login -X POST -H "Content-Type: application/json" -d '{"email":"test","password":"test"}' -v 2>&1 | head -20
from functools import lru_cache
from typing import List

from dotenv import load_dotenv
from pydantic import Field, field_validator
from pydantic_settings import BaseSettings

load_dotenv()


class Settings(BaseSettings):
    SUPABASE_URL: str = Field(..., env="SUPABASE_URL")
    SUPABASE_KEY: str = Field(..., env="SUPABASE_KEY")
    STRIPE_API_KEY: str = Field(..., env="STRIPE_API_KEY")
    STRIPE_CONNECT_CLIENT_ID: str = Field(..., env="STRIPE_CONNECT_CLIENT_ID")
    STRIPE_WEBHOOK_SECRET: str = Field(..., env="STRIPE_WEBHOOK_SECRET")
    STRIPE_PLATFORM_FEE: int = Field(10, env="STRIPE_PLATFORM_FEE")
    FIREBASE_KEY: str = Field(..., env="FIREBASE_KEY")
    REDIS_URL: str = Field("redis://localhost:6379/0", env="REDIS_URL")
    JWT_SECRET: str = Field(..., env="JWT_SECRET")
    JWT_EXPIRE_MINUTES: int = Field(60, env="JWT_EXPIRE_MINUTES")
    DOMAIN: str = Field(..., env="DOMAIN")
    ADMIN_EMAIL: str = Field(..., env="ADMIN_EMAIL")
    CORS_ORIGINS: str = Field("", env="CORS_ORIGINS")
    ENVIRONMENT: str = Field("production", env="ENVIRONMENT")
    PORT: int = Field(8000, env="PORT")

    @field_validator("CORS_ORIGINS", mode="after")
    @classmethod
    def split_origins(cls, value):
        if isinstance(value, str):
            value = value.strip()
            if value.startswith("[") and value.endswith("]"):
                value = value[1:-1]
            if not value:
                return []
            return [origin.strip().strip('"\'') for origin in value.split(",")]
        return value


@lru_cache()
def get_settings() -> Settings:
    return Settings()


CFG = get_settings().model_dump()
-rw------- 1 www-data www-data 1462 Nov  9 14:28 /var/www/worknow/.env
-rw-r--r-- 1 www-data www-data 2740 Nov  9 14:17 /var/www/worknow/.env.production.template
backend/.env not found
app.include_router(auth.router, prefix="/auth", tags=["Auth"])
app.include_router(jobs.router, prefix="/jobs", tags=["Jobs"])
app.include_router(applications.router, prefix="/applications", tags=["Applications"])
app.include_router(assignments.router, prefix="/assignments", tags=["Assignments"])
app.include_router(payments.router, prefix="/payments", tags=["Payments"])
app.include_router(reviews.router, prefix="/reviews", tags=["Reviews"])
app.include_router(notifications.router, prefix="/notifications", tags=["Notifications"])
app.include_router(admin.router, prefix="/admin", tags=["Admin"])
app.include_router(client_settings.router, prefix="/client/settings", tags=["Client Settings"])
app.include_router(files.router, prefix="/files", tags=["Files"])
app.include_router(phone_verification.router, prefix="/phone", tags=["Phone Verification"])
app.include_router(bank_accounts.router)
app.include_router(withdrawals.router)
app.include_router(activities.router)
app.include_router(messages.router)
app.include_router(favorites.router, prefix="/favorites", tags=["Favorites"])
app.include_router(job_notifications.router, prefix="/job-notifications", tags=["Job Notifications"])
app.include_router(qr.router)
app.include_router(penalties.router)
app.include_router(workers.router, prefix="/workers", tags=["Workers"])


if __name__ == "__main__":
    uvicorn.run("main:app", host="0.0.0.0", port=int(CFG["PORT"]), reload=True)
Note: Unnecessary use of -X or --request, POST is already inferred.
* Host localhost:8008 was resolved.
* IPv6: ::1
* IPv4: 127.0.0.1
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0*   Trying [::1]:8008...
* connect to ::1 port 8008 from ::1 port 58280 failed: Connection refused
*   Trying 127.0.0.1:8008...
* Connected to localhost (127.0.0.1) port 8008
> POST /auth/login HTTP/1.1
> Host: localhost:8008
> User-Agent: curl/8.5.0
> Accept: */*
> Content-Type: application/json
> Content-Length: 34
> 
} [34 bytes data]
< HTTP/1.1 422 Unprocessable Entity
< date: Sun, 09 Nov 2025 15:20:19 GMT
(venv) root@srv1087935:/var/www/worknow# # VPS上で実行：環境変数とCORS設定を確認 

# .envファイルの内容を確認
sudo cat /var/www/worknow/.env

# フロントエンドのAPI設定を確認
cat /var/www/worknow/frontend/dist/index.html | grep -o 'http[s]*://[^"]*' | head -10

# APIのベースURLが正しいか確認
curl -I http://localhost:8008/auth/login 2>&1 | head -10
DATABASE_URL=postgresql://worknow_user:Change_This_Password_123!@localhost:5432/worknow_production
PGHOST=localhost
PGPORT=5432
PGDATABASE=worknow_production
PGUSER=worknow_user
PGPASSWORD=Change_This_Password_123!

SECRET_KEY=pioA8o+nNR+8Zpp+a+QBn6PcKBSQ5unzUFVr6YTTGML557q2o1kt4Sf/eyuUDlj6
JWT_SECRET=pioA8o+nNR+8Zpp+a+QBn6PcKBSQ5unzUFVr6YTTGML557q2o1kt4Sf/eyuUDlj6
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

BACKEND_URL=https://sinjapan-worknow.com/api
FRONTEND_URL=https://sinjapan-worknow.com
DOMAIN=sinjapan-worknow.com
ALLOWED_ORIGINS=https://sinjapan-worknow.com,https://www.sinjapan-worknow.com

SUPABASE_URL=https://dummy.supabase.co
SUPABASE_KEY=dummy_key_replace_later

STRIPE_API_KEY=sk_test_dummy
STRIPE_SECRET_KEY=pioA8o+nNR+8Zpp+a+QBn6PcKBSQ5unzUFVr6YTTGML557q2o1kt4Sf/eyuUDlj6
STRIPE_PUBLISHABLE_KEY=pk_test_dummy
STRIPE_WEBHOOK_SECRET=whsec_dummy
STRIPE_CONNECT_CLIENT_ID=ca_dummy

FIREBASE_PROJECT_ID=dummy
FIREBASE_PRIVATE_KEY_ID=dummy
FIREBASE_PRIVATE_KEY="dummy"
FIREBASE_CLIENT_EMAIL=dummy@dummy.com
FIREBASE_CLIENT_ID=dummy
FIREBASE_CLIENT_X509_CERT_URL=https://dummy.com
FIREBASE_KEY=dummy

REDIS_URL=redis://localhost:6379/0

SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=noreply@sinjapan-worknow.com
SMTP_PASSWORD=dummy
SMTP_FROM=noreply@sinjapan-worknow.com

UPLOAD_DIR=/var/www/worknow/backend/uploads
MAX_UPLOAD_SIZE=10485760

ADMIN_EMAIL=admin@sinjapan-worknow.com

NODE_ENV=production
PYTHON_ENV=production
LOG_LEVEL=info
https://unpkg.com/leaflet@1.9.4/dist/leaflet.css
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0    31    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
HTTP/1.1 405 Method Not Allowed
date: Sun, 09 Nov 2025 15:20:50 GMT
server: uvicorn
allow: POST
content-length: 31
content-type: application/json

(venv) root@srv1087935:/var/www/worknow# # VPS上で実行：設定を確認して修正

# 1. バックエンドの設定ファイルでCORSキー名を確認
grep -n "CORS" /var/www/worknow/backend/utils/config.py

# 2. .envファイルを修正（CORS_ORIGINSを追加）
sudo nano /var/www/worknow/.env
24:    CORS_ORIGINS: str = Field("", env="CORS_ORIGINS")
28:    @field_validator("CORS_ORIGINS", mode="after")

  GNU nano 7.2                  /var/www/worknow/.env                           
DATABASE_URL=postgresql://worknow_user:Change_This_Password_123!@localhost:5432>
PGHOST=localhost
PGPORT=5432
PGDATABASE=worknow_production
PGUSER=worknow_user
PGPASSWORD=Change_This_Password_123!

SECRET_KEY=pioA8o+nNR+8Zpp+a+QBn6PcKBSQ5unzUFVr6YTTGML557q2o1kt4Sf/eyuUDlj6
JWT_SECRET=pioA8o+nNR+8Zpp+a+QBn6PcKBSQ5unzUFVr6YTTGML557q2o1kt4Sf/eyuUDlj6
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

BACKEND_URL=https://sinjapan-worknow.com/api
FRONTEND_URL=https://sinjapan-worknow.com
DOMAIN=sinjapan-worknow.com
ALLOWED_ORIGINS=https://sinjapan-worknow.com,https://www.sinjapan-worknow.com

SUPABASE_URL=https://dummy.supabase.co
SUPABASE_KEY=dummy_key_replace_later

                               [ Read 50 lines ]
^G Help      ^O Write Out ^W Where Is  ^K Cut       ^T Execute   ^C Location
^X Exit      ^R Read File ^\ Replace   ^U Paste     ^J Justify   ^/ Go To Line
